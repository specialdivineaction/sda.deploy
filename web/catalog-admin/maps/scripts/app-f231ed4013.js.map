{"version":3,"sources":["scripts/app-f231ed4013.js"],"names":["angular","module","workEditorDirective","WorkEditorController","$scope","worksRepo","_","activate","work","editions","forEach","edition","vm","push","model","focused","createEdition","titles","cloneDeep","authors","otherAuthors","deleteEdition","ix","splice","this","$inject","directive","restrict","templateUrl","scope","controller","controllerAs","workEditorItemDirective","$log","linkFunc","id","error","WorkEditorItemController","get","$promise","then","loaded","link","volumeEditorDirective","volume","titleEditorDirective","title","publicationInfoEditorDirective","pubInfo","summaryEditorDirective","summary","editionEditorDirective","EditionEditorController","volumes","createVolume","publicationInfo","deleteVolume","dateEditorDirective","date","copyEditorDirective","CopyEditorController","addHandler","HathiTrustRefHandler","GoogleBooksRefHandler","handler","refHandlers","parseProperties","type","url","copy","properties","copyForm","$setValidity","setProperties","handle","parsed","parseUrl","seq","hostname","query","path","substr","lastIndexOf","urlappend","subquery","parseQueryString","htid","display","section","printsec","page","pg","parser","document","createElement","href","toString","protocol","host","port","pathname","search","fragment","hash","sep","isString","flags","indexOf","kvpairs","split","pair","key","value","decodeURIComponent","URIError","hasOwnProperty","isArray","authorRefEditorDirective","ref","ShowWorkController","$state","$stateParams","$mdDialog","$mdToast","workId","bcTitle","getTitle","loading","editBibInfo","$event","dialog","targetEvent","locals","dialogPromise","show","updatedWork","extend","saveWork","showSavedToast","editSummary","updatedSummary","addEdition","prompt","textContent","placeholder","ok","cancel","savePromise","editionName","saveEdition","go","editionId","confirm","addCopy","editCopy","copies","updatedCopy","deleteCopy","toast","simple","position","WorkEditDialogController","close","hide","ShowVolumeController","$q","getWork","getEdition","getVolume","volumeId","workTitle","all","updatedVolume","saveVolume","VolumeEditDialogController","SummaryEditDialogController","ShowEditionController","updatedEdition","addVolume","volumeNumber","EditionEditDialogController","CopyEditDialogController","worksRepoProvider","worksRepoFactory","$resource","findAll","restResource","q","max","isUndefined","TypeError","adaptWork","editionResource","adaptEdition","volumeResource","adaptVolume","createWork","save","arguments","length","apply","Error","$update","$save","deleteWork","dataItem","adaptCommon","entity","toLowerCase","author","role","getTitleByTypePreference","types","reduce","found","find","provider","update","method","repo","getAll","create","$get","tasksRepoProvider","tasksRepoFactory","getTask","taskId","workflow","workflowResource","task","getItems","stageId","options","itemResource","stage","start","transition","item","sourceStage","targetStage","result","itemId","comments","resp","slideToggle","el","attr","duration","parseInt","slideToggleDuration","$watch","active","stop","slideDown","slideUp","MainController","$mdSidenav","searchQuery","openMenu","toggle","results","debounce","NewWorkController","BulkEditorController","tasksRepo","stages","fetchStage","focusItem","worklists","worklist","items","works","transitionItem","updatedItem","remove","i","unshift","group","runBlock","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","views","main","otherwise","config","constant","moment","$logProvider","$mdThemingProvider","debugEnabled","definePalette","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastDefaultColor","contrastDarkColors","theme","primaryPalette","accentPalette","$templateCache","put"],"mappings":"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","file":"scripts/app-f231ed4013.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb', [\n      'ngAnimate',\n      'ngCookies',\n      // 'ngTouch',\n      'ngSanitize',\n      'ngMessages',\n      'ngAria',\n      'ngResource',\n      'ui.router',\n      'ckeditor',\n      'ngMaterial',\n      'slideToggle',\n      'trcWorks',\n      'trcTasks'\n    ]);\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('workEditor', workEditorDirective);\n\n  /** @ngInject */\n  function workEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/work-editor/work-editor.html',\n      scope: {\n        work: '=ngModel'\n      },\n      controller: WorkEditorController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function WorkEditorController($scope, worksRepo, _) {\n      var vm = this;\n\n      vm.editions = [];\n\n      vm.createEdition = createEdition;\n      vm.deleteEdition = deleteEdition;\n\n      activate();\n\n      function activate() {\n        $scope.work.editions.forEach(function (edition) {\n          vm.editions.push({\n            model: edition,\n            focused: false\n          });\n        });\n      }\n\n      function createEdition() {\n        var edition = worksRepo.createEdition();\n        edition.titles = _.cloneDeep($scope.work.titles);\n        edition.authors = _.cloneDeep($scope.work.authors);\n        edition.otherAuthors = _.cloneDeep($scope.work.otherAuthors);\n\n        $scope.work.editions.push(edition);\n        vm.editions.push({\n          model: edition,\n          focused: true\n        });\n      }\n\n      function deleteEdition(ix) {\n        vm.editions.splice(ix, 1);\n        $scope.work.editions.splice(ix, 1);\n      }\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('workEditorItem', workEditorItemDirective);\n\n  /** @ngInject */\n  function workEditorItemDirective($log) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/work-editor/work-editor-item.html',\n      link: linkFunc,\n      scope: {\n        id: '=id'\n      },\n      controller: WorkEditorItemController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    function linkFunc($scope) {\n      if (!$scope.id) {\n        $log.error('missing required attribute \"id\"');\n      }\n    }\n\n    /** @ngInject */\n    function WorkEditorItemController($scope, worksRepo) {\n      var vm = this;\n\n      vm.loaded = false;\n\n      activate();\n\n      function activate() {\n        if ($scope.id) {\n          vm.work = worksRepo.get($scope.id);\n          vm.work.$promise.then(function () {\n            vm.loaded = true;\n          });\n        }\n      }\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('volumeEditor', volumeEditorDirective);\n\n  /** @ngInject */\n  function volumeEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/volume-editor/volume-editor.html',\n      scope: {\n        volume: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('titleEditor', titleEditorDirective);\n\n  /** @ngInject */\n  function titleEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/title-editor/title-editor.html',\n      scope: {\n        title: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('publicationInfoEditor', publicationInfoEditorDirective);\n\n  /** @ngInject */\n  function publicationInfoEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/publication-info-editor/publication-info-editor.html',\n      scope: {\n        pubInfo: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('summaryEditor', summaryEditorDirective);\n\n  /** @ngInject */\n  function summaryEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/summary-editor/summary-editor.html',\n      scope: {\n        summary: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('editionEditor', editionEditorDirective);\n\n  /** @ngInject */\n  function editionEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/edition-editor/edition-editor.html',\n      scope: {\n        edition: '=ngModel'\n      },\n      controller: EditionEditorController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function EditionEditorController($scope, worksRepo, _) {\n      var vm = this;\n\n      vm.volumes = [];\n\n      vm.createVolume = createVolume;\n      vm.deleteVolume = deleteVolume;\n\n      activate();\n\n      function activate() {\n        $scope.edition.volumes.forEach(function (volume) {\n          vm.volumes.push({\n            model: volume,\n            focused: false\n          });\n        });\n      }\n\n      function createVolume() {\n        var volume = worksRepo.createVolume();\n        volume.titles = _.cloneDeep($scope.edition.titles);\n        volume.authors = _.cloneDeep($scope.edition.authors);\n        volume.otherAuthors = _.cloneDeep($scope.edition.otherAuthors);\n        volume.publicationInfo = _.cloneDeep($scope.edition.publicationInfo);\n\n        $scope.edition.volumes.push(volume);\n        vm.volumes.push({\n          model: volume,\n          focused: true\n        });\n      }\n\n      function deleteVolume(ix) {\n        vm.volumes.splice(ix, 1);\n        $scope.edition.volumes.splice(ix, 1);\n      }\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('dateEditor', dateEditorDirective);\n\n  /** @ngInject */\n  function dateEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/date-editor/date-editor.html',\n      scope: {\n        date: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('copyEditor', copyEditorDirective);\n\n  /** @ngInject */\n  function copyEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/copy-editor/copy-editor.html',\n      scope: {\n        copy: '=ngModel'\n      },\n      controller: CopyEditorController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function CopyEditorController($scope) {\n      var vm = this;\n\n      vm.refHandlers = {};\n      vm.setProperties = parseProperties;\n\n      activate();\n\n      function activate() {\n        addHandler(HathiTrustRefHandler());\n        addHandler(GoogleBooksRefHandler());\n      }\n\n      function addHandler(handler) {\n        vm.refHandlers[handler.id] = handler;\n      }\n\n      function parseProperties(type, url) {\n        if (vm.refHandlers[type]) {\n          $scope.copy.properties = vm.refHandlers[type](url);\n        }\n\n        $scope.copyForm.url.$setValidity(type, $scope.copy.properties != null);\n      }\n    }\n  }\n\n  function HathiTrustRefHandler() {\n    function handle(url) {\n      var parsed = parseUrl(url);\n      if (!parsed) {\n        return null;\n      }\n\n      var id, seq;\n\n      switch (parsed.hostname) {\n        case 'babel.hathitrust.org':\n          id = parsed.query.id;\n          seq = parsed.query.seq;\n          break;\n\n        case 'hdl.handle.net':\n          id = parsed.path.substr(parsed.path.lastIndexOf('/') + 1);\n\n          if (!parsed.query.urlappend) {\n            break;\n          }\n\n          var subquery = parseQueryString(parsed.query.urlappend);\n          if (!subquery) {\n            break;\n          }\n          seq = subquery.seq;\n          break;\n      }\n\n      if (!id) {\n        return null;\n      }\n\n      return {\n        htid: id,\n        seq: seq\n      };\n    }\n\n    handle.id = 'hathitrust';\n    handle.display = 'HathiTrust';\n\n    return handle;\n  }\n\n  function GoogleBooksRefHandler() {\n    function handle(url) {\n      var parsed = parseUrl(url);\n      if (!parsed) {\n        return null;\n      }\n\n      switch (parsed.hostname) {\n        case 'books.google.com':\n          var id = parsed.query.id;\n          var section = parsed.query.printsec;\n          var page = parsed.query.pg;\n          break;\n      }\n\n      if (!id) {\n        return null;\n      }\n\n      return {\n        id: id,\n        section: section,\n        page: page\n      };\n    }\n\n    handle.id = 'googlebooks';\n    handle.display = 'Google Books';\n\n    return handle;\n  }\n\n  /**\n   * Parses a URL string into its components\n   *\n   * @param  {string} url\n   * @return {URL}\n   */\n  function parseUrl(url) {\n    if (!url) {\n      return null;\n    }\n\n    var parser = document.createElement('a');\n    parser.href = url;\n\n    return {\n      toString: function() {\n        return url;\n      },\n      protocol: parser.protocol,\n      host: parser.host,\n      hostname: parser.hostname,\n      port: parser.port,\n      path: parser.pathname,\n      query: parseQueryString(parser.search),\n      fragment: parser.hash\n    };\n  }\n\n  /**\n   * Parses a query string into key/value pairs\n   *\n   * @param {string} query\n   * @return {object.<string,any>}\n   */\n  function parseQueryString(query, sep) {\n    if (!query || !angular.isString(query)) {\n      return {};\n    }\n\n    // remove leading '?'\n    if (query[0] === '?') {\n      query = query.substr(1);\n    }\n\n    // attempt to auto-detect separator\n    if (!sep) {\n      // auto-detection \"bitmask\"\n      // 0 = none detected -- prefer '&'\n      // 1 = only ';' detected -- use it\n      // 2 = only '&' detected -- use it\n      // 3 = both detected -- prefer '&'\n      var flags = (query.indexOf(';') >= 0 ? 1 : 0) + (query.indexOf('&') >= 0 ? 2 : 0);\n      sep = flags === 1 ? ';' : '&';\n    }\n\n    var parsed = {};\n\n    var kvpairs = query.split(sep);\n    kvpairs.forEach(function (pair) {\n      var ix = pair.indexOf('=');\n      var key = pair;\n      var value = null;\n\n      if (!key) {\n        return;\n      }\n\n      if (ix >= 0) {\n        key = pair.substr(0, ix);\n        value = pair.substr(ix + 1);\n      }\n\n      try {\n        key = decodeURIComponent(key);\n        value = decodeURIComponent(value);\n      } catch (URIError) {\n        return;\n      }\n\n      // TODO: handle key array/map notation\n\n      if (parsed.hasOwnProperty(key)) {\n        // convert repeated keys into an array\n        if (angular.isArray(parsed[key])) {\n          parsed[key].push(value);\n        } else {\n          parsed[key] = [parsed[key], value];\n        }\n      } else {\n        parsed[key] = value;\n      }\n    });\n\n    return parsed;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .directive('authorRefEditor', authorRefEditorDirective);\n\n  /** @ngInject */\n  function authorRefEditorDirective() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/bulk/components/author-ref-editor/author-ref-editor.html',\n      scope: {\n        ref: '=ngModel'\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('ShowWorkController', ShowWorkController);\n\n  /** @ngInject */\n  function ShowWorkController($state, $stateParams, worksRepo, $mdDialog, $mdToast) {\n    var vm = this;\n\n    vm.loading = true;\n    vm.work = null;\n    vm.title = null;\n\n    vm.editBibInfo = editBibInfo;\n    vm.editSummary = editSummary;\n    vm.addEdition = addEdition;\n    vm.deleteEdition = deleteEdition;\n    vm.addCopy = addCopy;\n    vm.editCopy = editCopy;\n    vm.deleteCopy = deleteCopy;\n\n    activate();\n\n    function activate() {\n      vm.work = worksRepo.get($stateParams.workId);\n\n      vm.work.$promise.then(function () {\n        vm.bcTitle = worksRepo.getTitle(vm.work.titles, ['short', 'canonical', 'bibliographic']);\n        vm.title = worksRepo.getTitle(vm.work.titles, ['bibliographic', 'canonical', 'short']);\n\n        vm.loading = false;\n      });\n    }\n\n    function editBibInfo($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/work-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          work: angular.copy(vm.work)\n        },\n        controller: 'WorkEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedWork) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        angular.extend(vm.work, updatedWork);\n\n        worksRepo.saveWork(vm.work).then(showSavedToast);\n      });\n    }\n\n    function editSummary($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/summary-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation (even if it is just a string)\n          summary: angular.copy(vm.work.summary)\n        },\n        controller: 'SummaryEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedSummary) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        vm.work.summary = updatedSummary;\n\n        worksRepo.saveWork(vm.work).then(showSavedToast);\n      });\n    }\n\n    function addEdition($event) {\n      var prompt = $mdDialog.prompt()\n        .targetEvent($event)\n        .title('Create Edition')\n        .textContent('Please provide a name for the new edition.')\n        .placeholder('edition name')\n        .ok('Create')\n        .cancel('Cancel');\n\n      var dialogPromise = $mdDialog.show(prompt);\n\n      var savePromise = dialogPromise.then(function (editionName) {\n        var edition = worksRepo.createEdition();\n        edition.editionName = editionName;\n        edition.titles = angular.copy(vm.work.titles);\n        edition.authors = angular.copy(vm.work.authors);\n        edition.otherAuthors = angular.copy(vm.work.otherAuthors);\n\n        vm.work.editions.push(edition);\n\n        // resolve to the created edition when save is successful\n        return worksRepo.saveEdition(vm.work.id, edition);\n      });\n\n      savePromise.then(showSavedToast);\n\n      savePromise.then(function (edition) {\n        $state.go('root.edition', { workId: vm.work.id, editionId: edition.id });\n      });\n    }\n\n    function deleteEdition(edition, $event) {\n      var confirm = $mdDialog.confirm()\n        .targetEvent($event)\n        .title('Confirm Deletion')\n        .textContent('Are you sure you want to delete this edition?')\n        .ok('Yes')\n        .cancel('No');\n\n      $mdDialog.show(confirm)\n        .then(function () {\n          var ix = vm.work.editions.indexOf(edition);\n          vm.work.editions.splice(ix, 1);\n\n          worksRepo.saveWork(vm.work).then(showSavedToast);\n        });\n    }\n\n    function addCopy($event) {\n      var copy = {};\n      editCopy(copy, $event).then(function () {\n        vm.work.copies.push(copy);\n      });\n    }\n\n    function editCopy(copy, $event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/copy-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          copy: angular.copy(copy)\n        },\n        controller: 'CopyEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedCopy) {\n        // copy updates back to original only after dialog is positively dismised (i.e. not canceled)\n        angular.extend(copy, updatedCopy);\n\n        worksRepo.saveWork(vm.work).then(showSavedToast);\n      });\n\n      return dialogPromise;\n    }\n\n    function deleteCopy(copy, $event) {\n      var confirm = $mdDialog.confirm()\n        .targetEvent($event)\n        .title('Confirm Deletion')\n        .textContent('Are you sure you want to delete this copy?')\n        .ok('Yes')\n        .cancel('No');\n\n      $mdDialog.show(confirm)\n        .then(function () {\n          var ix = vm.work.copies.indexOf(copy);\n          vm.work.copies.splice(ix, 1);\n\n          worksRepo.saveWork(vm.work).then(showSavedToast);\n        });\n    }\n\n    function showSavedToast() {\n      var toast = $mdToast.simple()\n        .textContent('Saved')\n        .position('bottom right');\n\n      return $mdToast.show(toast);\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('WorkEditDialogController', WorkEditDialogController);\n\n  /** @ngInject */\n  function WorkEditDialogController($mdDialog, work) {\n    var vm = this;\n\n    vm.work = work;\n\n    vm.close = close;\n    vm.cancel = cancel;\n\n    function close() {\n      $mdDialog.hide(vm.work);\n    }\n\n    function cancel() {\n      $mdDialog.cancel();\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('ShowVolumeController', ShowVolumeController);\n\n  /** @ngInject */\n  function ShowVolumeController($state, $stateParams, worksRepo, _, $mdDialog, $mdToast, $q) {\n    var vm = this;\n\n    vm.loading = true;\n    vm.work = null;\n    vm.workTitle = null;\n    vm.edition = null;\n    vm.volume = null;\n    vm.title = null;\n\n    vm.editBibInfo = editBibInfo;\n    vm.editSummary = editSummary;\n    vm.addCopy = addCopy;\n    vm.editCopy = editCopy;\n    vm.deleteCopy = deleteCopy;\n\n    activate();\n\n    function activate() {\n      vm.work = worksRepo.getWork($stateParams.workId);\n      vm.edition = worksRepo.getEdition($stateParams.workId, $stateParams.editionId);\n      vm.volume = worksRepo.getVolume($stateParams.workId, $stateParams.editionId, $stateParams.volumeId);\n\n      vm.work.$promise.then(function () {\n        vm.workTitle = worksRepo.getTitle(vm.work.titles, ['short', 'canonical', 'bibliographic']);\n      });\n\n      vm.volume.$promise.then(function () {\n        vm.title = worksRepo.getTitle(vm.volume.titles, ['bibliographic', 'canonical', 'short']);\n      });\n\n      $q.all([vm.work.$promise, vm.edition.$promise, vm.volume.$promise]).then(function () {\n        vm.loading = false;\n      });\n    }\n\n    function editBibInfo($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/volume-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          volume: angular.copy(vm.volume)\n        },\n        controller: 'VolumeEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedVolume) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        angular.extend(vm.volume, updatedVolume);\n\n        worksRepo.saveVolume(vm.work.id, vm.edition.id, vm.volume).then(showSavedToast);\n      });\n\n      return dialogPromise;\n    }\n\n    function editSummary($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/summary-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation (even if it is just a string)\n          summary: angular.copy(vm.volume.summary)\n        },\n        controller: 'SummaryEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedSummary) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        vm.volume.summary = updatedSummary;\n\n        worksRepo.saveVolume(vm.work.id, vm.edition.id, vm.volume).then(showSavedToast);\n      });\n    }\n\n    function addCopy($event) {\n      var copy = {};\n      editCopy(copy, $event).then(function () {\n        vm.volume.copies.push(copy);\n      });\n    }\n\n    function editCopy(copy, $event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/copy-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          copy: angular.copy(copy)\n        },\n        controller: 'CopyEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedCopy) {\n        // copy updates back to original only after dialog is positively dismised (i.e. not canceled)\n        angular.extend(copy, updatedCopy);\n\n        worksRepo.saveVolume(vm.work.id, vm.edition.id, vm.volume).then(showSavedToast);\n      });\n\n      return dialogPromise;\n    }\n\n    function deleteCopy(copy, $event) {\n      var confirm = $mdDialog.confirm()\n        .targetEvent($event)\n        .title('Confirm Deletion')\n        .textContent('Are you sure you want to delete this copy?')\n        .ok('Yes')\n        .cancel('No');\n\n      $mdDialog.show(confirm)\n        .then(function () {\n          var ix = vm.volume.copies.indexOf(copy);\n          vm.volume.copies.splice(ix, 1);\n\n          worksRepo.saveVolume(vm.work.id, vm.edition.id, vm.volume).then(showSavedToast);\n        });\n    }\n\n    function showSavedToast() {\n      var toast = $mdToast.simple()\n        .textContent('Saved')\n        .position('bottom right');\n\n      return $mdToast.show(toast);\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('VolumeEditDialogController', VolumeEditDialogController);\n\n  /** @ngInject */\n  function VolumeEditDialogController($mdDialog, volume) {\n    var vm = this;\n\n    vm.volume = volume;\n\n    vm.close = close;\n    vm.cancel = cancel;\n\n    function close() {\n      $mdDialog.hide(vm.volume);\n    }\n\n    function cancel() {\n      $mdDialog.cancel();\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('SummaryEditDialogController', SummaryEditDialogController);\n\n  /** @ngInject */\n  function SummaryEditDialogController($mdDialog, summary) {\n    var vm = this;\n\n    vm.summary = summary;\n\n    vm.close = close;\n    vm.cancel = cancel;\n\n    function close() {\n      $mdDialog.hide(vm.summary);\n    }\n\n    function cancel() {\n      $mdDialog.cancel();\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('ShowEditionController', ShowEditionController);\n\n  /** @ngInject */\n  function ShowEditionController($state, $stateParams, worksRepo, _, $mdDialog, $mdToast, $q) {\n    var vm = this;\n\n    vm.loading = true;\n    vm.work = null;\n    vm.workTitle = null;\n    vm.edition = null;\n    vm.title = null;\n\n    vm.editBibInfo = editBibInfo;\n    vm.editSummary = editSummary;\n    vm.addVolume = addVolume;\n    vm.deleteVolume = deleteVolume;\n    vm.addCopy = addCopy;\n    vm.editCopy = editCopy;\n    vm.deleteCopy = deleteCopy;\n\n    activate();\n\n    function activate() {\n      vm.work = worksRepo.getWork($stateParams.workId);\n      vm.edition = worksRepo.getEdition($stateParams.workId, $stateParams.editionId);\n\n      vm.work.$promise.then(function () {\n        vm.workTitle = worksRepo.getTitle(vm.work.titles, ['short', 'canonical', 'bibliographic']);\n      });\n\n      vm.edition.$promise.then(function () {\n        vm.title = worksRepo.getTitle(vm.edition.titles, ['bibliographic', 'canonical', 'short']);\n      });\n\n      $q.all([vm.work.$promise, vm.edition.$promise]).then(function (){\n        vm.loading = false;\n      });\n    }\n\n    function editBibInfo($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/edition-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          edition: angular.copy(vm.edition)\n        },\n        controller: 'EditionEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedEdition) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        angular.extend(vm.edition, updatedEdition);\n\n        worksRepo.saveEdition(vm.work.id, vm.edition).then(showSavedToast);\n      });\n\n      return dialogPromise;\n    }\n\n    function editSummary($event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/summary-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation (even if it is just a string)\n          summary: angular.copy(vm.edition.summary)\n        },\n        controller: 'SummaryEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedSummary) {\n        // copy updates back to original only after dialog is positively dismissed (i.e. not canceled)\n        vm.edition.summary = updatedSummary;\n\n        worksRepo.saveEdition(vm.work.id, vm.edition).then(showSavedToast);\n      });\n    }\n\n    function addVolume($event) {\n      var prompt = $mdDialog.prompt()\n        .targetEvent($event)\n        .title('Create Volume')\n        .textContent('Please provide a number for the new volume.')\n        .placeholder('volume number')\n        .ok('Create')\n        .cancel('Cancel');\n\n      var dialogPromise = $mdDialog.show(prompt);\n\n      var savePromise = dialogPromise.then(function (volumeNumber) {\n        var volume = worksRepo.createVolume();\n        volume.volumeNumber = volumeNumber;\n        volume.titles = angular.copy(vm.edition.titles);\n        volume.authors = angular.copy(vm.edition.authors);\n        volume.otherAuthors = angular.copy(vm.edition.otherAuthors);\n        volume.publicationInfo = angular.copy(vm.edition.publicationInfo);\n\n        vm.edition.volumes.push(volume);\n\n        return worksRepo.saveVolume(vm.work.id, vm.edition.id, volume);\n      });\n\n      savePromise.then(showSavedToast);\n\n      savePromise.then(function (volume) {\n        $state.go('root.volume', { workId: vm.work.id, editionId: vm.edition.id, volumeId: volume.id });\n      });\n    }\n\n    function deleteVolume(volume, $event) {\n      var confirm = $mdDialog.confirm()\n        .targetEvent($event)\n        .title('Confirm Deletion')\n        .textContent('Are you sure you want to delete this volume?')\n        .ok('Yes')\n        .cancel('No');\n\n      $mdDialog.show(confirm)\n        .then(function () {\n          var ix = vm.edition.volumes.indexOf(volume);\n          vm.edition.volumes.splice(ix, 1);\n\n          worksRepo.saveEdition(vm.work.id, vm.edition).then(showSavedToast);\n        });\n    }\n\n    function addCopy($event) {\n      var copy = {};\n      editCopy(copy, $event).then(function () {\n        vm.edition.copies.push(copy);\n      });\n    }\n\n    function editCopy(copy, $event) {\n      var dialog = {\n        targetEvent: $event,\n        templateUrl: 'app/work/copy-edit-dialog.html',\n        locals: {\n          // create a copy for manipulation\n          copy: angular.copy(copy)\n        },\n        controller: 'CopyEditDialogController',\n        controllerAs: 'vm'\n      };\n\n      var dialogPromise = $mdDialog.show(dialog);\n\n      dialogPromise.then(function (updatedCopy) {\n        // copy updates back to original only after dialog is positively dismised (i.e. not canceled)\n        angular.extend(copy, updatedCopy);\n\n        worksRepo.saveEdition(vm.work.id, vm.edition).then(showSavedToast);\n      });\n\n      return dialogPromise;\n    }\n\n    function deleteCopy(copy, $event) {\n      var confirm = $mdDialog.confirm()\n        .targetEvent($event)\n        .title('Confirm Deletion')\n        .textContent('Are you sure you want to delete this copy?')\n        .ok('Yes')\n        .cancel('No');\n\n      $mdDialog.show(confirm)\n        .then(function () {\n          var ix = vm.edition.copies.indexOf(copy);\n          vm.edition.copies.splice(ix, 1);\n\n          worksRepo.saveEdition(vm.work.id, vm.edition).then(showSavedToast);\n        });\n    }\n\n    function showSavedToast() {\n      var toast = $mdToast.simple()\n        .textContent('Saved')\n        .position('bottom right');\n\n      return $mdToast.show(toast);\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('EditionEditDialogController', EditionEditDialogController);\n\n  /** @ngInject */\n  function EditionEditDialogController($mdDialog, edition) {\n    var vm = this;\n\n    vm.edition = edition;\n\n    vm.close = close;\n    vm.cancel = cancel;\n\n    function close() {\n      $mdDialog.hide(vm.edition);\n    }\n\n    function cancel() {\n      $mdDialog.cancel();\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('CopyEditDialogController', CopyEditDialogController);\n\n  /** @ngInject */\n  function CopyEditDialogController($mdDialog, copy) {\n    var vm = this;\n\n    vm.copy = copy;\n\n    vm.close = close;\n    vm.cancel = cancel;\n\n    function close() {\n      $mdDialog.hide(vm.copy);\n    }\n\n    function cancel() {\n      $mdDialog.cancel();\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('trcWorks', [\n      'ngResource'\n    ]);\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('trcWorks')\n    .provider('worksRepo', worksRepoProvider);\n\n  /**\n   * This functionality is already being implemented as a standalone trc-biblio module. The code is\n   * used here as an interim until the Bower build/dependency workflow has been finalized.\n   *\n   * @return {angular.provider}\n   */\n  function worksRepoProvider() {\n    var provider = {};\n    provider.url = '/api/works';\n    provider.$get = worksRepoFactory;\n    return provider;\n\n    /** @ngInject */\n    function worksRepoFactory($resource, _) {\n      var restResource = $resource(provider.url + '/:workId', { workId: '@id' }, {\n        update: {\n          method: 'PUT'\n        }\n      });\n\n      var editionResource = $resource(provider.url + '/:workId/editions/:editionId', { editionId: '@id' }, {\n        update: {\n          method: 'PUT'\n        }\n      });\n\n      var volumeResource = $resource(provider.url + '/:workId/editions/:editionId/volumes/:volumeId', { volumeId: '@id' }, {\n        update: {\n          method: 'PUT'\n        }\n      });\n\n      var repo = {};\n      repo.getAll = findAll;\n      repo.search = search;\n      repo.get = getWork;\n      repo.getWork = getWork;\n      repo.getEdition = getEdition;\n      repo.getVolume = getVolume;\n      repo.create = createWork;\n      repo.createWork = createWork;\n      repo.createEdition = createEdition;\n      repo.createVolume = createVolume;\n      repo.save = save;\n      repo.saveWork = saveWork;\n      repo.saveEdition = saveEdition;\n      repo.saveVolume = saveVolume;\n      repo.delete = deleteWork;\n      repo.getTitle = getTitleByTypePreference;\n      return repo;\n\n      /**\n       * Retrieves a listing of all works\n       *\n       * @return {WorkProxy[]}\n       */\n      function findAll() {\n        return search('');\n      }\n\n      /**\n       * Search for works by query\n       *\n       * @return {SearchResultSet}\n       */\n      function search(query) {\n        return restResource.get({ q: query, max: 50 });\n      }\n\n      /**\n       * Retrieves a work object by identifier.\n       *\n       * A proxy object will be returned immediately, and its properties will be populated after the\n       * request succeds. If fine-grained asynchronous handling, etc. is required, the request's\n       * promis is available on Work.$promise.\n       *\n       * @param {string} workId\n       * @return {Work}\n       */\n      function getWork(workId) {\n        if (angular.isUndefined(workId)) {\n          throw new TypeError('Invalid ID provided to getWork');\n        }\n\n        var work = restResource.get({ workId: workId });\n\n        work.$promise.then(adaptWork);\n\n        return work;\n      }\n\n      /**\n       * Retrieves an edition object by identifier.\n       *\n       * A proxy object will be returned immediately, and its properties will be populated after the\n       * request succeds. If fine-grained asynchronous handling, etc. is required, the request's\n       * promis is available on Edition.$promise.\n       *\n       * @param {string} workId\n       * @param {string} editionId\n       * @return {Edition}\n       */\n      function getEdition(workId, editionId) {\n        if (angular.isUndefined(workId) || angular.isUndefined(editionId)) {\n          throw new TypeError('Invalid IDs provided to getEdition');\n        }\n\n        var edition = editionResource.get({ workId: workId, editionId: editionId });\n\n        edition.$promise.then(adaptEdition);\n\n        return edition;\n      }\n\n      /**\n       * Retrieves a volume object by identifier.\n       *\n       * A proxy object will be returned immediately, and its properties will be populated after the\n       * request succeds. If fine-grained asynchronous handling, etc. is required, the request's\n       * promis is available on Volume.$promise.\n       *\n       * @param {string} workId\n       * @param {string} editionId\n       * @param {string} volumeId\n       * @return {Volume}\n       */\n      function getVolume(workId, editionId, volumeId) {\n        if (angular.isUndefined(workId) || angular.isUndefined(editionId) || angular.isUndefined(volumeId)) {\n          throw new TypeError('Invalid IDs provided to getVolume');\n        }\n\n        var volume = volumeResource.get({ workId: workId, editionId: editionId, volumeId: volumeId });\n\n        volume.$promise.then(adaptVolume);\n\n        return volume;\n      }\n\n      /**\n       * Creates a new work instance\n       *\n       * @return {Work}\n       */\n      function createWork() {\n        var work = new restResource();\n        return adaptWork(work);\n      }\n\n      /**\n       * Creates a new edition instance\n       *\n       * @return {Edition}\n       */\n      function createEdition() {\n        var edition = new editionResource();\n        return adaptEdition(edition);\n      }\n\n      /**\n       * Creates a new volume instance\n       *\n       * @return {Volume}\n       */\n      function createVolume() {\n        var volume = new volumeResource();\n        return adaptVolume(volume);\n      }\n\n      /**\n       * Dispatch method for saving works, editions, and volumes\n       *\n       * @deprecated use saveWork, saveEdition, or saveVolume directly\n       * @return {Promise}\n       */\n      function save() {\n        switch (arguments.length) {\n          case 1: return saveWork.apply(null, arguments);\n          case 2: return saveEdition.apply(null, arguments);\n          case 3: return saveVolume.apply(null, arguments);\n        }\n        throw new TypeError('Unexpected arguments to worksRepo#save');\n      }\n\n      /**\n       * Saves a work instance back to the server\n       *\n       * @param {Work} work\n       * @return {Promise.<Work>}\n       */\n      function saveWork(work) {\n        if (!(work instanceof restResource)) {\n          throw new Error('work was not created by this repo');\n        }\n\n        // ngResource automatically updates the model to reflect any server changes (e.g. setting IDs for the work/edtions/volumes/copies).\n        return work.id\n          ? work.$update()\n          : work.$save();\n      }\n\n      /**\n       * Saves an edition instance back to the server\n       *\n       * @param  {string} workId\n       * @param  {Edition} edition\n       * @return {Promise.<Edition>}\n       */\n      function saveEdition(workId, edition) {\n        if (!workId) {\n          throw new Error('no work id provided');\n        }\n\n        if (!(edition instanceof editionResource)) {\n          throw new Error('edition was not created by this repo');\n        }\n\n        return edition.id\n          ? edition.$update({ workId: workId })\n          : edition.$save({ workId: workId });\n      }\n\n      /**\n       * Saves a volume instance back to the server\n       *\n       * @param  {string} workId\n       * @param  {string} editionId\n       * @param  {Volume} volume\n       * @return {Promise.<Volume>}\n       */\n      function saveVolume(workId, editionId, volume) {\n        if (!workId) {\n          throw new Error('no work id provided');\n        }\n\n        if (!editionId) {\n          throw new Error('no edition id provided');\n        }\n\n        if (!(volume instanceof volumeResource)) {\n          throw new Error('volume was not created by this repo');\n        }\n\n        return volume.id\n          ? volume.$update({ workId: workId, editionId: editionId })\n          : volume.$save({ workId: workId, editionId: editionId });\n      }\n\n      /**\n       * Deletes a work instance from the server\n       *\n       * @param  {string} id\n       */\n      function deleteWork(workId) {\n        var dataItem = restResource.delete({ id: workId });\n        return dataItem.$promise;\n      }\n\n      /**\n       * Ensure that aggregate fields common to all work/edition/volume entities exist and are formatted correctly\n       *\n       * @param  {Work|Edition|Volume} entity\n       * @return {Work|Edition|Volume}\n       */\n      function adaptCommon(entity) {\n        if (!entity.titles) {\n          entity.titles = [];\n        } else {\n          entity.titles.forEach(function (title) {\n            title.type = title.type.toLowerCase();\n          });\n        }\n\n        if (!entity.authors) {\n          entity.authors = [];\n        } else {\n          entity.authors.forEach(function (author) {\n            author.role = author.role.toLowerCase();\n          });\n        }\n\n        if (!entity.otherAuthors) {\n          entity.otherAuthors = [];\n        } else {\n          entity.otherAuthors.forEach(function (author) {\n            author.role = author.role.toLowerCase();\n          });\n        }\n\n        if (!entity.copies) {\n          entity.copies = [];\n        }\n\n        return entity;\n      }\n\n      /**\n       * Ensure that work aggregate fields exist and are formatted correctly\n       *\n       * @param  {Work} work\n       * @return {Work}\n       */\n      function adaptWork(work) {\n        adaptCommon(work);\n\n        if (!work.editions) {\n          work.editions = [];\n        } else {\n          work.editions.forEach(adaptEdition);\n        }\n\n        return work;\n      }\n\n      /**\n       * Ensure that edition aggregate fields exist and are formatted correctly\n       *\n       * @param  {Edition} edition\n       * @return {Edition}\n       */\n      function adaptEdition(edition) {\n        adaptCommon(edition);\n\n        if (!edition.volumes) {\n          edition.volumes = [];\n        } else {\n          edition.volumes.forEach(adaptVolume);\n        }\n\n        return edition;\n      }\n\n      /**\n       * Ensure that volume aggregate fields exist and are formatted correctly\n       *\n       * @param  {Volume} volume\n       * @return {Volume}\n       */\n      function adaptVolume(volume) {\n        adaptCommon(volume);\n\n        return volume;\n      }\n\n      /**\n       * Retrieves the first available title of the given type or falsey if no title can be found.\n       * If multiple types are given, returns the title corresponding to the first type for which a title is found.\n       *\n       * @param  {Title[]}         titles\n       * @param  {string|string[]} types\n       * @return {Title}\n       */\n      function getTitleByTypePreference(titles, types) {\n        if (!angular.isArray(types)) {\n          types = [types];\n        }\n\n        return types.reduce(function (found, type) {\n          return found || _.find(titles, { type: type });\n        }, null);\n      }\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('trcTasks', [\n      'ngResource'\n    ]);\n\n})();\n\n/**\n * @typedef {object} Workflow\n * @property {string} id\n * @property {string} label\n * @property {string} description\n * @property {object.<string, WorkflowStage>} stages\n * @property {string} status\n */\n\n/**\n * @typedef {object} WorkflowStage\n * @property {string} id\n * @property {string} label\n * @property {string} description\n * @property {boolean} isFinal\n * @property {WorkflowStageTransition[]} transitions\n */\n\n/**\n * @typedef {object} WorkflowStageTransition\n * @property {string} sourceStage\n * @property {string} targetStage\n * @property {string} label\n */\n\n/**\n * @typedef {object} Worklist\n * @property {string} groupId\n * @property {string} label\n * @property {integer} itemCount\n * @property {integer} start\n * @property {integer} max\n * @property {WorkItem[]} items\n */\n\n/**\n * @typedef {object} WorkItem\n * @property {string} itemId\n * @property {string} type\n * @property {string} entityId\n * @property {string} label\n * @property {object.<string,string>} properties\n * @property {string} stage\n * @property {string} task\n */\n\n(function () {\n  'use strict';\n\n  angular\n    .module('trcTasks')\n    .provider('tasksRepo', tasksRepoProvider);\n\n  /**\n   * @return {angular.provider}\n   */\n  function tasksRepoProvider() {\n    var provider = {};\n    provider.url = '/api/tasks';\n    provider.$get = tasksRepoFactory;\n    return provider;\n\n    /** @ngInejct */\n    function tasksRepoFactory($resource) {\n      var workflowResource = $resource(provider.url + '/:taskId/workflow', { taskId: 'copies' });\n      var itemResource = $resource(provider.url + '/:taskId/items/:itemId', { taskId: 'copies', itemId: '@itemId' });\n\n      var repo = {};\n      repo.get = getTask;\n      repo.getItems = getItems;\n      repo.transition = transition;\n      return repo;\n\n      /**\n       * Retrieves a listing of all tasks\n       *\n       * @param  {string} [taskId=copies]\n       * @return {GroupedTaskList}\n       */\n      function getTask(taskId) {\n        taskId = taskId || 'copies';\n\n        var workflow = workflowResource.get({ taskId: taskId });\n\n        var task = {\n          $promise: workflow.$promise.then(function () {\n            return task;\n          }),\n          workflow: workflow,\n          getItems: function (stageId, options) {\n            return getItems(taskId, stageId, options);\n          }\n        };\n\n        return task;\n      }\n\n      /**\n       * Gets items from the task endpoint for a given stage\n       *\n       * @param  {string}  [taskId=copies]  Task ID\n       * @param  {string}  stageId          Workflow stage for which to get items\n       * @param  {object}  options\n       * @param  {integer} [options.start]  Starting index\n       * @param  {integer} [options.max]    Maximum number of items to fetch per page\n       * @return {Worklist}\n       */\n      function getItems(taskId, stageId, options) {\n        options = options || {};\n        return itemResource.get({\n          taskId: taskId,\n          stage: stageId,\n          start: options.start,\n          max: options.max\n        });\n      }\n\n      /**\n       * Transition an item from its current stage to a target stage\n       *\n       * @param  {WorkItem}                item   Work item instance\n       * @param  {WorkflowStageTransition} transition Target workflow stage\n       * @return {WorkItem}                       Updated work item instance\n       */\n      function transition(item, transition) {\n        if (item.stage !== transition.sourceStage) {\n          throw new Error('Transition (' + transition.sourceStage + ' -> ' + transition.targetStage + ') is not valid for item currently in stage ' + item.stage);\n        }\n\n        var result = itemResource.save({\n          itemId: item.itemId\n        }, {\n          stage: transition.targetStage,\n          // NOTE comments are not saved yet\n          comments: null\n        });\n\n        // propagate updates to the original item\n        result.$promise.then(function (resp) {\n          angular.extend(item, resp);\n        });\n\n        return result;\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('slideToggle', []);\n\n})();\n\n(function () {\n   'use strict';\n\n   angular\n      .module('slideToggle')\n      .directive('slideToggle', slideToggle);\n\n   /** @ngInject */\n   function slideToggle() {\n      var directive = {\n         restrict: 'A',\n         scope: {\n            active: '=slideToggle'\n         },\n         link: linkFunc\n      };\n\n      return directive;\n\n      function linkFunc(scope, el, attr) {\n         var duration = parseInt(attr.slideToggleDuration) || 200;\n         scope.$watch('active', function (active) {\n            if (active) {\n               el.stop().slideDown(duration);\n            } else {\n               el.stop().slideUp(duration);\n            }\n         })\n      }\n   }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController(worksRepo, $stateParams, $mdSidenav, _) {\n    var vm = this;\n\n    vm.loading = false;\n    vm.searchQuery = '';\n\n    vm.openMenu = openMenu;\n    vm.search = _.debounce(search, 300);\n\n    activate();\n\n    function activate() {\n      if ($stateParams.q) {\n        vm.searchQuery = $stateParams.q;\n        search(vm.searchQuery);\n      }\n    }\n\n    function openMenu() {\n      $mdSidenav('left').toggle();\n    }\n\n    function search(query) {\n      vm.loading = true;\n      vm.results = worksRepo.search(query);\n      vm.results.$promise.then(function () {\n        vm.loading = false;\n      })\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('NewWorkController', NewWorkController);\n\n  /** @ngInject */\n  function NewWorkController(worksRepo) {\n    var vm = this;\n\n    vm.work = worksRepo.create();\n\n    vm.save = save;\n\n    function save() {\n      worksRepo.saveWork(vm.work);\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .controller('BulkEditorController', BulkEditorController);\n\n  /** @ngInject */\n  function BulkEditorController($mdSidenav, worksRepo, tasksRepo, _) {\n    var vm = this;\n\n    vm.loaded = false;\n    vm.worklists = {};\n    vm.task = null;\n\n    vm.openMenu = openMenu;\n    vm.focusItem = focusItem;\n    vm.search = _.debounce(search, 200);\n    vm.transition = transitionItem;\n\n    activate();\n\n    function activate() {\n      vm.task = tasksRepo.get();\n\n      vm.task.$promise.then(function (task) {\n        angular.forEach(task.workflow.stages, function (stage) {\n          fetchStage(task, stage.id);\n        });\n        vm.loaded = true;\n      });\n    }\n\n    function openMenu() {\n      $mdSidenav('left').toggle();\n    }\n\n    function focusItem(item) {\n      if (item.focused) {\n        item.focused = false;\n      } else {\n        angular.forEach(vm.worklists, function (worklist) {\n          worklist.items.forEach(function (item) {\n            item.focused = false;\n          });\n        });\n\n        item.focused = true;\n      }\n    }\n\n    function search(query) {\n      vm.loaded = false;\n      var results = worksRepo.search(query);\n      results.$promise.then(function (works) {\n        vm.worklists[0].items = works;\n        vm.loaded = true;\n      });\n    }\n\n    function transitionItem(item, transition) {\n      item.focused = false;\n      var updatedItem = tasksRepo.transition(item, transition);\n      updatedItem.$promise.then(function () {\n        // remove from current group\n        var worklist = vm.worklists[transition.sourceStage];\n        _.remove(worklist.items, function (i) {\n          return i.itemId === item.itemId;\n        });\n\n        // remove entry from page if there are no items to display\n        if (worklist.items.length === 0) {\n          vm.worklists[transition.sourceStage] = null;\n        }\n\n        // refresh target group\n        // fetchStage(vm.task, transition.targetStage);\n\n        // add item to target group instead\n        if (vm.worklists[transition.targetStage]) {\n          vm.worklists[transition.targetStage].items.unshift(updatedItem);\n        } else {\n          fetchStage(vm.task, transition.targetStage);\n        }\n      });\n    }\n\n    function fetchStage(task, stageId) {\n      var group = task.getItems(stageId);\n      group.$promise.then(function (group) {\n        if (group.items.length > 0) {\n          vm.worklists[stageId] = group;\n        }\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('root', {\n        url: '/?q',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'vm'\n      })\n      .state('root.work', {\n        url: 'works/:workId',\n        views: {\n          main: {\n            templateUrl: 'app/work/work.html',\n            controller: 'ShowWorkController',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('root.edition', {\n        url: 'works/:workId/editions/:editionId',\n        views: {\n          main: {\n            templateUrl: 'app/work/edition.html',\n            controller: 'ShowEditionController',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      .state('root.volume', {\n        url: 'works/:workId/editions/:editionId/volumes/:volumeId',\n        views: {\n          main: {\n            templateUrl: 'app/work/volume.html',\n            controller: 'ShowVolumeController',\n            controllerAs: 'vm'\n          }\n        }\n      })\n\n      // .state('bulk', {\n      //   url: '/b',\n      //   templateUrl: 'app/bulk/bulk.html',\n      //   controller: 'BulkEditorController',\n      //   controllerAs: 'vm'\n      // })\n      // .state('work-new', {\n      //   url: '/work',\n      //   templateUrl: 'app/bulk/work-new.html',\n      //   controller: 'NewWorkController',\n      //   controllerAs: 'vm'\n      // })\n      // .state('work-edit', {\n      //   url: '/work/:id',\n      //   templateUrl: 'app/bulk/work-edit.html',\n      //   controller: 'EditWorkController',\n      //   controllerAs: 'vm'\n      // });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global _:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .constant('_', _)\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('sdaAdminWeb')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, /* toastrConfig, */ $mdThemingProvider, tasksRepoProvider, worksRepoProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    $mdThemingProvider.definePalette('darkBrown', {\n      '50': '#595c59',\n      '100': '#4c4f4c',\n      '200': '#404240',\n      '300': '#333533',\n      '400': '#272827',\n      '500': '#1a1b1a',\n      '600': '#0d0e0d',\n      '700': '#010101',\n      '800': '#000000',\n      '900': '#000000',\n      'A100': '#e0f0e0',\n      'A200': '#565956',\n      'A400': '#7e837e',\n      'A700': '#000000',\n\n      contrastDefaultColor: 'light',\n      contrastDarkColors: ['A100']\n    });\n\n    $mdThemingProvider.definePalette('copper', {\n      '50': '#d4b190',\n      '100': '#cca47e',\n      '200': '#c5976b',\n      '300': '#be8a59',\n      '400': '#b67e47',\n      '500': '#a47140',\n      '600': '#926439',\n      '700': '#7f5832',\n      '800': '#6d4b2b',\n      '900': '#5b3e23',\n      'A100': '#dcc3ab',\n      'A200': '#a47140',\n      'A400': '#48321c',\n      'A700': '#272927',\n\n      contrastDefaultColor: 'light',\n      contrastDarkColors: ['50', '100', '200', 'A100']\n    });\n\n    $mdThemingProvider.theme('default')\n      .primaryPalette('darkBrown')\n      .accentPalette('copper');\n\n\n    tasksRepoProvider.url = '/api/catalog/v1/tasks';\n    worksRepoProvider.url = '/api/catalog/works';\n  }\n\n})();\n\nangular.module(\"sdaAdminWeb\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/bulk/bulk.html\",\"<md-content flex=\\\"\\\" layout=\\\"column\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><md-button class=\\\"md-accent md-icon-button\\\" ng-click=\\\"vm.openMenu()\\\" title=\\\"toggle menu\\\" hide-gt-sm=\\\"\\\"><md-icon>menu</md-icon></md-button><img class=\\\"logo\\\" src=\\\"assets/images/sda-logo-light.png\\\"><h2><span>Works Copy Editor</span></h2><span flex=\\\"\\\"></span> <img class=\\\"ox-brand\\\" src=\\\"assets/images/ox-brand-rect.png\\\" alt=\\\"University of Oxford\\\" hide-xs=\\\"\\\"></div></md-toolbar><md-content flex=\\\"\\\" layout=\\\"row\\\"><md-sidenav md-component-id=\\\"left\\\" md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\">Left Sidebar</md-sidenav><md-content flex=\\\"\\\" layout=\\\"column\\\"><md-content flex=\\\"\\\" layout=\\\"column\\\"><md-input-container><label>Search</label><md-icon>search</md-icon><input type=\\\"search\\\" ng-model=\\\"searchQuery\\\" ng-change=\\\"vm.search(searchQuery)\\\"></md-input-container><md-content flex=\\\"\\\"><div layout=\\\"row\\\" layout-align=\\\"center center\\\" ng-if=\\\"!vm.loaded\\\"><md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular></div><md-list ng-if=\\\"vm.loaded\\\"><div ng-repeat=\\\"stage in vm.task.workflow.stages\\\" ng-if=\\\"vm.worklists[stage.id]\\\"><md-subheader>{{stage.label}}</md-subheader><div class=\\\"item\\\" layout=\\\"column\\\" ng-repeat=\\\"item in vm.worklists[stage.id].items\\\" ng-class=\\\"{done: item.done, focused: item.focused}\\\" ng-mouseover=\\\"item.hover = true\\\" ng-mouseout=\\\"item.hover = false\\\"><div class=\\\"item-heading\\\"><md-button class=\\\"md-no-style\\\" ng-click=\\\"vm.focusItem(item)\\\" ng-bind-html=\\\"item.label\\\"></md-button><div class=\\\"actions\\\" layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button ng-repeat=\\\"transition in stage.transitions\\\" class=\\\"md-secondary\\\" ng-click=\\\"vm.transition(item, transition, $parent.$index)\\\" ng-show=\\\"item.hover || item.focused\\\"><span>{{transition.label}}</span></md-button></div></div><md-content slide-toggle=\\\"item.focused\\\"><work-editor-item id=\\\"item.entityId\\\" ng-if=\\\"item.focused\\\"></work-editor-item></md-content></div></div></md-list></md-content></md-content></md-content></md-content></md-content>\");\n$templateCache.put(\"app/bulk/work-new.html\",\"<div layout=\\\"column\\\" flex=\\\"\\\"><work-editor ng-model=\\\"vm.work\\\"></work-editor><div layout=\\\"row\\\" layout-align=\\\"end\\\"><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"vm.save()\\\">Save</md-button></div></div>\");\n$templateCache.put(\"app/main/main.html\",\"<md-content flex=\\\"\\\" layout=\\\"column\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><md-button class=\\\"md-accent md-icon-button\\\" ng-click=\\\"vm.openMenu()\\\" title=\\\"toggle menu\\\" hide-gt-sm=\\\"\\\"><md-icon>menu</md-icon></md-button><img class=\\\"logo\\\" src=\\\"assets/images/sda-logo-light.png\\\"><h2><span>Works Copy Editor</span></h2><span flex=\\\"\\\"></span> <img class=\\\"ox-brand\\\" src=\\\"assets/images/ox-brand-rect.png\\\" alt=\\\"University of Oxford\\\" hide-xs=\\\"\\\"></div></md-toolbar><md-content flex=\\\"\\\" layout=\\\"row\\\"><md-sidenav md-component-id=\\\"left\\\" md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" ui-view=\\\"sidebar\\\" layout=\\\"column\\\"><form layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label for=\\\"searchQuery\\\">Search</label><md-icon>search</md-icon><input type=\\\"search\\\" name=\\\"searchQuery\\\" id=\\\"searchQuery\\\" ng-model=\\\"vm.searchQuery\\\" ng-change=\\\"vm.search(vm.searchQuery)\\\" required=\\\"\\\"></md-input-container></form><md-content><div ng-if=\\\"vm.loading\\\" layout=\\\"row\\\" layout-align=\\\"center\\\"><md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular></div><md-list ng-if=\\\"!vm.loading &amp;&amp; vm.results &amp;&amp; vm.results.items.length > 0\\\"><md-list-item ng-repeat=\\\"work in vm.results.items\\\" ui-sref=\\\"root.work({workId: work.id})\\\"><div class=\\\"md-list-item-text\\\"><span>{{work.label}}</span></div></md-list-item></md-list></md-content></md-sidenav><md-content flex=\\\"\\\" layout=\\\"column\\\" ui-view=\\\"main\\\"></md-content></md-content></md-content>\");\n$templateCache.put(\"app/work/copy-edit-dialog.html\",\"<md-dialog flex=\\\"50\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h3>Digital Copy Editor</h3><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=\\\"vm.close()\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><copy-editor ng-model=\\\"vm.copy\\\"></copy-editor></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"vm.cancel()\\\">Cancel</md-button><md-button class=\\\"md-primary\\\" type=\\\"submit\\\">Done</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/work/edition-edit-dialog.html\",\"<md-dialog flex=\\\"80\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h3>Bibliographic Information Editor</h3><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=\\\"vm.close()\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>edition name</label> <input type=\\\"text\\\" ng-model=\\\"vm.edition.editionName\\\" required=\\\"\\\"></md-input-container></div><section class=\\\"publication\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Publication Information</h2></div></md-toolbar><publication-info-editor ng-model=\\\"vm.edition.publicationInfo\\\" flex=\\\"\\\"></publication-info-editor></section><section class=\\\"titles\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Titles</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.edition.titles.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in vm.edition.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.edition.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.edition.authors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.edition.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.edition.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.edition.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.edition.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.edition.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"vm.cancel()\\\">Cancel</md-button><md-button class=\\\"md-primary\\\" type=\\\"submit\\\">Done</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/work/edition.html\",\"<nav layout=\\\"row\\\" layout-padding=\\\"\\\"><ol class=\\\"breadcrumbs\\\" flex=\\\"\\\"><li><a ui-sref=\\\"root.work({workId: vm.work.id})\\\">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \\': \\' : \\'\\'}}{{vm.workTitle.subTitle}}</a></li><li>{{vm.edition.editionName}}</li></ol></nav><div layout=\\\"row\\\" layout-padding=\\\"\\\"><div layout=\\\"column\\\" flex=\\\"60\\\"><section class=\\\"content citation\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Bibliographic Information</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editBibInfo($event)\\\"><md-icon>edit</md-icon></md-button></div><p><span class=\\\"authors\\\" ng-if=\\\"vm.edition.authors && vm.edition.authors.length > 0\\\"><span class=\\\"author\\\" ng-repeat=\\\"author in vm.edition.authors\\\">{{author.lastName}}{{author.lastName && author.firstName ? \\', \\' : \\'\\'}}{{author.firstName}}.</span></span> <span class=\\\"title\\\" ng-if=\\\"vm.title\\\">{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \\': \\' : \\'\\'}}{{vm.title.subtitle}}.</span></p></section><section class=\\\"content summary\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Summary</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editSummary($event)\\\"><md-icon>edit</md-icon></md-button></div><p ng-if=\\\"vm.edition.summary\\\" ng-bind-html=\\\"vm.edition.summary\\\"></p></section><section class=\\\"content volumes\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Volumes</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.addVolume($event)\\\"><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat=\\\"volume in vm.edition.volumes\\\" ui-sref=\\\"root.volume({workId: vm.work.id, editionId: vm.edition.id, volumeId: volume.id})\\\"><span>Volume {{volume.volumeNumber}}</span><md-button class=\\\"md-secondary md-icon-button md-warn\\\" ng-click=\\\"vm.deleteVolume(volume, $event)\\\"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div><div layout=\\\"column\\\" flex=\\\"40\\\"><section class=\\\"content references\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">References</h2></div><p>Coming soon</p></section><section class=\\\"content copies\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.addCopy($event)\\\"><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat=\\\"copy in vm.edition.copies\\\" ng-click=\\\"vm.editCopy(copy, $event)\\\"><span>{{copy.title}}</span><md-button class=\\\"md-secondary md-icon-button md-warn\\\" ng-click=\\\"vm.deleteCopy(copy, $event)\\\"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>\");\n$templateCache.put(\"app/work/summary-edit-dialog.html\",\"<md-dialog flex=\\\"50\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h3>Summary Editor</h3><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=\\\"vm.close()\\\"><md-dialog-content><summary-editor ng-model=\\\"vm.summary\\\"></summary-editor></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"vm.cancel()\\\">Cancel</md-button><md-button class=\\\"md-primary\\\" type=\\\"submit\\\">Done</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/work/volume-edit-dialog.html\",\"<md-dialog flex=\\\"80\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h3>Bibliographic Information Editor</h3><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=\\\"vm.close()\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>volume number</label> <input type=\\\"text\\\" ng-model=\\\"vm.volume.volumeNumber\\\" required=\\\"\\\"></md-input-container></div><section class=\\\"publication\\\" layout=\\\"column\\\"><h2>Publication Information</h2><publication-info-editor ng-model=\\\"vm.volume.publicationInfo\\\"></publication-info-editor></section><section class=\\\"titles\\\" layout=\\\"column\\\"><h2 layout=\\\"row\\\"><span flex=\\\"\\\">Titles</span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.volume.titles.push({})\\\"><md-icon>add</md-icon></md-button></h2><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in vm.volume.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.volume.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><h2 layout=\\\"row\\\"><span flex=\\\"\\\">Authors</span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.volume.authors.push({})\\\"><md-icon>add</md-icon></md-button></h2><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.volume.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.volume.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.volume.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.volume.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.volume.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"vm.cancel()\\\">Cancel</md-button><md-button class=\\\"md-primary\\\" type=\\\"submit\\\">Done</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/work/volume.html\",\"<nav layout=\\\"row\\\" layout-padding=\\\"\\\"><ol class=\\\"breadcrumbs\\\" flex=\\\"\\\"><li><a ui-sref=\\\"root.work({workId: vm.work.id})\\\">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \\': \\' : \\'\\'}}{{vm.workTitle.subTitle}}</a></li><li><a ui-sref=\\\"root.edition({workId: vm.work.id, editionId: vm.edition.id})\\\">{{vm.edition.editionName}}</a></li><li>Volume {{vm.volume.volumeNumber}}</li></ol></nav><div layout=\\\"row\\\" layout-padding=\\\"\\\"><div layout=\\\"column\\\" flex=\\\"60\\\"><section class=\\\"content citation\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Bibliographic Information</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editBibInfo($event)\\\"><md-icon>edit</md-icon></md-button></div><p><span class=\\\"authors\\\" ng-if=\\\"vm.volume.authors && vm.volume.authors.length > 0\\\"><span class=\\\"author\\\" ng-repeat=\\\"author in vm.volume.authors\\\">{{author.lastName}}{{author.lastName && author.firstName ? \\', \\' : \\'\\'}}{{author.firstName}}.</span></span> <span class=\\\"title\\\" ng-if=\\\"vm.title\\\">{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \\': \\' : \\'\\'}}{{vm.title.subtitle}}.</span></p></section><section class=\\\"content summary\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Summary</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editSummary($event)\\\"><md-icon>edit</md-icon></md-button></div><p ng-if=\\\"vm.volume.summary\\\" ng-bind-html=\\\"vm.volume.summary\\\"></p></section></div><div layout=\\\"column\\\" flex=\\\"40\\\"><section class=\\\"content references\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">References</h2></div><p>Coming soon</p></section><section class=\\\"content copies\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.addCopy($event)\\\"><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat=\\\"copy in vm.volume.copies\\\" ng-click=\\\"vm.editCopy(copy, $event)\\\"><span>{{copy.title}}</span><md-button class=\\\"md-secondary md-icon-button md-warn\\\" ng-click=\\\"vm.deleteCopy(copy, $event)\\\"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>\");\n$templateCache.put(\"app/work/work-edit-dialog.html\",\"<md-dialog flex=\\\"80\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h3>Bibliographic Information Editor</h3><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=\\\"vm.close()\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><section class=\\\"titles\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Titles</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.work.titles.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in vm.work.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.work.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.work.authors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.work.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.work.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.work.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in vm.work.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.work.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"vm.cancel()\\\">Cancel</md-button><md-button class=\\\"md-primary\\\" type=\\\"submit\\\">Done</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/work/work.html\",\"<nav layout=\\\"row\\\" layout-padding=\\\"\\\"><ol class=\\\"breadcrumbs\\\" flex=\\\"\\\"><li>{{vm.bcTitle.title}}{{vm.bcTitle && vm.bcTitle.subtitle ? \\': \\' : \\'\\'}}{{vm.bcTitle.subTitle}}</li></ol></nav><div layout=\\\"row\\\" layout-padding=\\\"\\\"><div layout=\\\"column\\\" flex=\\\"60\\\"><section class=\\\"content citation\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Bibliographic Information</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editBibInfo($event)\\\"><md-icon>edit</md-icon></md-button></div><p><span class=\\\"authors\\\" ng-if=\\\"vm.work.authors && vm.work.authors.length > 0\\\"><span class=\\\"author\\\" ng-repeat=\\\"author in vm.work.authors\\\">{{author.lastName}}{{author.lastName && author.firstName ? \\', \\' : \\'\\'}}{{author.firstName}}.</span></span> <span class=\\\"title\\\" ng-if=\\\"vm.title\\\">{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \\': \\' : \\'\\'}}{{vm.title.subtitle}}.</span></p></section><section class=\\\"content summary\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Summary</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.editSummary($event)\\\"><md-icon>edit</md-icon></md-button></div><p ng-if=\\\"vm.work.summary\\\" ng-bind-html=\\\"vm.work.summary\\\"></p></section><section class=\\\"content editions\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Editions</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.addEdition($event)\\\"><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat=\\\"edition in vm.work.editions\\\" ui-sref=\\\"root.edition({workId: vm.work.id, editionId: edition.id})\\\"><span>{{edition.editionName}}</span><md-button class=\\\"md-secondary md-icon-button md-warn\\\" ng-click=\\\"vm.deleteEdition(edition, $event)\\\"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div><div layout=\\\"column\\\" flex=\\\"40\\\"><section class=\\\"content references\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Relationships</h2></div><p>Coming soon</p></section><section class=\\\"content copies\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><h2 class=\\\"content-heading\\\">Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.addCopy($event)\\\"><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat=\\\"copy in vm.work.copies\\\" ng-click=\\\"vm.editCopy(copy, $event)\\\"><span>{{copy.title}}</span><md-button class=\\\"md-secondary md-icon-button md-warn\\\" ng-click=\\\"vm.deleteCopy(copy, $event)\\\"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>\");\n$templateCache.put(\"app/bulk/components/author-ref-editor/author-ref-editor.html\",\"<div layout=\\\"row\\\"><md-input-container><label>role</label><md-select ng-model=\\\"ref.role\\\" required=\\\"\\\"><md-option value=\\\"author\\\">author</md-option><md-option value=\\\"editor\\\">editor</md-option><md-option value=\\\"translator\\\">translator</md-option><md-option value=\\\"other\\\">other</md-option></md-select></md-input-container><md-input-container flex=\\\"\\\"><label>first name</label> <input type=\\\"text\\\" ng-model=\\\"ref.firstName\\\"></md-input-container><md-input-container flex=\\\"\\\"><label>last name</label> <input type=\\\"text\\\" ng-model=\\\"ref.lastName\\\"></md-input-container></div>\");\n$templateCache.put(\"app/bulk/components/copy-editor/copy-editor.html\",\"<ng-form name=\\\"copyForm\\\" layout=\\\"column\\\" flex=\\\"\\\"><md-input-container><label for=\\\"title\\\">Title</label> <input type=\\\"text\\\" name=\\\"title\\\" id=\\\"title\\\" ng-model=\\\"copy.title\\\"></md-input-container><div layout=\\\"row\\\"><md-input-container><label for=\\\"type\\\">Type</label><md-select name=\\\"type\\\" id=\\\"type\\\" ng-model=\\\"copy.type\\\" required=\\\"\\\" ng-change=\\\"vm.setProperties(copy.type, copyUrl)\\\"><md-option ng-repeat=\\\"handler in vm.refHandlers\\\" value=\\\"{{handler.id}}\\\">{{handler.display}}</md-option></md-select></md-input-container><md-input-container flex=\\\"\\\"><label for=\\\"url\\\">URL</label> <input type=\\\"url\\\" name=\\\"url\\\" id=\\\"url\\\" ng-model=\\\"copyUrl\\\" ng-change=\\\"vm.setProperties(copy.type, copyUrl)\\\"></md-input-container></div><md-input-container><label for=\\\"rights\\\">Description of Rights</label> <input type=\\\"text\\\" name=\\\"rights\\\" id=\\\"rights\\\" ng-model=\\\"copy.rights\\\"></md-input-container><h3>Summary</h3><summary-editor ng-model=\\\"copy.summary\\\" flex=\\\"\\\"></summary-editor></ng-form>\");\n$templateCache.put(\"app/bulk/components/date-editor/date-editor.html\",\"<div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>date</label> <input type=\\\"text\\\" ng-model=\\\"date.description\\\"></md-input-container><md-input-container flex=\\\"\\\"><label>ISO-8601 date</label> <input type=\\\"datetime\\\" ng-model=\\\"date.calendar\\\"></md-input-container></div>\");\n$templateCache.put(\"app/bulk/components/edition-editor/edition-editor.html\",\"<div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>edition name</label> <input type=\\\"text\\\" ng-model=\\\"edition.editionName\\\" required=\\\"\\\"></md-input-container></div><section class=\\\"publication\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Publication Information</h2></div></md-toolbar><publication-info-editor ng-model=\\\"edition.publicationInfo\\\" flex=\\\"\\\"></publication-info-editor></section><section class=\\\"titles\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Titles</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"edition.titles.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in edition.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"edition.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"edition.authors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in edition.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"edition.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"edition.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in edition.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"edition.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"summary\\\"><h2>Summary</h2><summary-editor ng-model=\\\"edition.summary\\\" flex=\\\"\\\"></summary-editor></section><section class=\\\"volumes\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Volumes</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.createVolume()\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><md-whiteframe class=\\\"volume\\\" layout=\\\"column\\\" layout-margin=\\\"\\\" ng-repeat=\\\"volume in vm.volumes\\\" ng-class=\\\"{\\'md-whiteframe-2dp\\': !volume.focused, \\'md-whiteframe-8dp\\': volume.focused}\\\"><h3 layout=\\\"row\\\"><div flex=\\\"\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" ng-click=\\\"volume.focused = !volume.focused\\\"><md-icon>{{ edition.focused ? \\'expand_less\\' : \\'expand_more\\'}}</md-icon><span>Volume {{volume.model.volumeNumber}}</span> <span flex=\\\"\\\"></span></div><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.deleteVolume($index)\\\"><md-icon>delete</md-icon></md-button></h3><div slide-toggle=\\\"volume.focused\\\"><volume-editor ng-model=\\\"volume.model\\\" flex=\\\"\\\"></volume-editor></div></md-whiteframe></section><section class=\\\"copies\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"edition.copies.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"copy\\\" layout=\\\"column\\\" ng-repeat=\\\"copy in edition.copies\\\"><div layout=\\\"row\\\"><copy-editor ng-model=\\\"copy\\\" flex=\\\"\\\"></copy-editor><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"edition.copies.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></div></div></section>\");\n$templateCache.put(\"app/bulk/components/publication-info-editor/publication-info-editor.html\",\"<div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>publisher</label> <input type=\\\"text\\\" ng-model=\\\"pubInfo.publisher\\\"></md-input-container><md-input-container flex=\\\"\\\"><label>location</label> <input type=\\\"text\\\" ng-model=\\\"pubInfo.place\\\"></md-input-container><date-editor ng-model=\\\"pubInfo.date\\\" flex=\\\"\\\"></date-editor></div>\");\n$templateCache.put(\"app/bulk/components/summary-editor/summary-editor.html\",\"<div ckeditor=\\\"\\\" ng-model=\\\"summary\\\"></div>\");\n$templateCache.put(\"app/bulk/components/title-editor/title-editor.html\",\"<div layout=\\\"row\\\"><md-input-container><label>type</label><md-select ng-model=\\\"title.type\\\" required=\\\"\\\"><md-option value=\\\"bibliographic\\\">bibliographic</md-option><md-option value=\\\"canonical\\\">canonical</md-option><md-option value=\\\"short\\\">short</md-option></md-select></md-input-container><md-input-container flex=\\\"\\\"><label>title</label> <input type=\\\"text\\\" ng-model=\\\"title.title\\\" required=\\\"\\\"><div ng-switch=\\\"title.type\\\"><small ng-switch-when=\\\"bibliographic\\\">the full title as published on the work</small> <small ng-switch-when=\\\"canonical\\\">title by which the work is commonly known in the academic realm</small> <small ng-switch-when=\\\"short\\\">shortened title coloquially used by the public</small></div></md-input-container><md-input-container flex=\\\"\\\"><label>subtitle</label> <input type=\\\"text\\\" ng-model=\\\"title.subtitle\\\"></md-input-container></div>\");\n$templateCache.put(\"app/bulk/components/volume-editor/volume-editor.html\",\"<div layout=\\\"row\\\"><md-input-container flex=\\\"\\\"><label>volume number</label> <input type=\\\"text\\\" ng-model=\\\"volume.volumeNumber\\\" required=\\\"\\\"></md-input-container></div><section class=\\\"publication\\\" layout=\\\"column\\\"><h2>Publication Information</h2><publication-info-editor ng-model=\\\"volume.publicationInfo\\\"></publication-info-editor></section><section class=\\\"titles\\\" layout=\\\"column\\\"><h2 layout=\\\"row\\\"><span flex=\\\"\\\">Titles</span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"volume.titles.push({})\\\"><md-icon>add</md-icon></md-button></h2><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in volume.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"volume.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><h2 layout=\\\"row\\\"><span flex=\\\"\\\">Authors</span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"volume.authors.push({})\\\"><md-icon>add</md-icon></md-button></h2><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in volume.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"volume.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"volume.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in volume.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"volume.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"summary\\\"><h2>Summary</h2><summary-editor ng-model=\\\"volume.summary\\\" flex=\\\"\\\"></summary-editor></section><section class=\\\"copies\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"volume.copies.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"copy\\\" layout=\\\"column\\\" ng-repeat=\\\"copy in volume.copies\\\"><div layout=\\\"row\\\"><copy-editor ng-model=\\\"copy\\\" flex=\\\"\\\"></copy-editor><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"volume.copies.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></div></div></section>\");\n$templateCache.put(\"app/bulk/components/work-editor/work-editor-item.html\",\"<div layout=\\\"row\\\" layout-align=\\\"center center\\\" ng-if=\\\"!vm.loaded\\\"><md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular></div><div ng-if=\\\"vm.loaded\\\"><work-editor ng-model=\\\"vm.work\\\"></work-editor></div>\");\n$templateCache.put(\"app/bulk/components/work-editor/work-editor.html\",\"<section class=\\\"titles\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Titles</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"work.titles.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"title\\\" layout=\\\"row\\\" ng-repeat=\\\"title in work.titles\\\"><title-editor ng-model=\\\"title\\\" flex=\\\"\\\"></title-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"work.titles.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"work.authors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in work.authors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"work.authors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"authors other-authors\\\" layout=\\\"column\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Other Authors</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"work.otherAuthors.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"author other-author\\\" layout=\\\"row\\\" ng-repeat=\\\"author in work.otherAuthors\\\"><author-ref-editor ng-model=\\\"author\\\" flex=\\\"\\\"></author-ref-editor><md-input-container><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"work.otherAuthors.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=\\\"summary\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Summary</h2></div></md-toolbar><summary-editor ng-model=\\\"work.summary\\\" flex=\\\"\\\"></summary-editor></section><section class=\\\"editions\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Editions</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.createEdition()\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><md-whiteframe class=\\\"edition\\\" layout=\\\"column\\\" layout-margin=\\\"\\\" ng-repeat=\\\"edition in vm.editions\\\" ng-class=\\\"{ \\'md-whiteframe-2dp\\': !edition.focused, \\'md-whiteframe-8dp\\': edition.focused }\\\"><h3 layout=\\\"row\\\"><div flex=\\\"\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" ng-click=\\\"edition.focused = !edition.focused\\\"><md-icon>{{ edition.focused ? \\'expand_less\\' : \\'expand_more\\'}}</md-icon><span>{{edition.model.editionName}}</span> <span flex=\\\"\\\"></span></div><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"vm.deleteEdition($index)\\\"><md-icon>delete</md-icon></md-button></h3><div slide-toggle=\\\"edition.focused\\\"><edition-editor ng-model=\\\"edition.model\\\" flex=\\\"\\\"></edition-editor></div></md-whiteframe></section><section class=\\\"copies\\\"><md-toolbar class=\\\"md-hue-3\\\"><div class=\\\"md-toolbar-tools\\\"><h2>Digital Copies</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"work.copies.push({})\\\"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=\\\"copy\\\" layout=\\\"column\\\" ng-repeat=\\\"copy in work.copies\\\"><div layout=\\\"row\\\"><copy-editor ng-model=\\\"copy\\\" flex=\\\"\\\"></copy-editor><md-button class=\\\"md-icon-button md-warn\\\" ng-click=\\\"work.copies.splice($index, 1)\\\"><md-icon>delete</md-icon></md-button></div></div></section>\");}]);"],"sourceRoot":"/source/"}