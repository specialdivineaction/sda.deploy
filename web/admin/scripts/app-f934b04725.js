!function(){"use strict";angular.module("sdaAdmin",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ckeditor","ngMaterial","trcCore","trcBiblio","trcTasks","trcBio","trcReln","trcRefs","trcArticles","zotero"])}(),function(){"use strict";function t(t,e){function o(t){i.results=e.search(t,{type:i.type})}function n(){o("")}var i=this;i.search=o,n()}t.$inject=["$log","articlesRepo"],angular.module("sdaAdmin").component("articleTypeSearch",{templateUrl:"app/admin/editors/articles/components/article-type-search/article-type-search.html",bindings:{type:"@"},controller:t})}(),function(){"use strict";function t(){function t(){}t()}angular.module("sdaAdmin").component("articleAuthorEditor",{templateUrl:"app/admin/editors/articles/components/article-author-editor/article-author-editor.html",controller:t,bindings:{author:"="}})}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/title-editor/title-editor.html",scope:{title:"=ngModel"}};return t}angular.module("sdaAdmin").directive("titleEditor",t)}(),function(){"use strict";function t(t){function o(o){var n={targetEvent:o,templateUrl:"app/work/components/reln-edit-dialog/reln-edit-dialog.html",controller:e,controllerAs:"vm"};return t.show(n)}return{show:o}}function e(t,e,o,n){function i(){m.types=a()}function a(){var t=n.getTypes(),e=[],o=t.$promise.then(function(){return angular.forEach(t,function(t){e.push({id:t.identifier,label:t.title,directed:t.isDirected,reverse:!1}),t.isDirected&&e.push({id:t.identifier,label:t.reverseTitle,directed:t.isDirected,reverse:!0})}),e});return Object.defineProperty(e,"$promise",{value:o}),e}function r(t){var e=o.search(t);return e.$promise.then(function(){return e.items})}function l(t){if(m.anchors=[],t){var e=s(t.label),i=t.ref.token;m.selectedAnchor=n.createAnchor(e,i),m.anchors.push(m.selectedAnchor);var a=o.getWork(t.id);a.$promise.then(function(){a.editions.forEach(function(t){var o=e+". "+t.editionName;m.anchors.push(n.createAnchor(o,i,{editionId:[t.id]})),t.volumes.forEach(function(e){var a=o+". Volume "+e.volumeNumber;m.anchors.push(n.createAnchor(a,i,{editionId:[t.id],volumeId:[e.id]}))})})})}}function d(){e.hide({typeId:m.selectedType.id,directed:m.selectedType.directed,reverse:m.selectedType.reverse,target:m.selectedAnchor,description:m.description})}function c(){e.cancel()}var s=t("stripTags"),m=this;m.description=null,m.types=null,m.selectedType=null,m.searchText=null,m.selectedWork=null,m.anchors=null,m.selectedAnchor=null,m.search=r,m.selectWork=l,m.close=d,m.cancel=c,i()}t.$inject=["$mdDialog"],e.$inject=["$filter","$mdDialog","worksRepo","relnRepo"],angular.module("sdaAdmin").factory("relnEditDialog",t)}(),function(){"use strict";function t(t,o,n,i,a,r,l,d){function c(t,n){var i=n.anchors[0],r=null,l={};switch(i.ref.type){case e.WORK:r="editor.work",l.workId=i.ref.id,i.properties.editionId&&(r="editor.edition",l.editionId=i.properties.editionId),i.properties.editionId&&i.properties.volumeId&&(r="editor.volume",l.volumeId=i.properties.volumeId);break;case e.PERSON:r="editor.person",l.id=i.ref.id;break;case e.ARTICLE:r="article.edit",l.id=i.ref.id}r?o.go(r,l):a.error("I don't know how to follow that link.")}function s(t){var e=l.createRelationship(),o=d.show(t);o.then(function(t){e.typeId=t.typeId,e.description=t.description,t.directed?t.reverse?(e.targets.push(v.anchor),e.related.push(t.target)):(e.related.push(v.anchor),e.targets.push(t.target)):(e.related.push(v.anchor),e.related.push(t.target));var o=l.save(e);o.then(function(){a.success("Saved."),n(p,1e3)},function(){a.error("Unable to save relationship")})})}function m(t,e){var o=i.confirm().targetEvent(t).title("Confirm Deletion").textContent("Are you sure you want to delete this relationship?").ok("Yes").cancel("No"),r=i.show(o);r.then(function(){var t=l["delete"](e.id);t.then(function(){a.success("Relationship deleted."),n(p,1e3)},function(){a.error("Unable to delete relationship")})})}function u(){t.$watch("$ctrl.anchor",function(t){t&&p()})}function p(){v.loading=!0;var t=l.search(v.anchor.ref,v.anchor.properties),e=t.$promise.then(function(){return v.typeGroups=l.normalizeRelationships(t,v.anchor.ref),v.typeGroups.$promise});return e["catch"](function(){a.error("Unable to load relationship data from the server")}).then(function(){v.loading=!1}),e}var v=this;v.typeGroups=null,v.openRelationship=c,v.addRelationship=s,v.deleteRelationship=m,u()}t.$inject=["$scope","$state","$timeout","$mdDialog","sdaToast","_","relnRepo","relnEditDialog"],angular.module("sdaAdmin").component("relationships",{templateUrl:"app/work/components/relationships/relationships.html",bindings:{anchor:"<"},controller:t});var e={WORK:"trc.entries.bibliographic",PERSON:"trc.entries.biographical",ARTICLE:"trc.entries.article"}}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/publication-info-editor/publication-info-editor.html",scope:{pubInfo:"=ngModel"}};return t}angular.module("sdaAdmin").directive("publicationInfoEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/copy-editor/copy-editor.html",scope:{copy:"=ngModel"},controller:e,controllerAs:"vm"};return t}function e(t){function e(){a(n()),a(i()),a(o())}function a(t){l.refHandlers[t.id]=t}function r(e,o){l.refHandlers[e]&&(t.copy.properties=l.refHandlers[e](o)),t.copyForm.url.$setValidity(e,null!=t.copy.properties)}var l=this;l.refHandlers={},l.setProperties=r,e()}function o(){function t(t){var o=a(t);if(!o)return null;var n,i;if("/stream/"===o.path.substr(0,8)){n=o.path.substr(8);var r=o.fragment.match(/page\/([^\/]+)/);r&&r.length>=2&&(i=r[1])}return e(t,n,i)}function e(t,e,o){return e?{src:t,id:e,seq:o}:null}return t.id="internetarchive",t.display="Internet Archive",t}function n(){function t(t){var e=a(t);if(!e)return null;var o,n;switch(e.hostname){case"babel.hathitrust.org":o=e.query.id,n=e.query.seq;break;case"hdl.handle.net":if(o=e.path.substr(e.path.lastIndexOf("/")+1),!e.query.urlappend)break;var i=r(e.query.urlappend);if(!i)break;n=i.seq}return o?{src:t,htid:o,seq:n}:null}return t.id="hathitrust",t.display="HathiTrust",t}function i(){function t(t){var e=a(t);if(!e)return null;switch(e.hostname){case"books.google.com":var o=e.query.id,n=e.query.printsec,i=e.query.pg}return o?{src:t,id:o,section:n,page:i}:null}return t.id="googlebooks",t.display="Google Books",t}function a(t){if(!t)return null;var e=document.createElement("a");return e.href=t,{toString:function(){return t},protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,path:e.pathname,query:r(e.search),fragment:e.hash}}function r(t,e){if(!t||!angular.isString(t))return{};if("?"===t[0]&&(t=t.substr(1)),!e){var o=(t.indexOf(";")>=0?1:0)+(t.indexOf("&")>=0?2:0);e=1===o?";":"&"}var n={},i=t.split(e);return i.forEach(function(t){var e=t.indexOf("="),o=t,i=null;if(o){e>=0&&(o=t.substr(0,e),i=t.substr(e+1));try{o=decodeURIComponent(o),i=decodeURIComponent(i)}catch(a){return}n.hasOwnProperty(o)?angular.isArray(n[o])?n[o].push(i):n[o]=[n[o],i]:n[o]=i}}),n}e.$inject=["$scope"],angular.module("sdaAdmin").directive("copyEditor",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/work/components/copy-edit-dialog/copy-edit-dialog.html",locals:{copy:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(i.copy)}function n(){t.cancel()}var i=this;i.copy=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","copy"],angular.module("sdaAdmin").factory("copyEditDialog",t)}(),function(){"use strict";function t(){function t(t,e){function o(){if(t.ref.authorId){var o=e.get(t.ref.authorId);o.$promise.then(function(){a.linkAuthorSearchText=o.name.label})}}function n(e){t.ref.authorId=e.id}function i(t){var o=e.search(t);return o.$promise.then(function(){return o.items})}var a=this;a.linkAuthorSearchText="",a.authorRoles=["author","editor","translator","other"],a.setLinkedAuthor=n,a.getResults=i,o()}t.$inject=["$scope","peopleRepo"];var e={restrict:"E",templateUrl:"app/work/components/author-ref-editor/author-ref-editor.html",scope:{ref:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdmin").directive("authorRefEditor",t)}(),function(){"use strict";function t(t){function e(e){e.id||t.error('missing required attribute "id"')}function o(t,e){function o(){t.id&&(n.work=e.getWork(t.id),n.work.$promise.then(function(){n.loaded=!0}))}var n=this;n.loaded=!1,o()}o.$inject=["$scope","worksRepo"];var n={restrict:"E",templateUrl:"app/task/components/work-editor-item/work-editor-item.html",link:e,scope:{id:"=id"},controller:o,controllerAs:"vm"};return n}t.$inject=["$log"],angular.module("sdaAdmin").directive("workEditorItem",t)}(),function(){"use strict";function t(){function t(t,e,o){function n(){t.work.editions.forEach(function(t){r.editions.push({model:t,focused:!1})})}function i(){var n=e.createEdition();n.titles=o.cloneDeep(t.work.titles),n.authors=o.cloneDeep(t.work.authors),t.work.editions.push(n),r.editions.push({model:n,focused:!0})}function a(e){r.editions.splice(e,1),t.work.editions.splice(e,1)}var r=this;r.editions=[],r.createEdition=i,r.deleteEdition=a,n()}t.$inject=["$scope","worksRepo","_"];var e={restrict:"E",templateUrl:"app/work/components/work-editor/work-editor.html",scope:{work:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdmin").directive("workEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/volume-editor/volume-editor.html",scope:{volume:"=ngModel"}};return t}angular.module("sdaAdmin").directive("volumeEditor",t)}(),function(){"use strict";function t(){function t(t,e,o){function n(){t.edition.volumes.forEach(function(t){r.volumes.push({model:t,focused:!1})})}function i(){var n=e.createVolume();n.titles=o.cloneDeep(t.edition.titles),n.authors=o.cloneDeep(t.edition.authors),n.publicationInfo=o.cloneDeep(t.edition.publicationInfo),t.edition.volumes.push(n),r.volumes.push({model:n,focused:!0})}function a(e){r.volumes.splice(e,1),t.edition.volumes.splice(e,1)}var r=this;r.volumes=[],r.createVolume=i,r.deleteVolume=a,n()}t.$inject=["$scope","worksRepo","_"];var e={restrict:"E",templateUrl:"app/work/components/edition-editor/edition-editor.html",scope:{edition:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdmin").directive("editionEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/person/components/name-editor/name-editor.html",scope:{name:"=ngModel"}};return t}angular.module("sdaAdmin").directive("nameEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/person/components/event-editor/event-editor.html",scope:{event:"=ngModel"}};return t}angular.module("sdaAdmin").directive("eventEditor",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/person/components/event-edit-dialog/event-edit-dialog.html",locals:{event:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(i.event)}function n(){t.cancel()}var i=this;i.event=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","event"],angular.module("sdaAdmin").factory("eventEditDialog",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/admin/editors/articles/thematic-overview.html",scope:{scopeId:"@",scheme:"@"},controller:e,controllerAs:"vm"};return t}function e(t,e,o,n,i,a,r,l){function d(){e.info("Loading article editor",r),v=l.getScopedRepo(t.scopeId),p.overviews=v.get(t.scheme)}function c(t,o){function n(t){var e=v.nodes.link(o,t.reference);return e.$promise}function l(t){i.go("article.edit",{id:t.article.id})}e.info("creating article");var d="thematic",c=o.label,s=r.create(d,c),m=r.save(s),u=m.then(n);a.all({article:m,ref:u}).then(l)}function s(t,o){e.info("Removing entry",o)}function m(t,n){function i(t){e.info("Creating category "+t),v.nodes.create(n,t)}e.info(n);var a=o.prompt({title:"Enter Category Label",placeholder:"new category",ok:"Create",cancel:"Cancel",targetEvent:t});o.show(a).then(i)}function u(t,i,a){e.info(i);var r="Delete category '"+i.label+"'",l="<p>This will delete the selected category, "+i.label+", its sub-categories and all associated articles.<em>This action cannot be undone.</em></p><p>Permanently delete this category?</p>",d=o.confirm({title:r,htmlContent:l,ok:"Delete",cancel:"Cancel",targetEvent:t});o.show(d).then(function(){v.nodes.remove(i,!0,a).then(function(){return n.success("category deleted")},function(){return n.error("unable to delete category")})})}var p=this,v=null;p.handleAssociateEntry=c,p.handleRemoveEntry=s,p.handleCreateChild=m,p.handleDeleteNode=u,d()}e.$inject=["$scope","$log","$mdDialog","sdaToast","$state","$q","articlesRepo","categorizationService"],angular.module("sdaAdmin").directive("treeCategorizationEditor",t)}(),function(){"use strict";function t(t,e,o,n){function i(){}function a(i,a){var r=e.prompt().targetEvent(i).title("Create Article").textContent("Please provide a title for the new article.").placeholder("title").ok("Create").cancel("Cancel"),l=e.show(r);l.then(function(e){var i=n.create(a,e),r=n.save(i);return r.then(function(e){t.go("article.edit",{id:e.id}),o.success("Article created successfully")},function(){o.error("Unable to create article")}),r})}var r=this;r.createArticle=a,i()}t.$inject=["$state","$mdDialog","sdaToast","articlesRepo"],angular.module("sdaAdmin").controller("ArticleEditorSectionController",t)}(),function(){"use strict";function t(t,o,n,i,a,r,l,d){function c(){o.info("Loading article editor",l),f.article=l.get(n.id);var e=f.article.$promise;e.then(function(t){0===t.authors.length&&t.authors.push({})}),f.references=h.get();var a=f.references.$promise;t.all([e,a]).then(function(){i.$watch("vm.article.body",p),i.$watchCollection("vm.article.footnotes",u)},function(){return r.error("Failed to load data from the server")})}function s(){return t.all([l.save(f.article),h.save(f.references)]).then(function(){r.success("Saved")},function(){r.error("Unable to save article.")})}function m(t,e){var o=angular.copy(e),n=d.createRefCollection(),i=a.show(t,o,{references:n,ckeditor:f.footnoteEditor});i.then(function(){f.article.footnotes[o.id]=o;var t=d.merge(f.references,d.compact(n));angular.merge(f.references,t)})}function u(t){t&&(l.cleanReferences(f.article,f.references),f.references=h.compact(f.references))}function p(t){t&&(l.cleanFootnotes(f.article,f.article.footnotes),u(t))}var v=l.getReferencesEndpoint(n.id),h=d.getRepo(v),f=this;f.save=s,f.abstractEditor={config:angular.extend({},e,{removeButtons:["Styles","Format","Subscript","Superscript","Cut","Copy","HorizontalRule","Maximize","Source"].join(",")})},f.footnoteEditor={config:angular.extend({},e,{removeButtons:["Styles","Format","Subscript","Superscript","Cut","Copy","Footnote","HorizontalRule","Maximize","Source"].join(",")})},f.editor={config:angular.extend({},e,{removeButtons:["Styles","Subscript","Superscript","Cut","Copy","Source"].join(",")})},f.editFootnote=m,c()}t.$inject=["$q","$log","$stateParams","$scope","footnoteEditDialog","sdaToast","articlesRepo","refsRepoFactory"],angular.module("sdaAdmin").controller("ArticleEditorController",t);var e={toolbar:[{name:"styles",items:["Styles","Format"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","-","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Citation","Footnote","-","Image","Table","HorizontalRule","SpecialChar"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Scayt"]},{name:"tools",items:["Maximize"]},{name:"document",items:["Source"]}],format_tags:"p;h1;h2;h3;h4;h5;h6;pre;address",extraPlugins:"mathjax",mathJaxLib:"//cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-MML-AM_CHTML"}}(),function(){"use strict";angular.module("zotero",["ngAnimate","ngAria","ngMaterial","ngResource"])}(),function(){"use strict";function t(){var t=this;t.item={},t.types=[]}angular.module("zotero").controller("ZoteroTestController",t)}(),function(){"use strict";function t(){function t(t){t.config={toolbarGroups:[{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"editing",groups:["find","selection","spellchecker","editing"]}],removeButtons:"Subscript,Superscript,About,Cut,Copy,Maximize,Styles"}}var e={restrict:"E",templateUrl:"app/components/summary-editor/summary-editor.html",scope:{summary:"=ngModel"},link:t};return e}angular.module("sdaAdmin").directive("summaryEditor",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/components/summary-edit-dialog/summary-edit-dialog.html",locals:{summary:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(i.summary)}function n(){t.cancel()}var i=this;i.summary=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","summary"],angular.module("sdaAdmin").factory("summaryEditDialog",t)}(),function(){"use strict";function t(){return e}function e(t){return t?String(t).replace(/<[^>]+>/gm,""):""}angular.module("sdaAdmin").filter("stripTags",t)}(),function(){"use strict";function t(){function t(t,e,n){e===o&&t.slideUp(n)}function e(t,e,n){e===o&&t.hide().slideDown(n)}var o="ng-hide";return{beforeAddClass:t,removeClass:e}}angular.module("sdaAdmin").animation(".slide",t)}(),function(){"use strict";function t(t,n,i,a,r,l,d){function c(t){if(v(t))return a.info("Item has already been linked."),void h();var e=l.create(g.sourceToken,t.token);e.$promise.then(function(){var t=e.source;g.seeAlso.links.hasOwnProperty(t.type)||(g.seeAlso.links[t.type]=[]),g.seeAlso.links[t.type].push(t),h(),a.success("Link created")},function(){a.error("Unable to create link")})}function s(t,o){switch(o.type){case e.WORK:n.go("editor.work",{workId:o.id});break;case e.PERSON:n.go("editor.person",{id:o.id});break;case e.ARTICLE:n.go("article.edit",{id:o.id});break;default:a.error("I don't know how to follow that link.")}}function m(t,e){var o=i.confirm({targetEvent:t,title:"Confirm Deletion",htmlContent:"Are you sure you want to delete this link?"+e.label,ok:"Yes",cancel:"No"}),n=i.show(o);n.then(function(){var t=l["delete"](g.sourceToken,e.token);t.then(function(){a.success("Link deleted");var t=g.seeAlso.links[e.type].indexOf(e);t>=0&&g.seeAlso.links[e.type].splice(t,1)},function(){a.error("Unable to delete link")})})}function u(t){var e=d.search(t);return e.$promise.then(f,function(){a.error("Unable to load search results")})}function p(){t.$watch("$ctrl.sourceToken",function(t){t&&(g.loading=!0,g.seeAlso=l.get(t),g.seeAlso.$promise.then(function(){g.loading=!1}))})}function v(t){return g.seeAlso.links.hasOwnProperty(t.type)&&g.seeAlso.links[t.type].some(function(e){return e.token===t.token})}function h(){g.searchText=null,g.selectedItem=null}function f(t){return r.flatMap(o,function(e){return t.results[e].map(function(t){return{label:t.label||t.title,type:t.ref.type,token:t.ref.token}})})}var g=this;g.loading=!1,g.seeAlso=null,g.searchText=null,g.selectedItem=null,g.createLink=c,g.openLink=s,g.deleteLink=m,g.search=u,p()}t.$inject=["$scope","$state","$mdDialog","sdaToast","_","seeAlsoRepo","trcSearch"],angular.module("sdaAdmin").component("seeAlsoEditor",{templateUrl:"app/components/see-also-editor/see-also-editor.html",bindings:{sourceToken:"<"},controller:t});var e={WORK:"trc.entries.bibliographic",PERSON:"trc.entries.biographical",ARTICLE:"trc.entries.article"},o=["people","works","articles"]}(),function(){"use strict";function t(){function t(t){function o(e,o){var n=angular.merge({},o,{toastClass:"sda-toast-success"+(o&&o.toastClass?" "+o.toastClass:"")});return t.show(a(e,n))}function n(e,o){var n=angular.merge({},o,{toastClass:"sda-toast-info"+(o&&o.toastClass?" "+o.toastClass:"")});return t.show(a(e,n))}function i(e,o){var n=angular.merge({},o,{toastClass:"sda-toast-error"+(o&&o.toastClass?" "+o.toastClass:""),hideDelay:!1});return t.show(a(e,n))}function a(o,n){var i=angular.merge({},e.defaultOptions,n),a=t.simple().textContent(o).toastClass(i.toastClass).position(i.position).hideDelay(i.hideDelay);return(!i.hideDelay||i.action)&&a.action(i.action||"Dismiss"),a}var r={success:o,info:n,error:i};return r}t.$inject=["$mdToast"];var e={};return e.defaultOptions={position:"bottom right",hideDelay:3e3},e.$get=t,e}angular.module("sdaAdmin").provider("sdaToast",t)}(),function(){"use strict";function t(t){function e(){}function o(e){t(e).toggle()}var n=this;n.toggleSidenav=o,e()}t.$inject=["$mdSidenav"],angular.module("sdaAdmin").component("navbar",{templateUrl:"app/components/navbar/navbar.html",bindings:{title:"@",sidenavId:"@?"},controller:t})}(),function(){"use strict";function t(t){function o(o){return t(o,e)}return o}t.$inject=["moment"];var e=["YYYY","MMMM-YYYY","MMM-YYYY","MM-YYYY","M-YYYY","YYYY-MMMM","YYYY-MMM","YYYY-MM","YYYY-M","MMMM-DD-YYYY","MMM-DD-YYYY","MM-DD-YYYY","M-DD-YYYY","MMMM-D-YYYY","MMM-D-YYYY","MM-D-YYYY","M-D-YYYY","DD-MMMM-YYYY","DD-MMM-YYYY","DD-MM-YYYY","DD-M-YYYY","D-MMMM-YYYY","D-MMM-YYYY","D-MM-YYYY","D-M-YYYY","YYYY-MM-DD","YYYY-M-D"];angular.module("sdaAdmin").factory("guessDate",t)}(),function(){"use strict";function t(t){return t.isEmpty}t.$inject=["_"],angular.module("sdaAdmin").filter("empty",t)}(),function(){"use strict";function t(t){function e(e){e.calendarAutoSet=!1,e.$watch("date.description",function(o){!o||e.date.calendar&&!e.calendarAutoSet||(e.date.calendar=t(o).format("YYYY-MM-DD"),e.calendarAutoSet=!0)})}var o={restrict:"E",templateUrl:"app/components/date-editor/date-editor.html",scope:{date:"=ngModel"},link:e};return o}t.$inject=["guessDate"],angular.module("sdaAdmin").directive("dateEditor",t)}(),function(){"use strict";function t(){function t(t){function e(){var e=n.indexOf(t);e>=0&&n.splice(e,1)}return n.push(t),t(o.value),e}function e(t){o.value!==t&&(o.value=t,n.forEach(function(e){e(t)}))}var o=this,n=[];o.watch=t,o.set=e,o.value=null}angular.module("sdaAdmin").controller("DataContainerController",t)}(),function(){"use strict";function t(t){function o(o,n,i){var a=angular.merge({},i),r={templateUrl:"app/components/ckeditor-footnotes/footnote-edit-dialog.html",controller:e,controllerAs:"vm",clickOutsideToClose:!1,locals:{footnote:n,references:a.references,ckeditorConfig:a.ckeditor}};return t.show(r)}return{show:o}}function e(t,e,o,n){function i(){t.hide()}function a(){t.cancel()}var r=this;r.footnote=e,r.references=o,r.ckeditorConfig=n,r.done=i,r.cancel=a}t.$inject=["$mdBottomSheet"],e.$inject=["$mdBottomSheet","footnote","references","ckeditorConfig"],angular.module("sdaAdmin").factory("footnoteEditDialog",t)}(),function(){"use strict";function t(t,e,o,n){function i(t,i,a,r){function l(i){function r(){i.fire("afterCommandExec",{name:v,command:l})}var l=this,c=o.createFootnote();c.backlinkId=d+c.id;var u=m?n.createRefCollection():null,p=e.show(null,c,{references:u,ckeditor:t.$eval(a.ckeditor)});p.then(function(){if(s.value[c.id]=c,u&&m){var t=n.merge(m.value,n.compact(u));angular.merge(m.value,t)}i.insertHtml('<sup contenteditable="false" class="footnote" id="'+c.backlinkId+'" data-footnote="'+c.id+'">#</sup>'),r()},function(){r()})}var d=a.ckeditorFootnotesAnchorIdPrefix||"fn_anchor_",c=r[0],s=r[1],m=r[2],u=c.instance,p=a.ckeditorFootnotes;s.set(t.$eval(p)),t.$watch(p,function(t){s.value!==t&&s.set(t)});var v="insertFootnote";u.addCommand(v,{async:!0,allowedContent:"sup[id,data-footnote,contenteditable](footnote)",requiredContent:"sup[id,data-footnote,contenteditable](footnote)",exec:l}),u.ui.addButton("Footnote",{label:"Insert Footnote",command:v,toolbar:"insert"})}var a={restrict:"A",require:["ckeditor","ckeditorFootnotes","?ckeditorBibliography"],link:i,controller:"DataContainerController"};return a}t.$inject=["$document","footnoteEditDialog","articlesRepo","refsRepoFactory"],angular.module("sdaAdmin").directive("ckeditorFootnotes",t)}(),function(){"use strict";function t(t,e,o,n,i){function a(t,e,a,r){function l(t){function e(){t.fire("afterCommandExec",{name:u,command:a})}var a=this,r=o.createRefCollection(),l=o.createCitation();r.citations[l.id]=l,i.show(r).then(function(){var i=o.merge(c.value,o.compact(r));angular.merge(c.value,i),n.render("modern-language-association",r).then(function(o){var n=o.citations[l.id];t.insertHtml('<cite id="'+l.id+'" contenteditable="false">'+n+"</cite>"),e()})},function(){e()})}var d=r[0],c=r[1],s=d.instance,m=a.ckeditorBibliography;c.set(t.$eval(m)),t.$watch(m,function(t){c.value!==t&&c.set(t)});var u="insertCitation";s.addCommand(u,{async:!0,allowedContent:"cite[id,contenteditable]",requiredContent:"cite[id,contenteditable]",exec:l}),s.ui.addButton("Citation",{label:"Insert Citation",command:u,toolbar:"insert"})}var r={restrict:"A",require:["ckeditor","ckeditorBibliography"],link:a,controller:"DataContainerController"};return r}t.$inject=["$mdDialog","$document","refsRepoFactory","refsRenderer","citationEditDialog"],angular.module("sdaAdmin").directive("ckeditorBibliography",t)}(),function(){"use strict";function t(t,a,r,l,d,c,s,m,u){function p(){var t=d.getUserAccount(o,n),e=a.when(t.getGroup(i));if(A.groupLibraryP=e.then(function(e){return a.when(t.getLibrary(e))}),!A.citation)throw new Error("no citation provided");A.references.citations[A.citation.id]?A.references.citations[A.citation.id]!==A.citation&&(r.warn("provided citation does not match citation in reference collection. Overriding..."),A.references.citations[A.citation.id]=A.citation):(r.warn("Citation is not a member of the provided reference collection. Adding to collection..."),A.references.citations[A.citation.id]=A.citation)}function v(t){return A.groupLibraryP.then(function(e){var o=a.when(e.searchItems(t)),n=o.then(function(t){return a.all(t.map(h).map(g))});return n["catch"](function(){s.error("Unable to load search results.")}),n})}function h(t){var e="zotero/"+t.library.id+"/"+t.id,o=m.createBiblioItem(e);return o.type=t.type,o.creators=t.properties.creators.map(f),o.meta=angular.extend(c.pick(t.meta,["creatorSummary","parsedDate"]),c.pick(t.properties,["key","dateAdded","dateModified"])),o.fields=c.omit(t.properties,["creators","itemType","key","dateAdded","dateModified","version","collections","tags","relations"]),o}function f(t){return{role:t.creatorType,firstName:t.firstName,lastName:t.lastName,name:t.name}}function g(t){var e=u.renderBiblioItem("modern-language-association",t);return e.then(function(e){return{id:t.id,label:e,item:t}})}function b(t){A.citation.items.indexOf(t)<0&&A.citation.items.push(t);var e=A.references.bibliography[t.id];$(t,e).then(function(e){t.label=e}),w()}function y(t){t?(A.activeCitationItem.id=t.id,A.references.bibliography[t.id]=t.item):A.activeCitationItem.id=null}function k(t){var e=A.references.bibliography[t.id];return g(e).then(function(e){A.activeCitationItem=t,A.selectedBiblioItem=e,A.searchText=E(A.selectedBiblioItem.label)})}function w(){A.activeCitationItem={},A.searchText="",A.selectedBiblioItem=null}function $(t,e){var o=m.createCitation();o.items.push(t);var n=m.createRefCollection();n.citations[o.id]=o,n.bibliography[t.id]=e;var i=u.render("modern-language-association",n);return i.then(function(t){return t.citations[o.id]})}function x(){A.zoteroItem={}}function C(){A.zoteroItem=null}function I(t,e){var o=A.groupLibraryP.then(function(t){return a.when(t.saveItem(e))}),n=o.then(h),i=n.then(g);i.then(function(t){A.selectedBiblioItem=t,y(t),A.searchText=E(t.label),A.zoteroItem=null},function(){s.error("Unable to save zotero data")})}var A=this;A.selectedBiblioItem=null,A.searchText="",A.locatorTypes=e,A.activeCitationItem={},A.groupLibraryP=null,A.zoteroItem=null,A.search=v,A.addCitationItem=b,A.selectBiblioItem=y,A.edit=k,A.createZoteroItem=x,A.cancelZoteroItem=C,A.saveZoteroItem=I;var E=t("stripTags");p()}t.$inject=["$filter","$q","$log","$mdDialog","zotero","_","sdaToast","refsRepoFactory","refsRenderer"];var e=["book","chapter","column","figure","folio","issue","line","note","opus","page","paragraph","part","section","sub verbo","verse","volume"],o="2536190",n="3A4q05BNg0h0bHKJkpoCi1Oa",i="381134";angular.module("sdaAdmin").component("citationEditor",{templateUrl:"app/components/citation-edit-dialog/citation-editor.html",controller:t,bindings:{references:"=",citation:"="}})}(),function(){"use strict";function t(t,e,o){function n(n,i,a){if(i)angular.isString(i)&&(i=n.citations[i]);else{var r=e.values(n.citations);0===r.length?(i=o.createCitation(),n.citations[i.id]=i):i=r[0]}if(!i)throw new Error("Unable to find a suitable citation. Please pass one explicitly or check that the reference collection is not malformed");var l={targetEvent:a,templateUrl:"app/components/citation-edit-dialog/citation-edit-dialog.html",controller:"CitationEditDialogController",controllerAs:"vm",clickOutsideToClose:!1,locals:{references:n,citation:i}};return t.show(l).then(function(){return n})}return{show:n}}t.$inject=["$mdDialog","_","refsRepoFactory"],angular.module("sdaAdmin").factory("citationEditDialog",t)}(),function(){"use strict";function t(t,e,o){function n(){t.hide()}function i(){t.cancel()}var a=this;a.references=e,a.citation=o,a.done=n,a.cancel=i}t.$inject=["$mdDialog","references","citation"],angular.module("sdaAdmin").controller("CitationEditDialogController",t)}(),function(){"use strict";function t(t,e,o){function n(){o.getItemTypes().then(function(t){a.types=a.typeFilter&&a.typeFilter.length>0?t.filter(function(t){return a.typeFilter.indexOf(t.id)>=0}):t},function(){e.error("Unable to load item type info")}),a.item.creators||(a.item.creators=[{}]),0===a.item.creators.length&&a.item.creators.push({})}function i(o){if(!o)return a.item.itemType=null,a.fields=[],void(a.roles=[]);a.item.itemType=o.id;var n=o.getFields();n.then(function(t){a.fields=t});var i=o.getCreatorRoles();i.then(function(t){a.roles=t}),t.all([n,i])["catch"](function(){e.error('Unable to load data for the "'+o.label+'" type.')})}var a=this;a.itemTypeSearchText="",a.itemType=null,a.types=[],a.fields=[],a.roles=[],a.selectType=i,n()}t.$inject=["$q","sdaToast","zotero"],angular.module("zotero").component("zoteroEditor",{templateUrl:"app/zotero/editor.html",controller:t,bindings:{item:"=",typeFilter:"<types"}})}(),function(){"use strict";function t(){}angular.module("zotero").component("zoteroCreatorField",{templateUrl:"app/zotero/creator-field.html",controller:t,bindings:{creator:"=",roles:"<"}})}(),function(){"use strict";function t(){return new zotero(zotero.getDefaultBaseUrl(),angular.toJson)}angular.module("zotero").factory("zotero",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d,c,s,m,u){function p(){var t=e.workId;E.work=o.getWork(t);var a=E.work.$promise;a.then(function(){E.bcTitle=o.getTitle(E.work.titles),E.title=o.getTitle(E.work.titles,["canonical","bibliographic","short"]),E.anchor=n.createAnchor(o.getWorkLabel(E.work),E.work.ref.token)});var r=o.getReferencesEndpoint(t);A=i.getRepo(r),E.references=A.get();var c=E.references.$promise;d.all([a,c])["catch"](function(){l.error("Unable to load bibliographic entry data from server.")}).then(function(){E.loading=!1})}function v(t){var e=c.show(t,angular.copy(E.work));e.then(function(t){angular.extend(E.work,t),o.saveWork(E.work).then(C,I)})}function h(t){var e=u.show(t,angular.copy(E.work.summary));e.then(function(t){E.work.summary=t,o.saveWork(E.work).then(C,I)})}function f(t){m.show(E.references,null,t).then(function(){A.save(E.references).then(C,I)})}function g(e){var n=r.prompt().targetEvent(e).title("Create Edition").textContent("Please provide a name for the new edition.").placeholder("edition name").ok("Create").cancel("Cancel"),i=r.show(n),a=i.then(function(t){
var e=o.createEdition();return e.editionName=t,e.titles=angular.copy(E.work.titles),e.authors=angular.copy(E.work.authors),E.work.editions.push(e),o.saveEdition(E.work.id,e)});a.then(C,I),a.then(function(e){t.go("editor.edition",{workId:E.work.id,editionId:e.id})})}function b(t,e){var n=r.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this edition?").ok("Yes").cancel("No");r.show(n).then(function(){var e=E.work.editions.indexOf(t);e>=0&&(E.work.editions.splice(e,1),o.saveWork(E.work).then(C,I))})}function y(t){var e={};k(e,t).then(function(){E.work.copies.push(e)})}function k(t,e){var n=s.show(e,angular.copy(t));return n.then(function(e){angular.extend(t,e),o.saveWork(E.work).then(C,I)}),n}function w(t,e){var n=r.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");r.show(n).then(function(){var e=E.work.copies.indexOf(t);e>=0&&(E.work.copies.splice(e,1),o.saveWork(E.work).then(C,I))})}function $(e,n){function i(){return t.go("editor"),l.success(c+" has been deleted.")}function a(){return l.error("Unable to delete "+c)}var d=o.getTitle(E.work.titles),c=d?'"'+d.title+(d.subtitle?": "+d.subtitle:"")+'"':"this work",s=r.confirm({targetEvent:e,title:"Confirm Deletion",textContent:"Are you sure you want to delete "+c+"?",ok:"Yes",cancel:"No"}),m=r.show(s);return m.then(function(){return o["delete"](n).then(i,a)})}function x(e,n){var i=o.getTitle(n.titles),d=r.prompt({targetEvent:e,title:"Create Book Review",textContent:"You are creating a new article attached to this work. Please enter a title for this article.",initialValue:i?i.title+(i.subtitle?": "+i.subtitle:""):"[untitled work]",ok:"Create",cancel:"Cancel"}),c=r.show(d);c.then(function(e){var o=a.createLinked("book-review",e,n.ref.token);o.then(function(e){t.go("article.edit",{id:e.id})},function(){return l.error("Unable to create article.")})})}function C(){return l.success("Saved")}function I(){return l.error("Unable to save data.")}var A=null,E=this;E.loading=!0,E.work=null,E.title=null,E.relationships=null,E.editBibInfo=v,E.editSummary=h,E.editBibliography=f,E.addEdition=g,E.deleteEdition=b,E.addCopy=y,E.editCopy=k,E.deleteCopy=w,E.createBookReview=x,E.deleteWork=$,p()}t.$inject=["$state","$stateParams","worksRepo","relnRepo","refsRepoFactory","articlesRepo","$mdDialog","sdaToast","$q","workEditDialog","copyEditDialog","citationEditDialog","summaryEditDialog"],angular.module("sdaAdmin").controller("ShowWorkController",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/work/work-edit-dialog.html",locals:{work:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(d.work)}function n(){t.cancel()}function i(t){var e={};d.work[t].push(e)}function a(t,e){var o=d.work[t].indexOf(e);o>=0&&d.work[t].splice(o,1)}function r(){var t={};d.work.titles.push(t)}function l(t){var e=d.work.titles.indexOf(t);e>=0&&d.work.titles.splice(e,1)}var d=this;d.work=e,d.close=o,d.cancel=n,d.addAuthor=i,d.deleteAuthor=a,d.addTitle=r,d.deleteTitle=l}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","work"],angular.module("sdaAdmin").factory("workEditDialog",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d){function c(){var n=t.workId;y.work=e.getWork(n);var r=y.work.$promise;r.then(s(["short","canonical","bibliographic"])).then(function(t){y.workTitle=t});var l=t.editionId;y.edition=e.getEdition(n,l);var d=y.edition.$promise,c=t.volumeId;y.volume=e.getVolume(n,l,c);var m=y.volume.$promise;m.then(s(["canonical","bibliographic","short"])).then(function(t){y.title=t}),a.all([r,d,m]).then(function(){y.anchor=o.createAnchor(e.getVolumeLabel(y.volume,y.edition.editionName),y.work.ref.token,{editionId:[y.edition.id],volumeId:[y.volume.id]})},function(){i.error("Unable to load bibliographic entry data from server.")}).then(function(){y.loading=!1})}function s(t){return function(o){return e.getTitle(o.titles,t)}}function m(t){var o=r.show(t,angular.copy(y.volume));return o.then(function(t){angular.extend(y.volume,t),e.saveVolume(y.work.id,y.edition.id,y.volume).then(g,b)}),o}function u(t){var o=d.show(t,angular.copy(y.volume.summary));o.then(function(t){y.volume.summary=t,e.saveVolume(y.work.id,y.edition.id,y.volume).then(g,b)})}function p(t){var e={};v(e,t).then(function(){y.volume.copies.push(e)})}function v(t,o){var n=l.show(o,angular.copy(t));return n.then(function(o){angular.extend(t,o),e.saveVolume(y.work.id,y.edition.id,y.volume).then(g,b)}),n}function h(t,o){var i=n.confirm().targetEvent(o).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");n.show(i).then(function(){var o=y.volume.copies.indexOf(t);o>=0&&(y.volume.copies.splice(o,1),e.saveVolume(y.work.id,y.edition.id,y.volume).then(g,b))})}function f(t){var o=angular.copy(t);o.id=null;var n=e.getEdition(y.work.id,y.edition.id);n.$promise.then(function(){return n.copies.push(o),e.saveEdition(y.work.id,n)}).then(g,b)}function g(){return i.success("Saved")}function b(){return i.error("Unable to save data.")}var y=this;y.loading=!0,y.work=null,y.workTitle=null,y.edition=null,y.volume=null,y.title=null,y.editBibInfo=m,y.editSummary=u,y.addCopy=p,y.editCopy=v,y.deleteCopy=h,y.copyToEdition=f,c()}t.$inject=["$stateParams","worksRepo","relnRepo","$mdDialog","sdaToast","$q","volumeEditDialog","copyEditDialog","summaryEditDialog"],angular.module("sdaAdmin").controller("ShowVolumeController",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/work/volume-edit-dialog.html",locals:{volume:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(d.volume)}function n(){t.cancel()}function i(t){var e={};d.volume[t].push(e)}function a(t,e){var o=d.volume[t].indexOf(e);o>=0&&d.volume[t].splice(o,1)}function r(){var t={};d.volume.titles.push(t)}function l(t){var e=d.volume.titles.indexOf(t);e>=0&&d.volume.titles.splice(e,1)}var d=this;d.volume=e,d.close=o,d.cancel=n,d.addAuthor=i,d.deleteAuthor=a,d.addTitle=r,d.deleteTitle=l}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","volume"],angular.module("sdaAdmin").factory("volumeEditDialog",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d,c){function s(){var t=e.workId;$.work=o.getWork(t);var i=$.work.$promise;i.then(m(["short","canonical","bibliographic"])).then(function(t){$.workTitle=t});var l=e.editionId;$.edition=o.getEdition(t,l);var d=$.edition.$promise;d.then(m(["canonical","bibliographic","short"])).then(function(t){$.title=t}),r.all([i,d]).then(function(){$.anchor=n.createAnchor(o.getEditionLabel($.edition),$.work.ref.token,{editionId:[$.edition.id]})},function(){a.error("Unable to load bibliographic entry data from server.")}).then(function(){$.loading=!1})}function m(t){return function(e){return o.getTitle(e.titles,t)}}function u(t){var e=l.show(t,angular.copy($.edition));return e.then(function(t){angular.extend($.edition,t),o.saveEdition($.work.id,$.edition).then(k,w)}),e}function p(t){var e=c.show(t,angular.copy($.edition.summary));e.then(function(t){$.edition.summary=t,o.saveEdition($.work.id,$.edition).then(k,w)})}function v(e){var n=i.prompt().targetEvent(e).title("Create Volume").textContent("Please provide a number for the new volume.").placeholder("volume number").ok("Create").cancel("Cancel"),a=i.show(n),r=a.then(function(t){var e=o.createVolume();return e.volumeNumber=t,e.titles=angular.copy($.edition.titles),e.authors=angular.copy($.edition.authors),e.publicationInfo=angular.copy($.edition.publicationInfo),$.edition.volumes.push(e),o.saveVolume($.work.id,$.edition.id,e)});r.then(k,w),r.then(function(e){t.go("editor.volume",{workId:$.work.id,editionId:$.edition.id,volumeId:e.id})})}function h(t,e){var n=i.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this volume?").ok("Yes").cancel("No");i.show(n).then(function(){var e=$.edition.volumes.indexOf(t);e>=0&&($.edition.volumes.splice(e,1),o.saveEdition($.work.id,$.edition).then(k,w))})}function f(t){var e={};g(e,t).then(function(){$.edition.copies.push(e)})}function g(t,e){var n=d.show(e,angular.copy(t));return n.then(function(e){angular.extend(t,e),o.saveEdition($.work.id,$.edition).then(k,w)}),n}function b(t,e){var n=i.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");i.show(n).then(function(){var e=$.edition.copies.indexOf(t);e>=0&&($.edition.copies.splice(e,1),o.saveEdition($.work.id,$.edition).then(k,w))})}function y(t){var e=angular.copy(t);e.id=null;var n=o.getWork($.work.id);n.$promise.then(function(){return n.copies.push(e),o.saveWork(n)}).then(k,w)}function k(){return a.success("Saved")}function w(){return a.error("Unable to save data.")}var $=this;$.loading=!0,$.work=null,$.workTitle=null,$.edition=null,$.title=null,$.editBibInfo=u,$.editSummary=p,$.addVolume=v,$.deleteVolume=h,$.addCopy=f,$.editCopy=g,$.deleteCopy=b,$.copyToWork=y,s()}t.$inject=["$state","$stateParams","worksRepo","relnRepo","$mdDialog","sdaToast","$q","editionEditDialog","copyEditDialog","summaryEditDialog"],angular.module("sdaAdmin").controller("ShowEditionController",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/work/edition-edit-dialog.html",locals:{edition:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e){function o(){t.hide(d.edition)}function n(){t.cancel()}function i(t){var e={};d.edition[t].push(e)}function a(t,e){var o=d.edition[t].indexOf(e);o>=0&&d.edition[t].splice(o,1)}function r(){var t={};d.edition.titles.push(t)}function l(t){var e=d.edition.titles.indexOf(t);e>=0&&d.edition.titles.splice(e,1)}var d=this;d.edition=e,d.close=o,d.cancel=n,d.addAuthor=i,d.deleteAuthor=a,d.addTitle=r,d.deleteTitle=l}t.$inject=["$mdDialog"],e.$inject=["$mdDialog","edition"],angular.module("sdaAdmin").factory("editionEditDialog",t)}(),function(){"use strict";angular.module("trcTasks",["ngResource"])}(),function(){"use strict";function t(){function t(t){function o(){return l.query()}function n(t){return l.get({taskId:t})}function i(t){return d.get({taskId:t})}function a(t,e,o){return o=o||{},c.get({taskId:t,stage:e,start:o.start,max:o.max})}function r(t,e,o){if(e.stage!==o.sourceStage)throw new Error("Transition ("+o.sourceStage+" -> "+o.targetStage+") is not valid for item currently in stage "+e.stage);var n=c.save({taskId:t,itemId:e.itemId},{stage:o.targetStage,comments:null});return n.$promise.then(function(t){angular.extend(e,t)}),n}var l=t(e.url+"/:taskId",{taskId:"@id"}),d=t(e.url+"/:taskId/workflow"),c=t(e.url+"/:taskId/items/:itemId",{itemId:"@itemId"}),s={};return s.getTask=n,s.getWorkflow=i,s.all=o,s.getItems=a,s.transition=r,s}t.$inject=["$resource"];var e={};return e.url="/api/tasks",e.$get=t,e}angular.module("trcTasks").provider("tasksRepo",t)}(),function(){"use strict";function t(t,e,o){function n(){a.loading=!0,a.tasks=o.all();var t=a.tasks.$promise;t["catch"](function(){e.error("Unable to load tasks from server")}).then(function(){a.loading=!1})}function i(){t("left").toggle()}var a=this;a.loading=!1,a.openMenu=i,n()}t.$inject=["$mdSidenav","sdaToast","tasksRepo"],angular.module("sdaAdmin").controller("TaskController",t)}(),function(){"use strict";function t(t,e,o,n,i,a){function r(){u.taskId=e.taskId,u.task=n.getTask(u.taskId);var t=u.task.$promise;t["catch"](m("Unable to load task data from the server.")),u.workflow=n.getWorkflow(u.taskId);var o=u.workflow.$promise;o["catch"](m("Unable to load workflow data from the server."));var i=o.then(c);i["catch"](m("Unable to load worklist data from the server.")),i.then(function(){u.loading=!1})}function l(e,o){o.stopImmediatePropagation(),t.go("editor.work",{workId:e.entityId})}function d(t,e,o){o.stopImmediatePropagation();var r=n.transition(u.taskId,t,e);r.$promise.then(function(){var t=i.all([s(e.sourceStage),s(e.targetStage)]);return t.then(function(){a.success('"'+e.label+'" applied successfully')},function(){a.error("Unable to refresh worklist after transition")}),t},function(){a.error('Unable to "'+e.label+'" item')})}function c(t){var e=[];return angular.forEach(t.stages,function(t){var o=s(t.id);e.push(o)}),i.all(e)}function s(t){var e=n.getItems(u.taskId,t,{max:9999});return e.$promise.then(function(){u.worklists[t]=e.items.length>0?e:null}),e.$promise}function m(t){function e(){return a.error(t)}return e}var u=this;u.stageOrder=["pinned","inprogress","review","pending","deferred"],u.loading=!0,u.worklists={},u.task=null,u.focusItem=l,u.transition=d,r()}t.$inject=["$state","$stateParams","$mdSidenav","tasksRepo","$q","sdaToast"],angular.module("sdaAdmin").controller("ShowTaskController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d,c,s,m,u){function p(){var o=a.id,i=t.getReferencesEndpoint(o);$=e.getRepo(i),x.person=t.get(o),x.references=$.get(),x.references.$promise.then(function(){var t=d.values(x.references.citations);0===t.length?(x.citation=$.createCitation(),x.references.citations[x.citation.id]=x.citation):(t.length>1&&n.warn("reference collection contains "+t.length+" citations"),x.citation=t[0])})}function v(e){var o=c.show(e,angular.copy(x.person));o.then(function(e){angular.extend(x.person,e);var o=t.save(x.person);return o.then(k,w),o})}function h(e,o){var n=s.show(o,angular.copy(x.person[e]));n.then(function(o){angular.extend(x.person[e],o);var n=t.save(x.person);return n.then(k,w),n})}function f(e){var o=u.show(e,angular.copy(x.person.summary));o.then(function(e){x.person.summary=e;var o=t.save(x.person);return o.then(k,w),o})}function g(t){m.show(x.references,null,t).then(function(){var t=$.save(x.references);return t.then(k,w),t})}function b(e,o){function n(){return i.go("editor"),l.success(d+" has been deleted.")}function a(){return l.error("Unable to delete "+d)}var d=o.name.label?'"'+o.name.label+'"':"this person",c=r.confirm({targetEvent:e,title:"Confirm Deletion",textContent:"Are you sure you want to delete "+d+"?",ok:"Yes",cancel:"No"}),s=r.show(c);return s.then(function(){return t["delete"](o).then(n,a)})}function y(t,e){var n=r.prompt({targetEvent:t,title:"Create Biography",textContent:"You are creating a new article attached to this person. Please enter a title for this article.",initialValue:e.name.label,ok:"Create",cancel:"Cancel"}),a=r.show(n);a.then(function(t){var n=o.createLinked("biography",t,e.ref.token);n.then(function(t){i.go("article.edit",{id:t.id})},function(){return l.error("Unable to create article.")})})}function k(){return l.success("Saved")}function w(){return l.error("Unable to save data.")}var $=null,x=this;x.loading=!0,x.person=null,x.editBioInfo=v,x.editEvent=h,x.editSummary=f,x.editBibliography=g,x.createBiography=y,x.deletePerson=b,p()}t.$inject=["peopleRepo","refsRepoFactory","articlesRepo","$log","$state","$stateParams","$mdDialog","sdaToast","_","personEditDialog","eventEditDialog","citationEditDialog","summaryEditDialog"],angular.module("sdaAdmin").controller("ShowPersonController",t)}(),function(){"use strict";function t(t){function o(o,n){var i={targetEvent:o,templateUrl:"app/person/person-edit-dialog.html",locals:{person:n},controller:e,controllerAs:"vm"};return t.show(i)}return{show:o}}function e(t,e,o){function n(){e.hide(l.person)}function i(){e.cancel()}function a(){var e=t.createName();l.person.altNames.push(e)}function r(t){var e=l.person.altNames.indexOf(t);e>=0&&l.person.altNames.splice(e,1)}var l=this;l.person=o,l.nameRoles=[{value:"pseudonym",label:"Pseudonym"},{value:"maiden",label:"Maiden Name"},{value:"designation",label:"Honorary Designation"},{value:"nickname",label:"Nickname"},{value:"phonetic",label:"Phonetic Name"}],l.close=n,l.cancel=i,l.addName=a,l.deleteName=r}t.$inject=["$mdDialog"],e.$inject=["peopleRepo","$mdDialog","person"],angular.module("sdaAdmin").factory("personEditDialog",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d){function c(){n.q&&(f.searchQuery=n.q,m(f.searchQuery))}function s(){i("left").toggle()}function m(o){f.loading=!0,f.peopleResults=e.search(o),f.worksResults=t.search(o),r.all([f.peopleResults.$promise,f.worksResults.$promise]).then(function(){f.loading=!1},function(){d.error("Unable to load data from the server")})}function u(t){var n={targetEvent:t,templateUrl:"app/person/person-edit-dialog.html",locals:{person:e.create()},controller:"PersonEditDialogController",controllerAs:"vm"},i=l.show(n);i.then(function(t){var n=e.save(t);return n.then(v,h),n.then(function(t){o.go("editor.person",{id:t.id})}),n})}function p(e){var n={targetEvent:e,templateUrl:"app/work/work-edit-dialog.html",locals:{work:t.createWork()},controller:"WorkEditDialogController",controllerAs:"vm"},i=l.show(n);i.then(function(e){var n=t.saveWork(e);return n.then(v,h),n.then(function(t){o.go("editor.work",{workId:t.id})}),n})}function v(){return d.success("Saved.")}function h(){return d.error("Unable to save.")}var f=this;f.loading=!1,f.searchQuery="",f.openMenu=s,f.createPerson=u,f.createWork=p,f.search=a.debounce(m,300),c()}t.$inject=["worksRepo","peopleRepo","$state","$stateParams","$mdSidenav","_","$q","$mdDialog","sdaToast"],angular.module("sdaAdmin").controller("MainController",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("sdaAdmin").run(t)}(),function(){"use strict";function t(t,e){t.state("editor",{url:"/?q",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}).state("editor.person",{url:"people/:id",views:{main:{templateUrl:"app/person/person.html",controller:"ShowPersonController",controllerAs:"vm"}}}).state("editor.work",{url:"works/:workId",views:{main:{templateUrl:"app/work/work.html",controller:"ShowWorkController",controllerAs:"vm"}}}).state("editor.edition",{url:"works/:workId/editions/:editionId",views:{main:{templateUrl:"app/work/edition.html",controller:"ShowEditionController",controllerAs:"vm"}}}).state("editor.volume",{url:"works/:workId/editions/:editionId/volumes/:volumeId",views:{main:{templateUrl:"app/work/volume.html",controller:"ShowVolumeController",controllerAs:"vm"}}}).state("article",{url:"/articles",templateUrl:"app/admin/editors/articles/article.html",controller:"ArticleEditorSectionController",controllerAs:"vm"}).state("article.edit",{url:"/:id",templateUrl:"app/admin/editors/articles/article-editor.html",controller:"ArticleEditorController",controllerAs:"vm"}).state("task",{url:"/task",templateUrl:"app/task/task.html",controller:"TaskController",controllerAs:"vm"}).state("task.show",{url:"/:taskId",templateUrl:"app/task/show.html",controller:"ShowTaskController",controllerAs:"vm"}).state("vwise",{url:"/vwise/:workspaceId",templateUrl:"app/vwise/workspace.html",controller:"WorkspaceController",controllerAs:"vm"}).state("zotero",{url:"/zotero",templateUrl:"app/zotero/test/test.html",controller:"ZoteroTestController",controllerAs:"vm"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaAdmin").config(t)}(),function(){"use strict";angular.module("sdaAdmin").constant("_",_).constant("moment",moment)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,d,c){t.debugEnabled(!0);var s="/api/catalog";o.url=s+"/v1/tasks",n.url=s+"/works",i.url=s+"/people",a.url=s+"/entries/articles",r.url=s+"/relationships",l.url=s+"/categorizations",d.url=s+"/seealso",c.url=s+"/search",e.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),e.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),e.theme("default").primaryPalette("darkBrown").accentPalette("copper")}t.$inject=["$logProvider","$mdThemingProvider","tasksRepoProvider","worksRepoProvider","peopleRepoProvider","articlesRepoProvider","relnRepoProvider","categorizationServiceProvider","seeAlsoRepoProvider","trcSearchProvider"],angular.module("sdaAdmin").config(t)}(),function(){"use strict";function t(t,n){function i(e,o){function n(t){return t.get("/assets/csl/locales/locales-"+e+".xml").then(function(t){return t.data})}n.$inject=["$http"],t.addLocale(o,n)}function a(e,o){function n(t){return t.get("/assets/csl/styles/"+e+".csl").then(function(t){return t.data})}n.$inject=["$http"],t.addStyle(o,n)}n.typemapUrl="/assets/typemap/zotero-csl.json",angular.forEach(e,i),angular.forEach(o,a)}t.$inject=["citeprocProvider","refsRendererProvider"],angular.module("sdaAdmin").config(t);var e={"en-US":"en-US"},o={mla:"modern-language-association",chicago:"chicago-author-date"}}(),angular.module("sdaAdmin").run(["$templateCache",function(t){t.put("app/main/main.html",'<md-content flex layout=column> <navbar title="Editorial Tools" sidenav-id=left></navbar> <md-content flex layout=row> <md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" ui-view=sidebar layout=column> <form layout=row flex=none> <md-input-container flex> <label for=searchQuery>Search</label> <md-icon>search</md-icon> <input type=search name=searchQuery id=searchQuery ng-model=vm.searchQuery ng-change=vm.search(vm.searchQuery) required> </md-input-container> </form> <md-content flex> <div ng-if=vm.loading layout=row layout-align=center> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-if="!vm.loading &amp;&amp; vm.peopleResults &amp;&amp; vm.peopleResults.items.length > 0"> <md-subheader>People</md-subheader> <md-list> <md-list-item ng-repeat="person in vm.peopleResults.items" ui-sref="editor.person({id: person.id})"> <div class=md-list-item-text ng-bind-html=person.label></div> </md-list-item> </md-list> </div> <div ng-if="!vm.loading &amp;&amp; vm.worksResults &amp;&amp; vm.worksResults.items.length > 0"> <md-subheader>Works</md-subheader> <md-list> <md-list-item ng-repeat="work in vm.worksResults.items" ui-sref="editor.work({workId: work.id})"> <div class=md-list-item-text ng-bind-html=work.label></div> </md-list-item> </md-list> </div> </md-content> <md-fab-speed-dial md-direction=up class="md-scale md-fab-bottom-right md-fab-straddle"> <md-fab-trigger> <md-button aria-label=New... class=md-fab> <md-icon>add</md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="New Person" class="md-fab md-mini" ng-click=vm.createPerson($event)> <md-tooltip md-direction=left>New Person</md-tooltip> <md-icon>person</md-icon> </md-button> <md-button aria-label="New Work" class="md-fab md-mini" ng-click=vm.createWork($event)> <md-tooltip md-direction=left>New Book</md-tooltip> <md-icon>book</md-icon> </md-button> </md-fab-actions> </md-fab-speed-dial> </md-sidenav> <md-content flex layout=column ui-view=main></md-content> </md-content> </md-content>'),t.put("app/person/person-edit-dialog.html",'<md-dialog flex=80> <md-toolbar> <div class=md-toolbar-tools> <h3>Biographic Information Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <section class=name layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Canonical Name</h2> </div> </md-toolbar> <div class=name> <name-editor ng-model=vm.person.name flex></name-editor> </div> </section> <section class=alt-names layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Alternate Names</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addName()> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=name layout=row ng-repeat="name in vm.person.altNames"> <md-input-container> <label>role</label> <md-select ng-model=name.role> <md-option ng-repeat="role in vm.nameRoles" value={{role.value}}> {{role.label}} </md-option> </md-select> </md-input-container> <name-editor ng-model=name flex></name-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click=vm.deleteName(name)> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/person/person.html",'<div layout=row layout-padding flex=noshrink> <div flex=60> <section class="content names"> <div class=toolbar layout=row layout-align="start center"> <h1 class=content-heading>{{vm.person.name.label}}</h1> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBioInfo($event)> <md-icon>edit</md-icon> </md-button> </div> <div ng-if="vm.person.altNames && vm.person.altNames.length > 0"> <p>Other names:</p> <ul> <li ng-repeat="name in vm.person.altNames">{{name.label}}</li> </ul> </div> </section> <section class="content summary"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Summary</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editSummary($event)> <md-icon>edit</md-icon> </md-button> </div> <p ng-if=vm.person.summary ng-bind-html=vm.person.summary></p> </section> <section class="content bibliography"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Bibliography</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBibliography($event)> <md-icon>edit</md-icon> </md-button> </div> <bibliography refs=vm.references style-id=mla></bibliography> </section> </div> <div flex=40> <section class="content birth"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Birth</h2> <span flex></span> <md-button class=md-icon-button ng-click="vm.editEvent(\'birth\', $event)"> <md-icon>edit</md-icon> </md-button> </div> <p> <span class=description ng-if=vm.person.birth.date.description>{{vm.person.birth.date.description}}</span> <span class=location ng-if=vm.person.birth.location>in {{vm.person.birth.location}}</span> </p> <p ng-bind-html=vm.person.birth.description ng-if=vm.person.birth.description></p> </section> <section class="content death"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Death</h2> <span flex></span> <md-button class=md-icon-button ng-click="vm.editEvent(\'death\', $event)"> <md-icon>edit</md-icon> </md-button> </div> <p> <span class=description ng-if=vm.person.death.date.description>{{vm.person.death.date.description}}</span> <span class=location ng-if=vm.person.death.location>in {{vm.person.death.location}}</span> </p> <p ng-bind-html=vm.person.death.description ng-if=vm.person.death.description></p> </section> <section class="content see-also"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>See Also</h2> </div> <see-also-editor source-token=vm.person.ref.token></see-also-editor> </section> </div> </div> <div layout=row layout-align=end layout-margin> <div> <md-button aria-label="Create Biography" class=md-icon-button ng-click="vm.createBiography($event, vm.person)"> <md-icon>assignment_ind</md-icon> <md-tooltip md-direction=top>Create Biography</md-tooltip> </md-button> <md-button aria-label="Delete this person" class="md-warn md-icon-button" ng-click="vm.deletePerson($event, vm.person)"> <md-icon>delete</md-icon> <md-tooltip md-direction=top>Delete</md-tooltip> </md-button> </div> </div>'),t.put("app/task/show.html",'<md-content flex layout=column> <div class=task-info> <span class=label>{{vm.task.label}}</span> <span class=description>{{vm.task.description}}</span> </div> <md-input-container> <label>Search</label> <md-icon>search</md-icon> <input type=search ng-model=filter ng-change=vm.search(filter)> </md-input-container> <md-content flex> <div layout=row layout-align="center center" ng-if=vm.loading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-repeat="stageId in vm.stageOrder" ng-if=vm.worklists[stageId]> <md-subheader>{{vm.workflow.stages[stageId].label}}</md-subheader> <md-list> <md-list-item ng-repeat="item in vm.worklists[stageId].items | filter : filter | limitTo : 20" ng-mouseover="item.hover = true" ng-mouseout="item.hover = false" ng-click="vm.focusItem(item, $event)"> <span ng-bind-html=item.label></span> <span flex></span> <md-button class=md-exclude ng-repeat="transition in vm.workflow.stages[stageId].transitions" ng-click="vm.transition(item, transition, $event)" ng-show=item.hover> <span>{{transition.label}}</span> </md-button> </md-list-item> </md-list> </div> </md-content> </md-content>'),t.put("app/task/task.html",'<md-content flex layout=column> <navbar title="Task Management Dashboard" sidenav-id=left></navbar> <md-content flex layout=row> <md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <div ng-if=vm.loading flex layout=row layout-align="center center"> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <md-list ng-if=!vm.loading> <md-list-item ng-repeat="task in vm.tasks" ui-sref="task.show({ taskId: task.id })"> {{ task.label }} </md-list-item> </md-list> </md-sidenav> <md-content flex layout=column ui-view> <div layout=row layout-padding layout-margin layout-align="center center"> <div class=md-headline>Please select a task from the sidebar.</div> </div> </md-content> </md-content> </md-content>'),t.put("app/work/edition-edit-dialog.html",'<md-dialog flex=80> <md-toolbar> <div class=md-toolbar-tools> <h3>Bibliographic Information Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <div layout=row> <md-input-container flex> <label>edition name</label> <input type=text ng-model=vm.edition.editionName required> </md-input-container> </div> <section class=publication layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Publication Information</h2> </div> </md-toolbar> <publication-info-editor ng-model=vm.edition.publicationInfo flex></publication-info-editor> </section> <section class=titles layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Titles</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addTitle($event)> <md-icon>add</md-icon>  </md-button></div> </md-toolbar> <div class=title layout=row ng-repeat="title in vm.edition.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Authors</h2> <span flex></span> <md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=author layout=row ng-repeat="author in vm.edition.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/work/edition.html",'<nav layout=row layout-padding> <ol class=breadcrumbs flex> <li><a ui-sref="editor.work({workId: vm.work.id})">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \': \' : \'\'}}{{vm.workTitle.subtitle}}</a></li> <li>{{vm.edition.editionName}}</li> </ol> </nav> <div layout=row layout-padding> <div layout=column flex=60> <section class="content citation"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Bibliographic Information</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBibInfo($event)> <md-icon>edit</md-icon> </md-button> </div> <p> <span class=authors ng-if="vm.edition.authors && vm.edition.authors.length > 0"> <span class=author ng-repeat="author in vm.edition.authors"> <span ng-if=author.authorId> <a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span> <span ng-if=!author.authorId> {{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span> </span> </span> <span class=title ng-if=vm.title> {{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}. </span> <span class=publication ng-if=vm.edition.publicationInfo> <span ng-if=vm.edition.publicationInfo.place> <span class=place>{{vm.edition.publicationInfo.place}}</span>: </span> <span ng-if=vm.edition.publicationInfo.publisher> <span class=publisher>{{vm.edition.publicationInfo.publisher}}</span>, </span> <span ng-if=vm.edition.publicationInfo.date> <time class=date datetime={{vm.edition.publicationInfo.date.calendar}}>{{vm.edition.publicationInfo.date.description}}</time>. </span> </span> </p> </section> <section class="content summary"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Summary</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editSummary($event)> <md-icon>edit</md-icon> </md-button> </div> <p ng-if=vm.edition.summary ng-bind-html=vm.edition.summary></p> </section> <section class="content volumes"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Volumes</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addVolume($event)> <md-icon>add</md-icon> </md-button> </div> <md-list> <md-list-item ng-repeat="volume in vm.edition.volumes" ui-sref="editor.volume({workId: vm.work.id, editionId: vm.edition.id, volumeId: volume.id})"> <span>Volume {{volume.volumeNumber}}</span> <md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteVolume(volume, $event)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </section> </div> <div layout=column flex=40> <relationships class="content references" anchor=vm.anchor></relationships> <section class="content copies"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addCopy($event)> <md-icon>add</md-icon> </md-button> </div> <md-list> <md-list-item ng-repeat="copy in vm.edition.copies" ng-click="vm.editCopy(copy, $event)"> <span>{{copy.title}}</span> <md-button class="md-secondary md-icon-button" ng-click=vm.copyToWork(copy) aria-label="copy to parent work"> <md-icon>file_upload</md-icon> <md-tooltip>Copy to Work</md-tooltip> </md-button> <md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </section> </div> </div>'),
t.put("app/work/volume-edit-dialog.html",'<md-dialog flex=80> <md-toolbar> <div class=md-toolbar-tools> <h3>Bibliographic Information Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <div layout=row> <md-input-container flex> <label>volume number</label> <input type=text ng-model=vm.volume.volumeNumber required> </md-input-container> </div> <section class=publication layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Publication Information</h2> </div> </md-toolbar> <publication-info-editor ng-model=vm.volume.publicationInfo></publication-info-editor> </section> <section class=titles layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Titles</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addTitle($event)> <md-icon>add</md-icon>  </md-button></div> </md-toolbar> <div class=title layout=row ng-repeat="title in vm.volume.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Authors</h2> <span flex></span> <md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=author layout=row ng-repeat="author in vm.volume.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/work/volume.html",'<nav layout=row layout-padding> <ol class=breadcrumbs flex> <li><a ui-sref="editor.work({workId: vm.work.id})">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \': \' : \'\'}}{{vm.workTitle.subtitle}}</a></li> <li><a ui-sref="editor.edition({workId: vm.work.id, editionId: vm.edition.id})">{{vm.edition.editionName}}</a></li> <li>Volume {{vm.volume.volumeNumber}}</li> </ol> </nav> <div layout=row layout-padding> <div layout=column flex=60> <section class="content citation"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Bibliographic Information</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBibInfo($event)> <md-icon>edit</md-icon> </md-button> </div> <p> <span class=authors ng-if="vm.volume.authors && vm.volume.authors.length > 0"> <span class=author ng-repeat="author in vm.volume.authors"> <span ng-if=author.authorId> <a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span> <span ng-if=!author.authorId> {{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span> </span> </span> <span class=title ng-if=vm.title> {{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}. </span> <span class=publication ng-if=vm.volume.publicationInfo> <span ng-if=vm.volume.publicationInfo.place> <span class=place>{{vm.volume.publicationInfo.place}}</span>: </span> <span ng-if=vm.volume.publicationInfo.publisher> <span class=publisher>{{vm.volume.publicationInfo.publisher}}</span>, </span> <span ng-if=vm.volume.publicationInfo.date> <time class=date datetime={{vm.volume.publicationInfo.date.calendar}}>{{vm.volume.publicationInfo.date.description}}</time>. </span> </span> </p> </section> <section class="content summary"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Summary</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editSummary($event)> <md-icon>edit</md-icon> </md-button> </div> <p ng-if=vm.volume.summary ng-bind-html=vm.volume.summary></p> </section> </div> <div layout=column flex=40> <relationships class="content references" anchor=vm.anchor></relationships> <section class="content copies"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addCopy($event)> <md-icon>add</md-icon> </md-button> </div> <md-list> <md-list-item ng-repeat="copy in vm.volume.copies" ng-click="vm.editCopy(copy, $event)"> <span>{{copy.title}}</span> <md-button class="md-secondary md-icon-button" ng-click=vm.copyToEdition(copy) aria-label="copy to parent edition"> <md-icon>file_upload</md-icon> <md-tooltip>Copy to Edition</md-tooltip> </md-button> <md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </section> </div> </div>'),t.put("app/work/work-edit-dialog.html",'<md-dialog flex=80> <md-toolbar> <div class=md-toolbar-tools> <h3>Bibliographic Information Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <section class=titles layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Titles</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addTitle($event)> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=title layout=row ng-repeat="title in vm.work.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Authors</h2> <span flex></span> <md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=author layout=row ng-repeat="author in vm.work.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/work/work.html",'<nav layout=row layout-padding> <ol class=breadcrumbs flex> <li>{{vm.bcTitle.title}}{{vm.bcTitle && vm.bcTitle.subtitle ? \': \' : \'\'}}{{vm.bcTitle.subtitle}}</li> </ol> </nav> <div layout=row layout-padding flex=noshrink> <div layout=column flex=60> <section class="content citation"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Bibliographic Information</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBibInfo($event)> <md-icon>edit</md-icon> </md-button> </div> <p> <span class=authors ng-if="vm.work.authors && vm.work.authors.length > 0"> <span class=author ng-repeat="author in vm.work.authors"> <span ng-if=author.authorId> <a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span> <span ng-if=!author.authorId> {{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span> </span> </span> <span class=title ng-if=vm.title> {{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}. </span> </p> </section> <section class="content summary"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Summary</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editSummary($event)> <md-icon>edit</md-icon> </md-button> </div> <p ng-if=vm.work.summary ng-bind-html=vm.work.summary></p> </section> <section class="content editions"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Editions</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addEdition($event)> <md-icon>add</md-icon> </md-button> </div> <md-list> <md-list-item ng-repeat="edition in vm.work.editions" ui-sref="editor.edition({workId: vm.work.id, editionId: edition.id})"> <span>{{edition.editionName}}</span> <md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteEdition(edition, $event)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </section> <section class="content bibliography"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Bibliography</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.editBibliography($event)> <md-icon>edit</md-icon> </md-button> </div> <bibliography refs=vm.references style-id=mla></bibliography> </section> </div> <div layout=column flex=40> <relationships class="content references" anchor=vm.anchor></relationships> <section class="content copies"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.addCopy($event)> <md-icon>add</md-icon> </md-button> </div> <md-list> <md-list-item ng-repeat="copy in vm.work.copies" ng-click="vm.editCopy(copy, $event)"> <span>{{copy.title}}</span> <md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </section> <section class="content see-also"> <div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>See Also</h2> </div> <see-also-editor source-token=vm.work.ref.token></see-also-editor> </section> </div> </div> <div layout=row layout-align=end layout-margin> <div> <md-button class=md-icon-button aria-label="Create Book Review" ng-click="vm.createBookReview($event, vm.work)"> <md-icon>assignment</md-icon> <md-tooltip md-direction=top>Create Book Review</md-tooltip> </md-button> <md-button aria-label="Delete this work" class="md-warn md-icon-button" ng-click="vm.deleteWork($event, vm.work)"> <md-icon>delete</md-icon> <md-tooltip md-direction=top>Delete</md-tooltip> </md-button> </div> </div>'),t.put("app/zotero/creator-field.html",'<div layout=row layout-margin> <md-input-container> <label>Role</label> <md-select ng-model=$ctrl.creator.creatorType ng-disabled="!$ctrl.roles || $ctrl.roles.length == 0"> <md-option ng-value=role.role ng-repeat="role in $ctrl.roles">{{role.label}}</md-option> </md-select> </md-input-container> <md-input-container ng-if=verbatim flex> <label>Name</label> <input type=text ng-model=$ctrl.creator.name> </md-input-container> <md-input-container ng-if=!verbatim flex> <label>First Name</label> <input type=text ng-model=$ctrl.creator.firstName> </md-input-container> <md-input-container ng-if=!verbatim flex> <label>Last Name</label> <input type=text ng-model=$ctrl.creator.lastName> </md-input-container> <div layout=column layout-align="center center"> <md-button ng-show=verbatim ng-click="verbatim = false" class=md-icon-button aria-label="First/Last Names"> <md-icon>people</md-icon> <md-tooltip>First/Last Names</md-tooltip> </md-button> <md-button ng-hide=verbatim ng-click="verbatim = true" class=md-icon-button aria-label="Single Name"> <md-icon>domain</md-icon> <md-tooltip>Single Name</md-tooltip> </md-button> </div> </div>'),t.put("app/zotero/editor.html",'<div layout=column flex> <div layout=row layout-margin> <md-autocomplete md-search-text=$ctrl.itemTypeSearchText md-items="type in $ctrl.types | filter: {label: $ctrl.itemTypeSearchText}" md-item-text=type.label md-selected-item=$ctrl.itemType md-selected-item-change=$ctrl.selectType($ctrl.itemType) md-min-length=0 md-floating-label="Item Type" required> <md-item-template> <span md-highlight-text=$ctrl.itemTypeSearchText md-highlight-flags=^i>{{type.label}}</span> </md-item-template> </md-autocomplete> </div> <div layout=row ng-repeat="creator in $ctrl.item.creators" layout-align="start center"> <zotero-creator-field creator=creator roles=$ctrl.roles flex></zotero-creator-field> <md-button ng-click="$ctrl.item.creators.splice($index+1, 0, {})" class=md-icon-button aria-label="New Creator"> <md-icon>add</md-icon> <md-tooltip>New</md-tooltip> </md-button> <md-button ng-disabled="$ctrl.item.creators.length <= 1" ng-click="$ctrl.item.creators.splice($index, 1)" class="md-icon-button md-warn" aria-label="Delete Creator"> <md-icon>remove</md-icon> <md-tooltip>Delete</md-tooltip> </md-button> </div> <div layout=row layout-margin ng-repeat="field in $ctrl.fields"> <md-input-container flex> <label>{{field.label}}</label> <input type=text ng-model=$ctrl.item[field.id]> </md-input-container> </div> <div ng-if=!$ctrl.itemType layout-margin> <p>Please select an item type first.</p> </div> </div>'),t.put("app/components/citation-edit-dialog/citation-edit-dialog.html",'<md-dialog aria-label="Edit Citation" flex=50 layout=column> <form ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <h2>Edit Citation</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon aria-label=Cancel>close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class=md-dialog-content> <citation-editor references=vm.references citation=vm.citation></citation-editor> </div> </md-dialog-content> <md-dialog-actions layout=row> <md-button ng-click=vm.cancel()> Cancel </md-button> <md-button ng-click=vm.done()> Save </md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/components/citation-edit-dialog/citation-editor.html",'<div class=citation-editor-layout layout=column flex> <div class=citation-editor-container ng-hide=$ctrl.zoteroItem layout=column flex> <div layout=row layout-wrap> <div layout=row layout-align="start center" layout-margin class=md-whiteframe-2dp ng-repeat="item in $ctrl.citation.items"> <span ng-bind-html=item.label></span> <md-button class=md-icon-button aria-label=Edit ng-click=$ctrl.edit(item)> <md-icon>edit</md-icon> <md-tooltip>Edit Item</md-tooltip> </md-button> <md-button class="md-icon-button md-warn" aria-label=Remove ng-click="$ctrl.citation.items.splice($index, 1)"> <md-icon>remove</md-icon> <md-tooltip>Remove Item</md-tooltip> </md-button> </div> </div> <div layout=column> <md-autocomplete md-autoselect md-floating-label="Referenced Item" md-selected-item=$ctrl.selectedBiblioItem md-selected-item-change=$ctrl.selectBiblioItem($ctrl.selectedBiblioItem) md-search-text=$ctrl.searchText md-items="item in $ctrl.search($ctrl.searchText)" md-item-text="item.label | stripTags" md-delay=200 md-require-match required> <md-item-template> <span ng-bind-html=item.label></span> </md-item-template> <md-not-found> No matches found. <md-button ng-click=$ctrl.createZoteroItem($event)>Create</md-button> </md-not-found> </md-autocomplete> <div layout=row> <md-input-container> <label>Locator Type</label> <md-select ng-model=$ctrl.activeCitationItem.locatorType> <md-option></md-option> <md-option ng-repeat="type in $ctrl.locatorTypes" ng-value=type>{{type}}</md-option> </md-select> </md-input-container> <md-input-container flex> <label>Locator</label> <input type=text ng-model=$ctrl.activeCitationItem.locator> </md-input-container> </div> <md-checkbox ng-model=$ctrl.activeCitationItem.suppressAuthor> Suppress Author Name in In-Text Citation </md-checkbox> </div> <div layout=row layout-align=end> <md-button class=md-raised ng-click=$ctrl.addCitationItem($ctrl.activeCitationItem)> Save Item </md-button> </div> </div> <div class=zotero-item-editor-container ng-if=$ctrl.zoteroItem layout=row flex> <div layout=column> <md-button class=md-icon-button ng-click=$ctrl.cancelZoteroItem($event)> <md-icon>cancel</md-icon> <md-tooltip md-direction=right>Cancel New Item</md-tooltip> </md-button> <md-button class=md-icon-button ng-click="$ctrl.saveZoteroItem($event, $ctrl.zoteroItem)"> <md-icon>check_circle</md-icon> <md-tooltip md-direction=right>Save and Cite Item</md-tooltip> </md-button> </div> <zotero-editor item=$ctrl.zoteroItem flex></zotero-editor> </div> </div>'),t.put("app/components/ckeditor-footnotes/footnote-edit-dialog.html",'<md-bottom-sheet aria-label="Insert Footnote" layout=column> <md-toolbar> <div class=md-toolbar-tools> <h2>Insert Footnote</h2> <span flex></span> <md-button ng-click=vm.cancel()> Cancel </md-button> <md-button ng-click=vm.done()> Save </md-button> </div> </md-toolbar> <div ng-if=vm.references ng-model=vm.footnote.content ckeditor=vm.ckeditorConfig ckeditor-bibliography=vm.references></div> <div ng-if=!vm.references ng-model=vm.footnote.content ckeditor=vm.ckeditorConfig></div> </md-bottom-sheet>'),t.put("app/components/date-editor/date-editor.html",'<div layout=row> <md-input-container flex> <label>date</label> <input type=text ng-model=date.description> </md-input-container> <md-input-container flex> <label>calendar date</label> <input type=datetime ng-model=date.calendar ng-change="calendarAutoSet = false"> </md-input-container> </div>'),t.put("app/components/navbar/navbar.html",'<md-toolbar> <div class=md-toolbar-tools> <md-button ng-if=$ctrl.sidenavId class="md-accent md-icon-button" ng-click=$ctrl.toggleSidenav($ctrl.sidenavId) title="toggle menu" hide-gt-sm> <md-icon>menu</md-icon> </md-button> <img class=logo src=assets/images/sda-logo-light.png> <h2> <span>{{$ctrl.title}}</span><!-- make this change based on page --> </h2> <span flex></span> <md-button ui-sref=editor>People and Works</md-button> <md-button ui-sref=article>Article</md-button> <md-button ui-sref=task>Tasks</md-button> </div> </md-toolbar>'),t.put("app/components/see-also-editor/see-also-editor.html",'<div layout=row layout-align="center center" ng-if=$ctrl.loading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div layout=row layout-align="center center" layout-margin ng-if="!$ctrl.loading && !$ctrl.seeAlso"> <div> <md-icon>warning</md-icon> </div> <div> Unable to load links from the server. </div> </div> <div layout=column ng-if="!$ctrl.loading && $ctrl.seeAlso"> <md-list ng-if="!($ctrl.seeAlso.links | empty)"> <div ng-repeat="(type, targets) in $ctrl.seeAlso.links"><!-- The type key is a machine identifier (e.g. \'trc.entries.bibliographic\')\n      <md-subheader>{{type}}</md-subheader> --> <md-list-item ng-repeat="target in targets" ng-click="$ctrl.openLink($event, target)"> <span ng-bind-html=target.label></span> <md-button class="md-secondary md-icon-button md-warn" aria-label="delete link" ng-click="$ctrl.deleteLink($event, target)"> <md-icon>delete</md-icon> <md-tooltip>Delete</md-tooltip> </md-button> </md-list-item> </div> </md-list> <div ng-if="$ctrl.seeAlso.links | empty"> No links added. Add one below. </div> <form layout=row novalidate name=newLink ng-submit=$ctrl.createLink($ctrl.selectedItem)> <md-autocomplete md-items="item in $ctrl.search($ctrl.searchText)" md-item-text="item.label | stripTags" md-search-text=$ctrl.searchText md-selected-item=$ctrl.selectedItem md-min-length=3 md-delay=300 md-autoselect md-floating-label="add link" md-select-on-match md-match-case-insensitive flex> <md-item-template> <span ng-bind-html=item.label></span> </md-item-template> <md-not-found>No matches found</md-not-found> </md-autocomplete> <md-button type=submit class=md-icon-button ng-disabled=!$ctrl.selectedItem> <md-icon>add</md-icon> <md-tooltip>Add Link</md-tooltip> </md-button> </form> </div>'),t.put("app/components/summary-edit-dialog/summary-edit-dialog.html","<md-dialog flex=50> <md-toolbar> <div class=md-toolbar-tools> <h3>Summary Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content><!-- material-compliant padding not used since WYSIWYG text editor *is* the UI --> <summary-editor ng-model=vm.summary></summary-editor> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>"),t.put("app/components/summary-editor/summary-editor.html","<div ckeditor ng-model=summary></div>"),t.put("app/zotero/test/test.html","<div layout=column flex> <md-content> <zotero-editor item=vm.item types=vm.types></zotero-editor> </md-content> </div>"),t.put("app/admin/editors/articles/article-editor.html",'<div flex layout=column layout-padding><!-- title editor bar --> <md-content layout=row flex=none> <md-input-container class=no-space flex> <label>Title</label> <input type=text ng-model=vm.article.title> </md-input-container> <div flex=none> <md-button class="md-raised md-primary" ng-click=vm.save()>Save</md-button> </div> </md-content> <div layout=column flex=none class=authors> <h3 layout=row> <span>Authors</span> <span flex></span> <span> <md-button class=md-icon-button aria-label="add author" ng-click=vm.article.authors.push({})> <md-icon>add</md-icon> <md-tooltip>Add Author</md-tooltip> </md-button> </span> </h3> <div layout=row ng-repeat="author in vm.article.authors"> <article-author-editor author=author flex></article-author-editor> <md-button class="md-icon-button md-warn" ng-click="vm.article.authors.splice($index, 1)" ng-if="vm.article.authors.length > 1"> <md-icon>delete</md-icon> <md-tooltip>Remove Author</md-tooltip> </md-button> </div> </div><!-- TODO add save button and auto-save --><!-- TODO add sidebar for notes, biblio, links, etc --> <div id=article_editor flex=noshrink layout=column> <div ng-model=vm.article.body ckeditor=vm.editor.config ckeditor-bibliography=vm.references ckeditor-footnotes=vm.article.footnotes> </div> <md-tabs flex=noshrink> <md-tab label=Abstract> <div ckeditor=vm.abstractEditor.config ng-model=vm.article.abstract></div> </md-tab> <md-tab label=Bibliography> <bibliography refs=vm.references style-id=mla></bibliography> </md-tab> <md-tab label=Footnotes> <div class=footnotes ng-repeat="footnote in vm.article.footnotes" layout=row> <div class=footnote ng-bind-html=footnote.content flex></div> <md-button class=md-icon-button aria-label="edit footnote" ng-click="vm.editFootnote($event, footnote)"> <md-icon>edit</md-icon> <md-tooltip>Edit Footnote</md-tooltip> </md-button> </div> </md-tab> <md-tab label="See Also"> <see-also-editor source-token=vm.article.ref.token></see-also-editor> </md-tab> </md-tabs> </div><!-- TODO how to make this fill all available space --> </div>'),t.put("app/admin/editors/articles/article.html",'<md-content flex layout=column> <navbar title=Articles sidenav-id=left></navbar> <md-content flex layout=row> <md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <md-tabs flex> <md-tab> <md-tab-label> <md-icon>format_list_bulleted</md-icon> <md-tooltip md-direction=bottom>Thematic Overviews</md-tooltip> </md-tab-label> <md-tab-body> <tree-categorization-editor scope-id=sda scheme=overviews> </tree-categorization-editor> </md-tab-body> </md-tab> <md-tab> <md-tab-label> <md-icon>school</md-icon> <md-tooltip md-direction=bottom>Research Articles</md-tooltip> </md-tab-label> <md-tab-body> <article-type-search type=research></article-type-search> </md-tab-body> </md-tab> <md-tab> <md-tab-label> <md-icon>book</md-icon> <md-tooltip md-direction=bottom>Book Reviews</md-tooltip> </md-tab-label> <md-tab-body> <article-type-search type=book-review></article-type-search> </md-tab-body> </md-tab> <md-tab> <md-tab-label> <md-icon>person</md-icon> <md-tooltip md-direction=bottom>Biographies</md-tooltip> </md-tab-label> <md-tab-body> <article-type-search type=biography></article-type-search> </md-tab-body> </md-tab> </md-tabs> <md-fab-speed-dial md-direction=up class="md-scale md-fab-bottom-right md-fab-straddle"> <md-fab-trigger> <md-button aria-label=New... class=md-fab> <md-icon>add</md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="New Research Article" class="md-fab md-mini" ng-click="vm.createArticle($event, \'research\')"> <md-tooltip md-direction=left>New Research Article</md-tooltip><!-- <md-icon>description</md-icon> --> <md-icon>school</md-icon> </md-button> <md-button aria-label="New Book Review" class="md-fab md-mini" ng-click="vm.createArticle($event, \'book-review\')"> <md-tooltip md-direction=left>New Book Review</md-tooltip> <md-icon>book</md-icon> </md-button> <md-button aria-label="New Biography" class="md-fab md-mini" ng-click="vm.createArticle($event, \'biography\')"> <md-tooltip md-direction=left>New Biography</md-tooltip> <md-icon>person</md-icon> </md-button> </md-fab-actions> </md-fab-speed-dial> </md-sidenav> <md-content flex layout=column ui-view></md-content> </md-content> </md-content>'),t.put("app/admin/editors/articles/thematic-overview.html",'<div id=thematic_overviews> <script type=text/ng-template id=treeCategoryEntry.html><div class="category-node" layout="row" layout-align="start center">\n     <!--  Display label for the category node-->\n     <span ng-if="node.entryRef == null" class="node-label">{{ node.label }}</span>\n     <a ui-sref="article.edit({id:node.entryRef.id})" ng-if="node.entryRef != null" class="node-label">{{ node.label }}</a>\n\n     <!-- push buttons to edge -->\n     <span flex></span>\n\n     <!-- node action menu -->\n     <md-menu class="action">\n       <!-- activate handle -->\n       <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button">\n         <md-icon>arrow_drop_down</md-icon>\n       </md-button>\n\n       <md-menu-content>\n         <!-- Associate/Remove  -->\n         <md-menu-item>\n           <md-button ng-if="node.entryRef.id == null"\n                      ng-click="vm.handleAssociateEntry($event, node)">\n             <md-icon>add_circle_outline</md-icon>\n             Create Article\n           </md-button>\n           <md-button ng-if="node.entryRef.id != null"\n                      ng-click="vm.handleRemoveEntry($event, node)">\n             <md-icon>remove_circle_outline</md-icon>\n             Remove Article\n           </md-button>\n         </md-menu-item>\n\n         <md-menu-item>\n           <md-button ng-click="vm.handleCreateChild($event, node)">\n             <!-- Will create a child node at the end of this list. User can drag to re-arrange -->\n             <md-icon>create_new_folder</md-icon>\n             Create Sub-Category\n           </md-button>\n         </md-menu-item>\n\n         <md-menu-item>\n           <md-button ng-click="vm.handleDeleteNode($event, node, parent)">\n             <!-- Will delete this node, all children and associated articles. If leaf node,\n             displays delete instead of delete sweep. Prompts user to confirm. -->\n             <md-icon>delete{{ node.children.length == 0 ? \'\' : \'_sweep\' }}</md-icon>\n             Remove Category\n           </md-button>\n         </md-menu-item>\n       </md-menu-content>\n     </md-menu>\n   </div>\n\n   <ol ng-if="node.children.length > 0">\n     <li ng-repeat="node in node.children" ng-include="\'treeCategoryEntry.html\'" ng-init="parent = $parent.$parent.node"></li>\n   </ol></script> <ol> <li ng-repeat="node in vm.overviews.root.children" ng-include="\'treeCategoryEntry.html\'" ng-init="parent = vm.overviews.root"></li> </ol> <div layout=row layout-align="center center"><!-- TODO need additional styling --> <md-button ng-click="vm.handleCreateChild($event, vm.overviews.root)" class=md-raised aria-label="create category">Create Category</md-button> </div> </div>'),t.put("app/person/components/event-edit-dialog/event-edit-dialog.html","<md-dialog flex=80> <md-toolbar> <div class=md-toolbar-tools> <h3>Event Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <event-editor ng-model=vm.event flex></event-editor> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>"),t.put("app/person/components/event-editor/event-editor.html","<div layout=column> <div layout=row> <md-input-container flex> <label>location</label> <input type=text ng-model=event.location> </md-input-container> <date-editor ng-model=event.date flex></date-editor> </div> <div layout=row layout-padding> <div flex> <h2>Description</h2> <div flex ckeditor ng-model=event.description></div> </div> </div> </div>"),t.put("app/person/components/name-editor/name-editor.html","<div layout=column> <div layout=row> <md-input-container flex=10> <label>title</label> <input type=text ng-model=name.title> </md-input-container> <md-input-container flex=30> <label>given</label> <input type=text ng-model=name.givenName> </md-input-container> <md-input-container flex=20> <label>middle</label> <input type=text ng-model=name.middleName> </md-input-container> <md-input-container flex=30> <label>family</label> <input type=text ng-model=name.familyName> </md-input-container> <md-input-container flex=10> <label>suffix</label> <input type=text ng-model=name.suffix> </md-input-container> </div> <md-input-container> <label>display label</label> <input type=text ng-model=name.label required> </md-input-container> </div>"),t.put("app/task/components/edition-editor/edition-editor.html",'<div layout=row> <md-input-container flex> <label>edition name</label> <input type=text ng-model=edition.editionName required> </md-input-container> </div> <section class=publication layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Publication Information</h2> </div> </md-toolbar> <publication-info-editor ng-model=edition.publicationInfo flex></publication-info-editor> </section> <section class=titles layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Titles</h2> <span flex></span> <md-button class=md-icon-button ng-click=edition.titles.push({})> <md-icon>add</md-icon>  </md-button></div> </md-toolbar> <div class=title layout=row ng-repeat="title in edition.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="edition.titles.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Authors</h2> <span flex></span> <md-button class=md-icon-button ng-click=edition.authors.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=author layout=row ng-repeat="author in edition.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="edition.authors.splice($index, 1)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> <section class=summary> <h2>Summary</h2> <summary-editor ng-model=edition.summary flex></summary-editor> </section> <section class=volumes> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Volumes</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.createVolume()> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <md-whiteframe class=volume layout=column layout-margin ng-repeat="volume in vm.volumes" ng-class="{\'md-whiteframe-2dp\': !volume.focused, \'md-whiteframe-8dp\': volume.focused}"> <h3 layout=row> <div flex layout=row layout-align="start center" ng-click="volume.focused = !volume.focused"> <md-icon>{{ edition.focused ? \'expand_less\' : \'expand_more\'}}</md-icon> <span>Volume {{volume.model.volumeNumber}}</span> <span flex></span> </div> <md-button class="md-icon-button md-warn" ng-click=vm.deleteVolume($index)> <md-icon>delete</md-icon> </md-button> </h3> <div class=slide ng-show=volume.focused> <volume-editor ng-model=volume.model flex></volume-editor> </div> </md-whiteframe> </section> <section class=copies> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=edition.copies.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=copy layout=column ng-repeat="copy in edition.copies"> <div layout=row> <copy-editor ng-model=copy flex></copy-editor> <md-button class="md-icon-button md-warn" ng-click="edition.copies.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </div> </div> </section>'),
t.put("app/task/components/volume-editor/volume-editor.html",'<div layout=row> <md-input-container flex> <label>volume number</label> <input type=text ng-model=volume.volumeNumber required> </md-input-container> </div> <section class=publication layout=column> <h2>Publication Information</h2> <publication-info-editor ng-model=volume.publicationInfo></publication-info-editor> </section> <section class=titles layout=column> <h2 layout=row> <span flex>Titles</span> <md-button class=md-icon-button ng-click=volume.titles.push({})> <md-icon>add</md-icon>  </md-button></h2> <div class=title layout=row ng-repeat="title in volume.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="volume.titles.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <h2 layout=row> <span flex>Authors</span> <md-button class=md-icon-button ng-click=volume.authors.push({})> <md-icon>add</md-icon> </md-button> </h2> <div class=author layout=row ng-repeat="author in volume.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="volume.authors.splice($index, 1)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> <section class=summary> <h2>Summary</h2> <summary-editor ng-model=volume.summary flex></summary-editor> </section> <section class=copies> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=volume.copies.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=copy layout=column ng-repeat="copy in volume.copies"> <div layout=row> <copy-editor ng-model=copy flex></copy-editor> <md-button class="md-icon-button md-warn" ng-click="volume.copies.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </div> </div> </section>'),t.put("app/task/components/work-editor/work-editor.html",'<section class=titles layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Titles</h2> <span flex></span> <md-button class=md-icon-button ng-click=work.titles.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=title layout=row ng-repeat="title in work.titles"> <title-editor ng-model=title flex></title-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="work.titles.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </md-input-container> </div> </section> <section class=authors layout=column> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Authors</h2> <span flex></span> <md-button class=md-icon-button ng-click=work.authors.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=author layout=row ng-repeat="author in work.authors"> <author-ref-editor ng-model=author flex></author-ref-editor> <md-input-container> <md-button class="md-icon-button md-warn" ng-click="work.authors.splice($index, 1)"> <md-icon>delete</md-icon>  </md-button></md-input-container> </div> </section> <section class=summary> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Summary</h2> </div> </md-toolbar> <summary-editor ng-model=work.summary flex></summary-editor> </section> <section class=editions> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Editions</h2> <span flex></span> <md-button class=md-icon-button ng-click=vm.createEdition()> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <md-whiteframe class=edition layout=column layout-margin ng-repeat="edition in vm.editions" ng-class="{ \'md-whiteframe-2dp\': !edition.focused, \'md-whiteframe-8dp\': edition.focused }"> <h3 layout=row> <div flex layout=row layout-align="start center" ng-click="edition.focused = !edition.focused"> <md-icon>{{ edition.focused ? \'expand_less\' : \'expand_more\'}}</md-icon> <span>{{edition.model.editionName}}</span> <span flex></span> </div> <md-button class="md-icon-button md-warn" ng-click=vm.deleteEdition($index)> <md-icon>delete</md-icon> </md-button> </h3> <div class=slide ng-show=edition.focused> <edition-editor ng-model=edition.model flex></edition-editor> </div> </md-whiteframe> </section> <section class=copies> <md-toolbar class=md-hue-3> <div class=md-toolbar-tools> <h2>Digital Copies</h2> <span flex></span> <md-button class=md-icon-button ng-click=work.copies.push({})> <md-icon>add</md-icon> </md-button> </div> </md-toolbar> <div class=copy layout=column ng-repeat="copy in work.copies"> <div layout=row> <copy-editor ng-model=copy flex></copy-editor> <md-button class="md-icon-button md-warn" ng-click="work.copies.splice($index, 1)"> <md-icon>delete</md-icon> </md-button> </div> </div> </section>'),t.put("app/task/components/work-editor-item/work-editor-item.html",'<div layout=row layout-align="center center" ng-if=!vm.loaded> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-if=vm.loaded> <work-editor ng-model=vm.work></work-editor> </div>'),t.put("app/work/components/author-ref-editor/author-ref-editor.html",'<div layout=column> <div layout=row> <md-autocomplete required md-items="item in vm.authorRoles" md-item-text=role md-min-length=0 md-search-text=ref.role md-selected-item-change="ref.role = item" md-floating-label=role> <md-item-template> <span md-highlight-text=ref.role>{{item}}</span> </md-item-template> </md-autocomplete> <md-input-container flex> <label>first name</label> <input type=text ng-model=ref.firstName> </md-input-container> <md-input-container flex> <label>last name</label> <input type=text ng-model=ref.lastName> </md-input-container> </div> <div layout=row> <md-autocomplete flex md-items="person in vm.getResults(vm.linkAuthorSearchText)" md-item-text=person.label md-search-text=vm.linkAuthorSearchText md-search-text-change=vm.searchPeople(vm.linkAuthorSearchText) md-selected-item-change=vm.setLinkedAuthor(person) md-floating-label="linked author"> <span md-highlight-text=vm.linkAuthorSearchText>{{person.label}}</span> </md-autocomplete> </div> </div>'),t.put("app/work/components/copy-edit-dialog/copy-edit-dialog.html","<md-dialog flex=50> <md-toolbar> <div class=md-toolbar-tools> <h3>Digital Copy Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content> <copy-editor ng-model=vm.copy></copy-editor> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>"),t.put("app/work/components/copy-editor/copy-editor.html",'<ng-form name=copyForm layout=column flex> <md-input-container> <label for=title>Title</label> <input type=text name=title id=title ng-model=copy.title> </md-input-container> <div layout=row> <md-input-container> <label for=type>Type</label> <md-select name=type id=type ng-model=copy.type required ng-change="vm.setProperties(copy.type, copyUrl)"> <md-option ng-repeat="handler in vm.refHandlers" value={{handler.id}}>{{handler.display}}</md-option> </md-select> </md-input-container> <md-input-container flex> <label for=url>URL</label> <input type=url name=url id=url ng-model=copyUrl ng-change="vm.setProperties(copy.type, copyUrl)"> </md-input-container> </div> <ul class="properties properties-inline"> <li ng-repeat="(key, value) in copy.properties"> <span class=label>{{key}}</span> <span class=value>{{value}}</span> </li> </ul> <md-input-container> <label for=rights>Description of Rights</label> <input type=text name=rights id=rights ng-model=copy.rights> </md-input-container> <h3>Summary</h3> <summary-editor ng-model=copy.summary flex></summary-editor> </ng-form>'),t.put("app/work/components/publication-info-editor/publication-info-editor.html","<div layout=row> <md-input-container flex> <label>publisher</label> <input type=text ng-model=pubInfo.publisher> </md-input-container> <md-input-container flex> <label>location</label> <input type=text ng-model=pubInfo.place> </md-input-container> <date-editor ng-model=pubInfo.date flex></date-editor> </div>"),t.put("app/work/components/relationships/relationships.html",'<div class=toolbar layout=row layout-align="start center"> <h2 class=content-heading>Relationships</h2> <span flex></span> <md-button class=md-icon-button ng-click=$ctrl.addRelationship($event) ng-if="!$ctrl.loading && $ctrl.typeGroups"> <md-icon>add</md-icon> </md-button> </div> <div ng-repeat="type in $ctrl.typeGroups" ng-if="!$ctrl.loading && $ctrl.typeGroups.length > 0"> <h3 class=content-heading>{{type.label}}</h3> <md-list><!-- TODO: clicking on relationship should open that relationship in an editor; clicking on an anchor should go to the linked item --> <md-list-item ng-repeat="reln in type.relationships" ng-click="$ctrl.openRelationship($event, reln)"> <span ng-repeat="anchor in reln.anchors" ng-bind-html=anchor.label></span> <md-button class="md-secondary md-warn md-icon-button" ng-click="$ctrl.deleteRelationship($event, reln)"> <md-icon>delete</md-icon> </md-button> </md-list-item> </md-list> </div> <div ng-if="$ctrl.typeGroups && $ctrl.typeGroups.length == 0"> No relationships to display. </div> <div layout=row layout-align="center center" layout-margin ng-if="!$ctrl.loading && !$ctrl.typeGroups"> <div> <md-icon>warning</md-icon> </div> <div> Unable to load relationships from the server. </div> </div> <div layout=row layout-align="center center" ng-if=$ctrl.loading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div>'),t.put("app/work/components/reln-edit-dialog/reln-edit-dialog.html",'<md-dialog flex=50> <md-toolbar> <div class=md-toolbar-tools> <h3>Relationship Editor</h3> <span flex></span> <md-button class=md-icon-button ng-click=vm.cancel()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <form name=relationship ng-submit=vm.close()> <md-dialog-content> <div class=md-dialog-content layout=column> <md-input-container> <label>type</label> <md-select name=type ng-model=vm.selectedType required> <md-option ng-repeat="type in vm.types" ng-value=type> {{type.label}} </md-option> </md-select> <div class=errors ng-messages=relationship.type.$error ng-if=relationship.$dirty> <div ng-message=required>Required</div> </div> </md-input-container> <md-autocomplete md-items="work in vm.search(vm.searchText)" md-search-text=vm.searchText md-selected-item=vm.selectedWork md-selected-item-change=vm.selectWork(work) md-item-text="work.label | stripTags" md-require-match md-min-length=3 md-delay=300 md-autoselect md-floating-label="search works" md-select-on-match md-match-case-insensitive> <md-item-template> <span ng-bind-html=work.label></span> </md-item-template> <md-not-found>No matches found</md-not-found> </md-autocomplete> <md-input-container ng-if="vm.anchors.length > 1"> <label>target</label> <md-select name=target ng-model=vm.selectedAnchor required> <md-option ng-repeat="anchor in vm.anchors" ng-value=anchor> {{anchor.label}} </md-option> </md-select> <div class=errors ng-messages=relationship.target.$error ng-if=relationship.$dirty> <div ng-message=required>Required</div> </div> </md-input-container> <div class=summary> <h2>Summary</h2> <div ckeditor ng-model=vm.description></div> </div> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click=vm.cancel()>Cancel</md-button> <md-button class=md-primary type=submit>Done</md-button> </md-dialog-actions> </form> </md-dialog>'),t.put("app/work/components/title-editor/title-editor.html","<div layout=row> <md-input-container> <label>type</label> <md-select ng-model=title.type required> <md-option value=bibliographic>bibliographic</md-option> <md-option value=canonical>canonical</md-option> <md-option value=short>short</md-option> </md-select> </md-input-container> <md-input-container flex> <label>title</label> <input type=text ng-model=title.title required> <div ng-switch=title.type> <small ng-switch-when=bibliographic>the full title as published on the work</small> <small ng-switch-when=canonical>title by which the work is commonly known in the academic realm</small> <small ng-switch-when=short>shortened title coloquially used by the public</small> </div> </md-input-container> <md-input-container flex> <label>subtitle</label> <input type=text ng-model=title.subtitle> </md-input-container> </div>"),t.put("app/admin/editors/articles/components/article-author-editor/article-author-editor.html",'<div layout=column layout-gt-sm=row layout-align-gt-sm="start center"> <div layout=row layout-align="start center" flex-gt-sm> <md-button class=md-icon-button ng-click="$ctrl.institution = !$ctrl.institution"> <md-icon>{{$ctrl.institution ? \'person\' : \'domain\'}}</md-icon> </md-button> <div layout=row flex ng-show=$ctrl.institution> <md-input-container class=no-space flex> <label>name</label> <input type=text ng-model=$ctrl.author.name> </md-input-container> </div> <div layout=row flex ng-hide=$ctrl.institution> <md-input-container class=no-space flex> <label>first name</label> <input type=text ng-model=$ctrl.author.firstname> </md-input-container> <md-input-container class=no-space flex> <label>last name</label> <input type=text ng-model=$ctrl.author.lastname> </md-input-container> </div> </div> <div layout=row flex-gt-sm> <md-input-container class=no-space flex> <label>affiliation</label> <input type=text ng-model=$ctrl.author.properties.affiliation> </md-input-container> <md-input-container class=no-space flex> <label>email</label> <input type=text ng-model=$ctrl.author.properties.email> </md-input-container> </div> </div>'),t.put("app/admin/editors/articles/components/article-type-search/article-type-search.html",'<div layout=column> <div layout=row flex=none> <md-input-container flex> <label>search</label> <md-icon>search</md-icon> <input type=search ng-model=$ctrl.query ng-model-options="{debounce: 300}" ng-change=$ctrl.search($ctrl.query)> </md-input-container> </div> <md-list layout=column> <md-list-item ng-repeat="article in $ctrl.results.articles" ui-sref="article.edit({id: article.id})"> <span class=md-list-item-text>{{article.title}}</span> </md-list-item> </md-list> </div>')}]);
//# sourceMappingURL=../maps/scripts/app-f934b04725.js.map
