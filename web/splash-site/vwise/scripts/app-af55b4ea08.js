!function(){"use strict";angular.module("vwise",["ngSanitize","google.books","cfp.hotkeys","trcWorks","trcBio"])}(),function(){"use strict";function e(e){function n(e,t,n,i){var a=i(r.db);return new o(e,a,n)}n.$inject=["panelContentMediatorRegistry","$http","$q","pouchDB"];var o=t(e),r={db:{name:"vwise"},$get:n};return r}function t(e){function t(t,n,o){e.WorkspaceRepository.call(this,t),this.$q=o,this.db=n,this.workspaces=new e.Cache,this.panels=new e.Cache}return t.prototype=Object.create(e.WorkspaceRepository.prototype),t.prototype.listWorkspaceIds=function(){return this.db.allDocs({include_docs:!0}).then(function(e){return e.rows.filter(function(e){return e.doc&&"workspace"===e.doc.type}).map(function(e){return e.id})})},t.prototype.createWorkspace=function(t){var n=e.UUID.uuid4(),o=new e.Workspace(n,this);return t&&(o.title=t),this.saveWorkspace(o)},t.prototype.saveWorkspace=function(t){if(!(t instanceof e.Workspace))throw new TypeError("expected instance of Workspace");var n={_id:t._id||t.id,_rev:t._rev,type:"workspace",workspace:this.marshallWorkspace(t)};return this.db.put(n).then(function(e){if(!e.ok)throw new Error("unable to save workspace");return t._id=e.id,t._rev=e.rev,t})},t.prototype.getWorkspace=function(e){if(!e)return this.$q.reject(new Error("no id provided"));var t=this;return this.workspaces.fetch(e,function(){return t.db.get(e).then(function(e){return t.unmarshallWorkspace(e.workspace).then(function(t){return t._id=e._id,t._rev=e._rev,t})})})},t.prototype.removeWorkspace=function(e){return this.db.remove(e)},t.prototype.createPanel=function(t,n,o,r){var i=e.UUID.uuid4(),a=this,l=new e.Panel(i,t,n,o,r,function(e){a.savePanel(e)});return this.savePanel(l)},t.prototype.savePanel=function(t){if(!(t instanceof e.Panel))throw new TypeError("expected instance of Panel");var n={_id:t._id||t.id,_rev:t._rev,type:"panel",panel:this.marshallPanel(t)};return this.db.put(n).then(function(e){if(!e.ok)throw new Error("unable to save panel");return t._id=e.id,t._rev=e.rev,t})},t.prototype.getPanel=function(e,t){if(!e)return this.$q.reject(new Error("no id provided"));var n=this;return this.panels.fetch(e,function(){return n.db.get(e).then(function(e){return n.unmarshallPanel(e.panel,t).then(function(t){return t._id=e._id,t._rev=e._rev,t})})})},t.prototype.removePanel=function(e,t){return t&&t.removePanel(e),this.db.remove(e)},t}e.$inject=["vwise"],angular.module("vwise").provider("workspaceRepository",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/vwise/components/workspace/workspace.html",scope:{workspace:"="},controller:t,controllerAs:"vm"};return e}function t(e,t){function n(n,o){var r=o.draggable.scope(),i=r.item;if(i){var a=angular.element(n.target).offset(),l={xPosition:o.position.left-a.left,yPosition:o.position.top-a.top,width:600,height:400,background:"#ffffff"},s=t.findContentMediators(i,l),u=s.length>0?s[0]:null;if(u){var d=u.initPanelData(i,l);d.then(function(t){return e.workspace.createPanel(u,t,l)})}}}function o(n,o){var r={note:""},i={xPosition:n,yPosition:o},a=t.findContentMediators(r,i),l=a.length>0?a[0]:null;e.workspace.createPanel(l,r,i)}function r(e){if(e.ctrlKey){var t=angular.element(e.target).offset();o(e.clientX-t.left,e.clientY-t.top)}}var i=this;i.thingDropped=n,i.workspaceClicked=r}t.$inject=["$scope","panelContentMediatorRegistry"],angular.module("vwise").directive("vwiseWorkspace",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){function i(){function e(){"expand_less"===i.icon?(o.width=t.vprops.width,o.height=t.vprops.height,t.vprops.width=r.outerWidth()+1,t.vprops.height=r.outerHeight(),i.label="expand",i.icon="expand_more"):(t.vprops.width=o.width,t.vprops.height=o.height,i.label="collapse",i.icon="expand_less")}var o={width:t.vprops.width,height:t.vprops.height},r=n.find(".panel-label"),i={label:"collapse",icon:"expand_less",handler:e};return i}r.addActionButton(i()),t.title=e.getTitle(t.work.titles),t.work.editions.forEach(function(e){e.type="edition",e.workId=t.work.id})}var n={restrict:"E",require:"^^vwisePanel",templateUrl:"app/vwise/components/work-panel/work-panel.html",scope:{work:"=",relationships:"=",vprops:"="},link:t};return n}e.$inject=["worksRepo"],angular.module("vwise").directive("workPanel",e)}(),function(){"use strict";function e(e){function t(t){t.title=e.getTitle(t.volume.titles),t.edition=e.getEdition(t.workId,t.editionId)}var n={restrict:"E",templateUrl:"app/vwise/components/work-panel/volume-panel.html",scope:{volume:"=",workId:"@",editionId:"@"},link:t};return n}e.$inject=["worksRepo"],angular.module("vwise").directive("volumePanel",e)}(),function(){"use strict";function e(e){function t(t){t.title=e.getTitle(t.edition.titles),t.edition.volumes.forEach(function(e){e.type="volume",e.workId=t.workId,e.editionId=t.edition.id})}var n={restrict:"E",templateUrl:"app/vwise/components/work-panel/edition-panel.html",scope:{edition:"=",workId:"@"},link:t};return n}e.$inject=["worksRepo"],angular.module("vwise").directive("editionPanel",e)}(),function(){"use strict";function e(e){function n(n,o,r,i){function a(){function e(){"expand_less"===i.icon?(t.width=n.vprops.width,t.height=n.vprops.height,n.vprops.width=r.outerWidth()+10,n.vprops.height=r.outerHeight(),i.label="expand",i.icon="expand_more"):(n.vprops.width=t.width,n.vprops.height=t.height,i.label="collapse",i.icon="expand_less")}var t={width:n.vprops.width,height:n.vprops.height},r=o.find(".panel-label"),i={label:"collapse",icon:"expand_less",handler:e};return i}i.addActionButton(a());var l=n.person.name;n.name=l.label||e.at(l,t).map(function(e){return e.trim()}).filter(e.identity).join(" ")}function o(t,n,o,r,i){function a(){var e=t.person.id,n=l(e);n.then(function(e){d.works=e});var o=n.then(function(e){return s(e)});o.then(function(e){d.relatedPeople=e})}function l(e){var t=o.searchByAuthor(e);return t.$promise.then(function(){return t.items.forEach(function(e){e.type="work"}),t.items})}function s(t){var o=t.map(function(e){return u(e.id)}),i=n.all(o).then(function(t){return e.chain(t).flatten().groupBy(function(e){return e.type.identifier+"-"+(e.reverse?"rev":"fwd")}).map(function(t){var n=e.clone(t[0]);return n.relationships=e.flatMap(t,"relationships"),n}).value()}),a=i.then(function(t){var o=t.map(function(t){var o=e.chain(t.relationships).flatMap("entities").map("entity").map(function(t){return t.$promise.then(function(t){var n=e.map(t.authors,"authorId");return n})}).value(),i=n.all(o).then(function(t){return e.chain(t).flatten().filter().uniq().value()});return t.relationships=i.then(function(e){var t=e.map(function(e){var t=r.get(e);return t.$promise.then(function(){t.type="person"}),t.$promise});return n.all(t)}),n.all(t)});return n.all(o)});return a}function u(e){var t="works/"+e,n=i.search(t),r=n.$promise.then(function(e){var n=i.normalizeRelationships(e,t,o);return n.$promise});return r}var d=this;d.works=[],a()}o.$inject=["$scope","$q","worksRepo","peopleRepo","relationshipsRepo"];var r={restrict:"E",require:"^^vwisePanel",templateUrl:"app/vwise/components/person-panel/person-panel.html",scope:{person:"=",vprops:"="},link:n,controller:o,controllerAs:"panel"};return r}e.$inject=["_"],angular.module("vwise").directive("personPanel",e);var t=["title","givenName","middleName","familyName","suffix"]}(),function(){"use strict";function e(e,t,n,o){function r(){t.PanelContentMediator.call(this,"works","Works Content Mediator")}function i(e){var t=n.get(e);return t.$promise}function a(e){var t="works/"+e,r=o.search(t);return r.$promise.then(function(){var e=o.normalizeRelationships(r,t,n);return e.$promise.then(function(){return e.forEach(function(e){e.relationships.forEach(function(e){e.entities.forEach(function(e){switch(e.entity.$promise.then(function(){e.title=n.getTitle(e.entity.titles)}),e.type){case"work":e.id=e.refParams.workId;break;case"edition":e.workId=e.refParams.workId,e.id=e.refParams.editionId;break;case"volume":e.workId=e.refParams.workId,e.editionId=e.refParams.editionId,e.id=e.refParams.volumeId}})})}),e})})}return r.prototype=Object.create(t.PanelContentMediator.prototype),r.prototype.matches=function(e){return e.type&&"work"===e.type&&e.id},r.prototype.initPanelData=function(t){return e.all({id:t.id,work:i(t.id),relationships:a(t.id)})},r.prototype.unmarshall=function(t){return e.all({id:t.id,work:i(t.id),relationships:a(t.id)})},r.prototype.marshall=function(e){var t={type:"work",id:e.id};return t},r.prototype.getTemplate=function(){return'<work-panel work="content.work" relationships="content.relationships" vprops="vprops" flex layout="column"></work-panel>'},new r}e.$inject=["$q","vwise","worksRepo","relationshipsRepo"],angular.module("vwise").factory("worksContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"volumes","Volumes Content Mediator")}function o(e,n,o){var r=t.getVolume(e,n,o);return r.$promise.then(function(){return r.workId=e,r.editionId=n,r})}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"volume"===e.type&&e.id&&e.workId&&e.editionId},n.prototype.initPanelData=function(e){return o(e.workId,e.editionId,e.id)},n.prototype.unmarshall=function(e){return o(e.workId,e.editionId,e.id)},n.prototype.marshall=function(e){var t={type:"volume",id:e.id,workId:e.workId,editionId:e.editionId};return t},n.prototype.getTemplate=function(){return'<volume-panel volume="content" edition-id="{{content.editionId}}" work-id="{{content.workId}}" flex layout="column"></volume-panel>'},new n}e.$inject=["vwise","worksRepo"],angular.module("vwise").factory("volumesContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"people","People Content Mediator")}function o(e){var n=t.get(e);return n.$promise}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"person"===e.type&&e.id},n.prototype.initPanelData=function(e){return o(e.id)},n.prototype.unmarshall=function(e){return o(e.id)},n.prototype.marshall=function(e){var t={type:"person",id:e.id};return t},n.prototype.getTemplate=function(){return'<person-panel person="content" vprops="vprops" flex layout="column"></person-panel>'},new n}e.$inject=["vwise","peopleRepo"],angular.module("vwise").factory("peopleContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"passthru","Pass-Through Debug Mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(){return!0},new t}e.$inject=["vwise"],angular.module("vwise").factory("passthruContentMediator",e)}(),function(){"use strict";function e(e){return new e.PanelContentMediatorRegistry}e.$inject=["vwise"],angular.module("vwise").factory("panelContentMediatorRegistry",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"notes","Note Content Mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.hasOwnProperty("note")},t.prototype.getTemplate=function(){return'<div ng-model="content.note" contenteditable flex></div>'},new t}e.$inject=["vwise"],angular.module("vwise").factory("noteContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"editions","Editions Content Mediator")}function o(e,n){var o=t.getEdition(e,n);return o.$promise.then(function(){return o.workId=e,o})}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"edition"===e.type&&e.id&&e.workId},n.prototype.initPanelData=function(e){return o(e.workId,e.id)},n.prototype.unmarshall=function(e){return o(e.workId,e.id)},n.prototype.marshall=function(e){var t={type:"edition",id:e.id,workId:e.workId};return t},n.prototype.getTemplate=function(){return'<edition-panel edition="content" work-id="{{content.workId}}" flex layout="column"></edition-panel>'},new n}e.$inject=["vwise","worksRepo"],angular.module("vwise").factory("editionsContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"ia-reader","Internet Archive Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"internetarchive"===e.type},t.prototype.getTemplate=function(){return'<ia-reader properties="content.properties" flex></ia-reader>'},new t}e.$inject=["vwise"],angular.module("vwise").factory("internetArchiveContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"ht-reader","HathiTrust Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"hathitrust"===e.type},t.prototype.getTemplate=function(){return'<hathitrust-reader properties="content.properties" flex></hathitrust-reader>'},new t}e.$inject=["vwise"],angular.module("vwise").factory("hathitrustContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"gb-reader","Google Books Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"googlebooks"===e.type},t.prototype.getTemplate=function(){return'<google-book-reader properties="content.properties" flex></google-book-reader>'},new t}e.$inject=["vwise"],angular.module("vwise").factory("googleBooksContentMediator",e)}(),function(){"use strict";function e(e){function r(t,r,i,a){var l=a[1];l.getInfoArea=function(){return r.find(".panel-area-left")},l.getStatusArea=function(){return r.find(".panel-area-bottom")};var s=l.panel;t.vp=s.vprops;var u=t.$new(!0);u.content=s.content,u.vprops=s.vprops,u.$watch("vprops.background",function(e){var t=n(e);s.vprops.foreground=o(t)}),u.$watch("content",function(){s.save()},!0);var d=s.contentMediator.getTemplate(),c=r.find(".content");c.html(d),e(c.contents())(u)}var i={restrict:"E",require:["^^vwiseWorkspace","vwisePanel"],templateUrl:"app/vwise/components/panel/panel.html",replace:!0,scope:{panel:"="},link:r,controller:t,controllerAs:"vm"};return i}function t(e){function t(e){return d.actionButtons.push(e),function(){var t=d.actionButtons.indexOf(e);t>=0&&d.actionButtons.splice(t,1)}}function n(e){return d.propertyButtons.push(e),function(){var t=d.propertyButtons.indexOf(e);t>=0&&d.propertyButtons.splice(t,1)}}function o(){d.panel.remove()}function r(e,t){d.panel.vprops.xPosition=t.position.left,d.panel.vprops.yPosition=Math.max(0,t.position.top)}function i(e,t){var n=Math.max(0,t.position.top);d.panel.setPosition(t.position.left,n),u()}function a(){d.resizing=!0}function l(t,n){var o=n.position.left,r=n.position.top;e.$apply(function(){d.panel.vprops.width=Math.max(0,o),d.panel.vprops.height=Math.max(0,r)})}function s(t,n){d.resizing=!1;var o=n.position.left,r=n.position.top;e.$apply(function(){d.panel.setSize(Math.max(0,o),Math.max(0,r))})}function u(e){d.panel.activate(),e&&e.stopPropagation&&e.stopPropagation()}var d=this;d.resizing=!1,d.actionButtons=[],d.propertyButtons=[],d.panel=e.panel,d.addActionButton=t,d.addPropertyButton=n,d.closePanel=o,d.startResize=a,d.resizePanel=l,d.stopResize=s,d.movePanel=r,d.stopMove=i,d.activatePanel=u}function n(e){var t=e.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(t)return{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}}function o(e){var t=e.r<=.03928?e.r/12.92:Math.pow((e.r+.055)/1.055,2.4),n=e.g<=.03928?e.g/12.92:Math.pow((e.g+.055)/1.055,2.4),o=e.b<=.03928?e.b/12.92:Math.pow((e.b+.055)/1.055,2.4),r=.2126*t+.7152*n+.0722*o;return r>.215?"rgba(0,0,0,0.87)":"rgba(255,255,255,0.87)"}e.$inject=["$compile"],t.$inject=["$scope"],angular.module("vwise").directive("vwisePanel",e)}(),function(){"use strict";function e(e){function t(t){t.$watch("properties",function(n){t.src=e.trustAsResourceUrl("https://archive.org/stream/"+n.id+"?ui=embed#mode/2up")})}var n={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:t,scope:{properties:"="}};return n}e.$inject=["$sce"],angular.module("vwise").directive("iaReader",e)}(),function(){"use strict";function e(e,n){function o(o){o.$watch("properties",function(r){var i={id:r.htid,ui:"embed"};r.seq&&(i.seq=r.seq);var a=n.map(i,function(e,t){return t+"="+e}).join(";"),l=t+"?"+a;o.src=e.trustAsResourceUrl(l)})}var r={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:o,scope:{properties:"="}};return r}e.$inject=["$sce","_"];var t="https://babel.hathitrust.org/cgi/pt";angular.module("vwise").directive("hathitrustReader",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r&&(r.$render=function(){n.html(e.getTrustedHtml(r.$viewValue||""))},n.on("blur keyup change",function(){t.$apply(function(){r.$setViewValue(n.html())})}))}var n={restrict:"A",require:"?ngModel",link:t};return n}e.$inject=["$sce"],angular.module("vwise").directive("contenteditable",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,l,s,u,d,c,p){function m(){var e=n.workspaceId?d.when(n.workspaceId):t.listWorkspaceIds().then(function(e){return e.length>0?e[0]:null}),o=e.then(function(e){return t.getWorkspace(e)})["catch"](function(){return t.createWorkspace()});o.then(function(e){h.workspace=e}),s.bindTo(r).add({combo:"ctrl+\\",description:"Toggle Sidebar",callback:function(){h.sidebarFocused=!h.sidebarFocused}}).add({combo:"/",description:"Search",callback:function(){h.searchQuery="",h.sidebarFocused?i(function(){angular.element("#searchQuery").focus()}):a("left").toggle()}}).add({combo:"n",description:"Create a new note panel",callback:function(){f(100,100)}})}function v(e){function t(e,t){return function(n){return n.forEach(function(n){n[e]=t}),n}}h.loading=!0,h.peopleResults=c.search(e),h.worksResults=p.search(e),d.all([h.peopleResults.$promise.then(u.property("items")).then(t("type","person")),h.worksResults.$promise.then(u.property("items")).then(t("type","work"))]).then(function(){h.loading=!1},function(){l.showSimple("Unable to load search results")})}function f(t,n){var o={note:""},r={xPosition:t,yPosition:n},i=e.findContentMediators(o,r),a=i.length>0?i[0]:null;h.workspace.createPanel(a,o,r)}var h=this;h.workspace=null,h.activeItems=[],h.searchQuery="",h.sidebarFocused=!0,h.search=u.debounce(v,300),m()}e.$inject=["panelContentMediatorRegistry","workspaceRepository","$stateParams","$log","$scope","$timeout","$mdSidenav","$mdToast","hotkeys","_","$q","peopleRepo","worksRepo"],angular.module("vwise").controller("WorkspaceController",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,l,s,u){e.register(t),e.register(n),e.register(o),e.register(r),e.register(i),e.register(a),e.register(l),e.register(s),e.register(u)}e.$inject=["panelContentMediatorRegistry","peopleContentMediator","worksContentMediator","editionsContentMediator","volumesContentMediator","googleBooksContentMediator","hathitrustContentMediator","internetArchiveContentMediator","noteContentMediator","passthruContentMediator"],angular.module("vwise").run(e)}(),function(){"use strict";angular.module("vwise").constant("vwise",vwise)}(),function(){"use strict";function e(e){e.configure({preventLoad:!0})}e.$inject=["googleBooksApiProvider"],angular.module("vwise").config(e)}(),function(){"use strict";angular.module("trcWorks",["ngResource"])}(),function(){"use strict";function e(){function e(e,n){function o(){return r("")}function r(e){return $.get({q:e,max:50})}function i(e){return $.get({aid:e,max:50})}function a(e){if(angular.isUndefined(e))throw new TypeError("Invalid ID provided to getWork");var t=$.get({workId:e});return t.$promise.then(b),t}function l(e,t){if(angular.isUndefined(e)||angular.isUndefined(t))throw new TypeError("Invalid IDs provided to getEdition");var n=P.get({workId:e,editionId:t});return n.$promise.then(y),n}function s(e,t,n){if(angular.isUndefined(e)||angular.isUndefined(t)||angular.isUndefined(n))throw new TypeError("Invalid IDs provided to getVolume");var o=I.get({workId:e,editionId:t,volumeId:n});return o.$promise.then(w),o}function u(){var e=new $;return b(e),e.titles.push({}),e.authors.push({}),e}function d(){var e=new P;return y(e)}function c(){var e=new I;return w(e)}function p(){switch(arguments.length){case 1:return m.apply(null,arguments);case 2:return v.apply(null,arguments);case 3:return f.apply(null,arguments)}throw new TypeError("Unexpected arguments to worksRepo#save")}function m(e){if(!(e instanceof $))throw new Error("work was not created by this repo");return e.id?e.$update():e.$save()}function v(e,t){if(!e)throw new Error("no work id provided");if(!(t instanceof P))throw new Error("edition was not created by this repo");return t.id?t.$update({workId:e}):t.$save({workId:e})}function f(e,t,n){if(!e)throw new Error("no work id provided");if(!t)throw new Error("no edition id provided");if(!(n instanceof I))throw new Error("volume was not created by this repo");return n.id?n.$update({workId:e,editionId:t}):n.$save({workId:e,editionId:t})}function h(e){var t=$["delete"]({id:e});return t.$promise}function g(e){return e.titles?e.titles.forEach(function(e){e.type=e.type.toLowerCase()}):e.titles=[],e.authors?e.authors.forEach(function(e){e.role=e.role.toLowerCase()}):e.authors=[],e.otherAuthors?e.otherAuthors.forEach(function(e){e.role=e.role.toLowerCase()}):e.otherAuthors=[],e.copies||(e.copies=[]),e}function b(e){return g(e),e.editions?e.editions.forEach(y):e.editions=[],e}function y(e){return g(e),e.volumes?e.volumes.forEach(w):e.volumes=[],e}function w(e){return g(e),e}function k(e,t){return angular.isUndefined(t)?t=["short","canonical","bibliographic"]:angular.isArray(t)||(t=[t]),t.reduce(function(t,o){return t||n.find(e,{type:o})},null)}var $=e(t.url+"/:workId",{workId:"@id"},{update:{method:"PUT"}}),P=e(t.url+"/:workId/editions/:editionId",{editionId:"@id"},{update:{method:"PUT"}}),I=e(t.url+"/:workId/editions/:editionId/volumes/:volumeId",{volumeId:"@id"},{update:{method:"PUT"}}),j={};return j.getAll=o,j.search=r,j.searchByAuthor=i,j.get=a,j.getWork=a,j.getEdition=l,j.getVolume=s,j.create=u,j.createWork=u,j.createEdition=d,j.createVolume=c,j.save=p,j.saveWork=m,j.saveEdition=v,j.saveVolume=f,j["delete"]=h,j.getTitle=k,j}e.$inject=["$resource","_"];var t={};return t.url="/api/works",t.$get=e,t}angular.module("trcWorks").provider("worksRepo",e)}(),function(){"use strict";angular.module("trcReln",["ngResource"])}(),function(){"use strict";function e(){function e(e,o){function r(e){if(e=e||{},!P||e.force){var t=k.query();P={};var n=t.$promise.then(function(){return t.forEach(function(e){P[e.identifier]=e}),P});Object.defineProperty(P,"$promise",{value:n})}return P}function i(e){var t=r();return t.$promise.then(function(t){return t[e]})}function s(){var e=new $;return g(e)}function c(){var e={};return b(e)}function p(){var e={};return y(e)}function m(e){return $.get({id:e})}function v(e){if(!e)throw new Error("no options provided");angular.isString(e)&&(e={uri:e});var t={};return e.uri&&(t.entity=e.uri),e.typeId&&(t.type=e.typeId),e.direction&&(t.direction=e.direction),e.start&&(t.off=e.start),e.max&&(t.max=e.max),$.query(t)}function f(e){if(!(e instanceof $))throw new Error("Relationship was not created by this repo");return e.id?e.$update():e.$save()}function h(e){var t=$["delete"]({id:e});return t.$promise}function g(e){return e.provenance||(e.provenance=c()),e.relatedEntities||(e.relatedEntities=[]),e.targetEntities||(e.targetEntities=[]),e}function b(e){return e.creatorUris||(e.creatorUris=[]),e}function y(e){return e.entryUris||(e.entryUris=[]),e}function w(n,o,r){var s=n.map(function(n){var i=n.targetEntities.some(function(e){return e.entryUris.some(function(e){return e===o})}),l=i?"relatedEntities":"targetEntities",s=u(n[l],d("entryUris")).map(function(e){return t(e,r)}),c={id:n.id,typeId:n.typeId,reverse:i,description:n.description,entities:s},p=s.map(d("$promise"));return Object.defineProperty(c,"$promise",{value:e.all(p).then(a(c))}),c}),c={};s.forEach(function(e){var t=e.typeId;c.hasOwnProperty(t)||(c[t]={fwd:[],rev:[]}),c[t][e.reverse?"rev":"fwd"].push(e)});var p=[],m=l(c,function(e,t){return i(t).then(function(t){if(t.isDirected)e.fwd.length>0&&p.push({label:t.title,type:t,reverse:!1,relationships:e.fwd}),e.rev.length>0&&p.push({label:t.reverseTitle,type:t,reverse:!0,relationships:e.rev});else{var n=e.fwd.concat(e.rev);n.length>0&&p.push({label:t.title,type:t,relationships:n})}})});return Object.defineProperty(p,"$promise",{value:e.all(m).then(a(p))}),p}var k=o(n.url+"/types/:id",{id:"@identifier"}),$=o(n.url+"/:id",{id:"@id"},{update:{method:"PUT"}}),P=null,I={};return I.getTypes=r,I.getType=i,I.createRelationship=s,I.createProvenance=c,I.createAnchor=p,I.get=m,I.search=v,I.save=f,I["delete"]=h,I.normalizeRelationships=w,I}e.$inject=["$q","$resource"];var n={};return n.url="/api/relationships",n.$get=e,n}function t(e,t){var i=c.exec(e);return i?i[1]&&i[2]&&i[3]?n(i[1],i[2],i[3],t):i[1]&&i[2]?o(i[1],i[2],t):i[1]?r(i[1],t):null:null}function n(e,t,n,o){var r=o.getEdition(e,t),a=o.getVolume(e,t,n),l={type:"volume",refParams:{workId:e,editionId:t,volumeId:n},entity:a},s=a.$promise.then(function(){var e=o.getTitle(a.titles,["short","canonical","bibliographic"]),t=i(e);return r.$promise.then(function(){return t+". "+r.editionName+". Volume "+a.volumeNumber},function(){return t+". [Unknown edition]. Volume "+a.volumeNumber})}),u=s.then(function(e){return l.label=e,l});return Object.defineProperty(l,"$promise",{value:u}),l}function o(e,t,n){var o=n.getEdition(e,t),r={type:"edition",refParams:{workId:e,editionId:t},entity:o},a=o.$promise.then(function(){var e=n.getTitle(o.titles,["short","canonical","bibliographic"]);return r.label=i(e)+". "+o.editionName,r});return Object.defineProperty(r,"$promise",{value:a}),r}function r(e,t){var n=t.getWork(e),o={type:"work",refParams:{workId:e},entity:n},r=n.$promise.then(function(){var e=t.getTitle(n.titles,["short","canonical","bibliographic"]);return o.label=i(e),o});return Object.defineProperty(o,"$promise",{value:r}),o}function i(e){return e?e.title+(e.subtitle?": "+e.subtitle:""):""}function a(e){return function(){return e}}function l(e,t){return Object.keys(e).filter(function(t){return e.hasOwnProperty(t)}).map(function(n){return t(e[n],n)})}function s(e){return e.reduce(function(e,t){return e.concat(t)},[])}function u(e,t){return s(e.map(t))}function d(e){return function(t){return t[e]}}var c=/^works\/([^\/]+)(?:\/editions\/([^\/]+)(?:\/volumes\/([^\/]+))?)?$/i;angular.module("trcReln").provider("relationshipsRepo",e)}(),function(){"use strict";angular.module("trcBio",["ngResource"])}(),function(){"use strict";function e(){function e(e,n){function o(){var e=new h;return p(e)}function r(){var e={};return m(e)}function i(){var e={};return v(e)}function a(){var e={};return f(e)}function l(){var e={};return e}function s(e){return h.get({id:e})}function u(e){return h.get({q:e})}function d(e){var t;return t=e.id?h.update({id:e.id},e):h.save(null,e),t.$promise.then(function(t){return e.id=t.id,e})}function c(e){var t=h["delete"]({id:e});return t.$promise}function p(e){return e.meta?m(e.meta):e.meta=r(),e.name?v(e.name):e.name=i(),e.altNames?e.altNames.forEach(v):e.altNames=[],e.birth?f(e.birth):e.birth=a(),e.death?f(e.death):e.death=a(),e}function m(e){return e.links||(e.links={}),e}function v(e){return e}function f(e){return e.date||(e.date=l()),e}var h=n(t.url+"/:id",null,{update:{method:"PUT"}}),g={};return g.create=o,g.createName=i,g.createEvent=a,g.get=s,g.search=u,g.save=d,g["delete"]=c,g}e.$inject=["$q","$resource"];var t={};return t.url="/api/people",t.$get=e,t}angular.module("trcBio").provider("peopleRepo",e)}(),function(){"use strict";function e(){function e(e,t){function n(){var n=t.createName();e.person.altNames.push(n)}function o(t){e.person.altNames.splice(t,1)}function r(n){var o=t.createEvent();e.person[n]=o}function i(t){e.person[t]=null}var a=this;a.addName=n,a.removeName=o,a.addEvent=r,a.removeEvent=i}e.$inject=["$scope","peopleRepo"];var t={restrict:"E",templateUrl:"app/trc-bio/person-editor.html",scope:{person:"=ngModel"},controller:e,controllerAs:"personEditor"};return t}angular.module("trcBio").directive("trcPersonEditor",e)}(),function(){"use strict";function e(){function e(){var e=this;e.roles=[{value:"canonical",label:"Canonical Name"},{value:"pseudonym",label:"Pseudonym"},{value:"maiden",label:"Maiden Name"},{value:"designation",label:"Honorary Designation"},{value:"nickname",label:"Nickname"},{value:"phonetic",label:"Phonetic Name"}]}var t={restrict:"E",templateUrl:"app/trc-bio/name-editor.html",scope:{name:"=ngModel"},controller:e,controllerAs:"nameEditor"};return t}angular.module("trcBio").directive("trcNameEditor",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/trc-bio/event-editor.html",scope:{event:"=ngModel"}};return e}angular.module("trcBio").directive("trcEventEditor",e)}(),function(){"use strict";angular.module("google.books",[])}(),function(){"use strict";function e(){function e(e){angular.extend(n.options,e)}function t(e){return e.load(n.options)}t.$inject=["googleBooksScriptLoader"];var n={};return n.options={transport:"https",v:0,language:"en",preventLoad:!1},n.configure=e,n.$get=t,n}angular.module("google.books").provider("googleBooksApi",e)}(),function(){"use strict";function e(e,t,n,o){function r(e){return"auto"===e.transport?"//www.google.com/books/api.js?":e.transport+"://www.google.com/books/api.js?"}function i(e){var n=["transport","preventLoad","randomizedFunctionName"],i=o.map(o.omit(e,n),function(e,t){return t+"="+e});if(u){var a=t.getElementById(u);a.parentNode.removeChild(a)}else u="gbooks_load_"+Math.round(1e3*Math.random());i=i.join("&"),angular.element("<script>",{id:u,type:"text/javascript",src:r(e)+i}).appendTo(angular.element("body"))}function a(){return angular.isDefined(e.google)&&angular.isDefined(e.google.books)}function l(t){var o=n.defer();if(a())return o.resolve(e.google.books),o.promise;var r="onGoogleBooksReady"+Math.round(1e3*Math.random());return t.callback=r,e[r]=function(){e[r]=null,o.resolve(e.google.books)},t.preventLoad||i(t),d=t,d.randomizedFunctionName=r,o.promise}function s(){var t=d;a()?e[t.randomizedFunctionName]&&e[t.randomizedFunctionName]():i(t)}var u=void 0,d=void 0;return{load:l,manualLoad:s}}e.$inject=["$window","$document","$q","_"],angular.module("google.books").factory("googleBooksScriptLoader",e)}(),function(){"use strict";function e(e,t){function n(n,o){t.load(),e.then(function(e){var t=new e.DefaultViewer(o.get(0));n.$watch("properties",function(e){t.load(e.id)}),n.$on("resize",function(){t.resize()})})}var o={restrict:"E",link:n,scope:{properties:"="}};return o}e.$inject=["googleBooksApi","googleBooksApiManualLoader"],angular.module("google.books").directive("googleBookReader",e)}(),function(){"use strict";function e(e){function t(){e.manualLoad()}var n={};return n.load=t,n}e.$inject=["googleBooksScriptLoader"],angular.module("google.books").service("googleBooksApiManualLoader",e)}(),function(){"use strict";angular.module("sdaAdminWeb",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcBio","trcReln","trcWorks","ngDragDrop","pouchdb","vwise"])}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("sdaAdminWeb").run(e)}(),function(){"use strict";function e(e,t){e.state("vwise",{url:"/",templateUrl:"app/vwise/workspace.html",controller:"WorkspaceController",controllerAs:"vm"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaAdminWeb").config(e)}(),function(){"use strict";angular.module("sdaAdminWeb").constant("_",_).constant("moment",moment)}(),function(){"use strict";function e(e,t,n,o,r){e.debugEnabled(!0),t.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",
700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),t.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),t.theme("default").primaryPalette("darkBrown").accentPalette("copper"),n.url="/api/catalog/works",o.url="/api/catalog/people",r.url="/api/catalog/relationships"}e.$inject=["$logProvider","$mdThemingProvider","worksRepoProvider","peopleRepoProvider","relationshipsRepoProvider"],angular.module("sdaAdminWeb").config(e)}(),angular.module("sdaAdminWeb").run(["$templateCache",function(e){e.put("app/trc-bio/event-editor.html",'<div class=form-group><label class=control-label for=event-title>Title</label><input type=text id=event-title name=event-title class="form-control event-title" ng-model=event.title></div><div class=form-group><label class=control-label for=event-description>Description</label><textarea id=event-description name=event-description class="form-control event-description" ng-model=event.description></textarea></div><div class=form-group><label class=control-label for=event-location>Location</label><input type=text id=event-location name=event-location class="form-control event-location" ng-model=event.location></div><div class=form-group><label class=control-label for=event-date>Date</label><input type=text id=event-date name=event-date class="form-control event-date" ng-model=event.date.description><!-- TODO add datepicker --></div>'),e.put("app/trc-bio/name-editor.html",'<div class=form-group class=name-role><label class=control-label for=name-role>Role</label><select id=name-role name=name-role class="form-control name-role" ng-model=name.role><option ng-repeat="role in nameEditor.roles" value={{role.value}}>{{role.label}}</option></select></div><div class=form-group class=name-structure><label class=control-label>Structured Name</label><input type=text class=name-title placeholder=title ng-model=name.title> <input type=text class=name-given placeholder=given ng-model=name.givenName> <input type=text class=name-middle placeholder=middle ng-model=name.middleName> <input type=text class=name-family placeholder=family ng-model=name.familyName> <input type=text class=name-suffix placeholder=suffix ng-model=name.suffix></div><div class=form-group class=name-label><label for=label>Display Label</label><input type=text placeholder=label ng-model=name.label></div>'),e.put("app/trc-bio/person-editor.html",'<div class=form-group><label for=person-name>Primary Name</label><trc-name-editor id=person-name ng-model=person.name></trc-name-editor></div><div class=form-group><label for=person-altnames>Alternate Names</label><div ng-repeat="name in person.altNames"><trc-name-editor id=person-altnames ng-model=name></trc-name-editor><button ng-click=personEditor.removeName($index)>&minus;</button></div><button ng-click=personEditor.addName()>+</button></div><div class=form-group><label for=person-birth>Birth</label><div ng-if=person.birth><trc-event-editor id=person-birth ng-model=person.birth></trc-event-editor><button ng-click="personEditor.removeEvent(\'birth\')">&minus;</button></div><div ng-if=!person.birth><button ng-click="personEditor.addEvent(\'birth\')">+</button></div></div><div class=form-group><label for=person-death>Death</label><div ng-if=person.death><trc-event-editor id=person-death ng-model=person.death></trc-event-editor><button ng-click="personEditor.removeEvent(\'death\')">&minus;</button></div><div ng-if=!person.death><button ng-click="personEditor.addEvent(\'death\')">+</button></div></div><div class=form-group><label class=control-label for=person-summary>Summary</label><textarea id=person-summary name=person-summary class="form-control person-summary" ng-model=person.summary></textarea></div>'),e.put("app/vwise/workspace.html",'<div layout=column flex><md-toolbar><div class=md-toolbar-tools><md-button class="md-accent md-icon-button" ng-click=vm.openMenu() title="toggle menu" hide-gt-sm><md-icon>menu</md-icon></md-button><img class=logo src=assets/images/sda-logo-light.png><h2><span>Visual Workspace</span></h2></div></md-toolbar><div layout=row flex><md-sidenav md-component-id=left class=md-sidenav-left layout=column md-is-locked-open=vm.sidebarFocused><form layout=row flex=none><md-input-container flex><label for=searchQuery>Search</label><md-icon>search</md-icon><input type=search name=searchQuery id=searchQuery ng-model=vm.searchQuery ng-change=vm.search(vm.searchQuery) required md-sidenav-focus></md-input-container></form><md-content flex><div ng-if=vm.loading layout=row layout-align=center><md-progress-circular md-mode=indeterminate></md-progress-circular></div><div ng-if="!vm.loading &amp;&amp; vm.peopleResults &amp;&amp; vm.peopleResults.items.length == 0 &amp;&amp; vm.worksResults &amp;&amp; vm.worksResults.items.length == 0" layout=row layout-padding><p>No results for "{{vm.searchQuery}}".</p></div><div ng-if="!vm.loading &amp;&amp; vm.peopleResults &amp;&amp; vm.peopleResults.items.length > 0"><md-subheader>People</md-subheader><md-list><md-list-item ng-repeat="item in vm.peopleResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text><span>{{item.label}}</span></div></md-list-item></md-list></div><div ng-if="!vm.loading &amp;&amp; vm.worksResults &amp;&amp; vm.worksResults.items.length > 0"><md-subheader>Works</md-subheader><md-list><md-list-item ng-repeat="item in vm.worksResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text><span>{{item.label}}</span></div></md-list-item></md-list></div></md-content></md-sidenav><vwise-workspace workspace=vm.workspace flex layout=column></vwise-workspace></div></div>'),e.put("app/vwise/components/panel/panel.html",'<div class=panel ng-class="{ resizing: vm.resizing }" ng-style="{ left: vp.xPosition, top: vp.yPosition, zIndex: vp.zPosition, width: vp.width, height: vp.height }" jqyoui-draggable="{ onDrag: \'vm.movePanel()\', onStop: \'vm.stopMove()\' }" ng-click=vm.activatePanel($event) data-jqyoui-options="{ handle: \'.drag-handle\' }" data-drag=true layout=column><div class="panel-control drag-handle" layout=column layout-align="center center"><md-icon>open_with</md-icon></div><button class="panel-control close" ng-click=vm.closePanel($event) layout=column layout-align="center center"><md-icon>close</md-icon></button><div class="panel-control resize-handle" ng-style="{ left: vp.width, top: vp.height }" jqyoui-draggable="{ onStart: \'vm.startResize()\', onDrag: \'vm.resizePanel()\', onStop:\'vm.stopResize()\'}" data-drag=true layout=column layout-align="center center"><md-icon>crop</md-icon></div><div class="panel-control panel-area panel-area-top" layout=row layout-align="end center"><button ng-repeat="button in vm.actionButtons" ng-click=button.handler($event) title={{button.label}} layout=column layout-align="center center"><md-icon ng-if=button.icon>{{button.icon}}</md-icon><span ng-if=!button.icon>{{button.label}}</span></button></div><div class="panel-control panel-area panel-area-right" layout=column layout-align="start center"><button ng-repeat="button in vm.propertyButtons" ng-click=button.handler($event) title={{button.label}} layout=column layout-align="center center"><md-icon ng-if=button.icon>{{button.icon}}</md-icon><span ng-if=!button.icon>{{button.label}}</span></button></div><div class="panel-control panel-area panel-area-bottom"></div><div class="panel-control panel-area panel-area-left"></div><div class=content flex layout=column></div></div>'),e.put("app/vwise/components/person-panel/person-panel.html",'<div class=panel-person flex layout=column><h1><span class="panel-label name">{{name}}</span></h1><md-tabs flex><md-tab ng-if=person.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=person.summary></div></md-tab-body></md-tab><md-tab ng-if="panel.works &amp;&amp; panel.works.length > 0"><md-tab-label><md-icon>content_copy</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in panel.works" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.label}}</div></md-list-item></md-list></md-tab-body></md-tab><md-tab ng-if="panel.relatedPeople &amp;&amp; panel.relatedPeople.length > 0"><md-tab-label><md-icon>link</md-icon></md-tab-label><md-tab-body><div ng-repeat="group in panel.relatedPeople"><h3>{{group.label}}</h3><md-list><md-list-item ng-repeat="item in group.relationships" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.name.label}}</div></md-list-item></md-list></div></md-tab-body></md-tab></md-tabs></div>'),e.put("app/vwise/components/work-panel/edition-panel.html",'<div class=panel-edition flex layout=column><h1><span class=authors><span class=author ng-repeat="author in edition.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span></h1><md-tabs flex><md-tab ng-if=edition.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=edition.summary></div></md-tab-body></md-tab><md-tab ng-if="edition.volumes.length > 0"><md-tab-label><md-icon>content_copy</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in edition.volumes" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>Volume {{item.volumeNumber}} ({{item.publicationInfo.date.description}})</div></md-list-item></md-list></md-tab-body></md-tab><md-tab ng-if="edition.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in edition.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),e.put("app/vwise/components/work-panel/volume-panel.html",'<div class=panel-volume flex layout=column><h1><span class=authors><span class=author ng-repeat="author in volume.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span> <span class=volume-name>Volume {{volume.volumeNumber}}.</span></h1><md-tabs flex><md-tab ng-if=volume.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=volume.summary></div></md-tab-body></md-tab><md-tab ng-if="volume.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in volume.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),e.put("app/vwise/components/work-panel/work-panel.html",'<div class=panel-work flex layout=column><h1><span class=panel-label><span class=authors><span class=author ng-repeat="author in work.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span></span></h1><md-tabs flex><md-tab ng-if=work.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=work.summary></div></md-tab-body></md-tab><md-tab><md-tab-label><md-icon>link</md-icon></md-tab-label><md-tab-body><div ng-repeat="group in relationships"><h3>{{group.label}}</h3><md-list><div ng-repeat="relationship in group.relationships"><md-list-item ng-repeat="item in relationship.entities" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text><span class=authors><span class=author ng-repeat="author in item.entity.authors">{{author.lastName}}.</span></span> <span class=title>{{item.title.title}}{{item.title.subtitle ? \': \' : \'\'}}<span ng-if=item.title.subtitle class=subtitle>{{item.title.subtitle}}</span></span></div></md-list-item></div></md-list></div></md-tab-body></md-tab><md-tab ng-if="work.editions.length > 0"><md-tab-label><md-icon>content_copy</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in work.editions" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.editionName}} ({{item.publicationInfo.date.description}})</div></md-list-item></md-list></md-tab-body></md-tab><md-tab ng-if="work.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in work.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),e.put("app/vwise/components/workspace/workspace.html",'<div flex jqyoui-droppable="{stack: true, onDrop:\'vm.thingDropped()\'}" data-drop=true class=workspace ng-click=vm.workspaceClicked($event)><vwise-panel ng-repeat="panel in workspace.panels track by panel.id" panel=panel></vwise-panel></div>')}]);
//# sourceMappingURL=../maps/scripts/app-af55b4ea08.js.map
