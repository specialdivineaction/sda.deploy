!function(){"use strict";angular.module("sdaLibrary",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcBiblio","trcBio","trcRefs"])}(),function(){"use strict";function e(e,t){var o=this;e.$watch("$ctrl.title",function(e){angular.isArray(e)&&(o.title=t.getTitle(e))})}e.$inject=["$scope","worksRepo"],angular.module("sdaLibrary").component("workTitle",{templateUrl:"app/components/work-title/work-title.html",bindings:{title:"<"},controller:e})}(),function(){"use strict";angular.module("sdaLibrary").component("workAuthors",{templateUrl:"app/components/work-authors/work-authors.html",bindings:{authors:"<"}})}(),function(){"use strict";function e(){function e(e,t,i){t===o&&e.slideUp(i)}function t(e,t,i){t===o&&e.hide().slideDown(i)}var o="ng-hide";return{beforeAddClass:e,removeClass:t}}angular.module("sdaLibrary").animation(".slide",e)}(),function(){"use strict";function e(e){function t(t){var o=t?[t.title,t.givenName,t.middleName,t.familyName,t.suffix]:[];return e.filter(o).join(" ")}return t}e.$inject=["_"],angular.module("sdaLibrary").filter("personName",e)}(),function(){"use strict";angular.module("sdaLibrary").component("personName",{templateUrl:"app/components/person-name/person-name.html",bindings:{name:"<"}})}(),function(){"use strict";angular.module("sdaLibrary").component("dateLocation",{templateUrl:"app/components/date-location/date-location.html",bindings:{event:"<"}})}(),function(){"use strict";function e(e,t){var o=this;o.person=e,o.relatedWorks=t}e.$inject=["person","relatedWorks"],angular.module("sdaLibrary").controller("PersonController",e)}(),function(){"use strict";function e(e,t,o,i){function n(){}function a(e){r.peopleLoading=!0,r.peopleResults=i.search(e),r.peopleResults.$promise.then(function(){r.peopleLoading=!1},function(){r.peopleLoading=!1,r.peopleResults=null,t.showSimple("Failed to load search results")})}function s(e){r.booksLoading=!0,r.booksResults=o.search(e),r.booksResults.$promise.then(function(){r.booksLoading=!1},function(){r.booksLoading=!1,r.booksResults=null,t.showSimple("Failed to load search results")})}function l(t){e(t).toggle()}var r=this;r.toggleSidenav=l,r.searchPeople=a,r.peopleLoading=!1,r.peopleResults=null,r.searchBooks=s,r.booksLoading=!1,r.booksResults=null,n()}e.$inject=["$mdSidenav","$mdToast","worksRepo","peopleRepo"],angular.module("sdaLibrary").controller("LibraryController",e)}(),function(){"use strict";function e(e,t){var o=this;o.work=e,o.title=t.getTitle(e.titles)}e.$inject=["work","worksRepo"],angular.module("sdaLibrary").controller("BookController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("sdaLibrary").run(e)}(),function(){"use strict";function e(e,t){e.state("library",{url:"/",templateUrl:"app/library/library.html",controller:"LibraryController",controllerAs:"vm"}).state("library.person",{url:"people/:id",templateUrl:"app/person/person.html",controller:"PersonController",controllerAs:"vm",resolve:{person:["$stateParams","peopleRepo",function(e,t){var o=t.get(e.id);return o.$promise}],relatedWorks:["$stateParams","worksRepo",function(e,t){var o=t.searchByAuthor(e.id);return o.$promise.then(function(e){return e.items})}]}}).state("library.book",{url:"books/:id",templateUrl:"app/book/book.html",controller:"BookController",controllerAs:"vm",resolve:{work:["$stateParams","worksRepo",function(e,t){var o=t.get(e.id);return o.$promise}]}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaLibrary").config(e)}(),function(){"use strict";angular.module("sdaLibrary")}(),function(){"use strict";function e(e,t,o,i){e.debugEnabled(!0),o.url="/api/catalog/works",i.url="/api/catalog/people",t.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),t.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),t.theme("default").primaryPalette("darkBrown").accentPalette("copper")}e.$inject=["$logProvider","$mdThemingProvider","worksRepoProvider","peopleRepoProvider"],angular.module("sdaLibrary").config(e)}(),angular.module("sdaLibrary").run(["$templateCache",function(e){e.put("app/book/book.html",'<md-content layout=column layout-padding><div flex><h1 class=md-display-1><work-title title=vm.title></work-title></h1><p ng-if="vm.work.authors && vm.work.authors.length > 0">by<work-authors authors=vm.work.authors></work-authors></p><section class=summary ng-if=vm.work.summary ng-bind-html=vm.work.summary></section><section ng-if="vm.work.editions && vm.work.editions.length > 0"><h2 class=md-title>Editions</h2><div ng-repeat="edition in vm.work.editions"><md-toolbar class=md-hue-3><div class=md-toolbar-tools><md-button class=md-icon-button ng-click="edition.active = !edition.active" aria-label="toggle details"><md-icon>expand_{{edition.active ? \'less\' : \'more\'}}</md-icon></md-button><h3>{{edition.editionName || \'[Untitled Edition]\'}}</h3><span flex></span><md-button class=md-icon-button ng-if="edition.copies && edition.copies.length > 0" ng-href="/book-reader/#/{{vm.work.id}}/{{edition.copies[0].id}}?editionId={{edition.id}}"><md-icon>book</md-icon><md-tooltip>Read Online</md-tooltip></md-button></div></md-toolbar><div class=slide ng-show=edition.active><p><work-authors class=authors authors=edition.authors></work-authors><work-title class=title title=edition.titles></work-title><span class=edition>{{edition.editionNumber}}</span> <span class=volume ng-if=volume>{{volume.volumeNumber}}</span> <span class=pubinfo ng-if="edition.publicationInfo.place || edition.publicationInfo.publisher || edition.publicationInfo.date.description">(<span class=place ng-if=edition.publicationInfo.place>{{edition.publicationInfo.place}},</span> <span class=publisher ng-if=edition.publicationInfo.publisher>{{edition.publicationInfo.publisher}}.</span> <time class=date ng-if=edition.publicationInfo.date.description datetime={{edition.publicationInfo.date.calendar}}>{{edition.publicationInfo.date.description}}</time>)</span></p><section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section><section ng-if="edition.volumes && edition.volumes.length > 0"><h4 class=md-title>Volumes</h4><div ng-repeat="volume in edition.volumes"><md-toolbar class=md-hue-3><div class=md-toolbar-tools><md-button class=md-icon-button ng-click="volume.active = !volume.active" aria-label="toggle details"><md-icon>expand_{{volume.active ? \'less\': \'more\'}}</md-icon></md-button><h5>Volume {{volume.volumeNumber}}</h5></div></md-toolbar><div class=slide ng-show=volume.active><p><work-authors class=authors authors=edition.authors></work-authors><work-title class=title title=edition.titles></work-title><span class=edition>{{edition.editionNumber}}</span> <span class=volume ng-if=volume>{{volume.volumeNumber}}</span> <span class=pubinfo ng-if="edition.publicationInfo.place || edition.publicationInfo.publisher || edition.publicationInfo.date.description">(<span class=place ng-if=edition.publicationInfo.place>{{edition.publicationInfo.place}},</span> <span class=publisher ng-if=edition.publicationInfo.publisher>{{edition.publicationInfo.publisher}}.</span> <time class=date ng-if=edition.publicationInfo.date.description datetime={{edition.publicationInfo.date.calendar}}>{{edition.publicationInfo.date.description}}</time>)</span></p><section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section></div></div></section></div></div></section><section ng-if="vm.relationships && vm.relationships.length > 0"><h2 class=md-title>Related Works</h2><md-list><md-list-item ng-repeat="relationship in vm.relationships"><!-- TODO: show relationships --></md-list-item></md-list></section></div></md-content>'),e.put("app/library/library.html",'<md-toolbar class=layout-navbar><div class=md-toolbar-tools><md-button class="md-accent md-icon-button" ng-click="vm.toggleSidenav(\'left\')" hide-gt-sm><md-icon>menu</md-icon></md-button><a class=logo href=/ ><img src=/assets/images/sda-logo-light.png alt=SDA></a><h1><a ui-sref=library>Library</a></h1></div></md-toolbar><main layout=row layout-align=center flex><md-sidenav md-component-id=left class=md-sidenav-left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column><md-tabs md-stretch-tabs=always flex><md-tab label=People><div layout=column><div layout=row flex=none><md-input-container flex><label>search people</label><md-icon>search</md-icon><input type=search ng-model=peopleQuery ng-model-options="{debounce: 500}" ng-change=vm.searchPeople(peopleQuery)></md-input-container></div><div layout=row ng-if=vm.peopleLoading layout-align="center center" flex><md-progress-circular md-mode=indeterminate></md-progress-circular></div><md-content ng-if="!vm.peopleLoading && vm.peopleResults" flex><md-list><md-list-item class=md-2-line ng-repeat="person in vm.peopleResults.items" ui-sref=".person({id: person.id})"><div class=md-list-item-text><h3>{{person.label}}</h3><p>{{person.summaryExcerpt}}</p></div></md-list-item></md-list></md-content></div></md-tab><md-tab label=Books><div layout=column><div layout=row flex=none><md-input-container flex><label>search books</label><md-icon>search</md-icon><input type=search ng-model=booksQuery ng-model-options="{debounce: 500}" ng-change=vm.searchBooks(booksQuery)></md-input-container></div><div layout=row ng-if=vm.peopleLoading layout-align="center center" flex><md-progress-circular md-mode=indeterminate></md-progress-circular></div><md-content ng-if="!vm.booksLoading && vm.booksResults" flex><md-list><md-list-item class=md-2-line ng-repeat="book in vm.booksResults.items" ui-sref=".book({id: book.id})"><div class=md-list-item-text><h3>{{book.label}}</h3><p>{{book.summaryExcerpt}}</p></div></md-list-item></md-list></md-content></div></md-tab></md-tabs></md-sidenav><div layout=column flex ui-view><md-content flex layout=row layout-padding><section flex=66><h1>Overview</h1><p>Scholarship on Special Divine Action is in practice dominated by a tiny handful of historical texts, like a few islands emerging from a submerged landscape of connected ideas. The SDA library reveals this landscape. The library contains around two thousand key texts by more than a thousand authors, together with biographies, summaries and relationships to assist scholars and students to explore their ideas, debates, and influences.</p><p>This collection focuses on the period from the rise of early modern science, through the Deist and Enlightenment debates, and into early modernism. This period sets the stage for contemporary conflict narratives that pit science against religion, or the arts, or the humanities generally, as well as the range of positions held today.</p><h1>Tools</h1><div class=tools layout=row layout-align=center><a href=/concept-browser><md-card><img src=/assets/images/tile-concept-browser.png class=md-card-image><md-card-content><h3>Concept Browser</h3></md-card-content></md-card></a><a href=/vwise><md-card><img src=/assets/images/tile-vwise.png class=md-card-image><md-card-content><h3>Visual Workspace</h3></md-card-content></md-card></a></div></section><aside flex=33><h2>Starting Points</h2><md-list><md-list-item ng-repeat="book in vm.items"><p><em>Title</em> by Author</p></md-list-item></md-list></aside></md-content></div></main>'),e.put("app/person/person.html",'<md-content layout=row layout-padding flex><div flex=66><h1 class=md-display-1>{{vm.person.name.label}}</h1><div ng-if=vm.person.summary ng-bind-html=vm.person.summary></div><p ng-if=!vm.person.summary>Summary not available.</p></div><aside flex=33><div ng-if="(vm.person.name | personName) != vm.person.name.label"><h3 class=md-title>Full name</h3><person-name name=vm.person.name></person-name></div><div ng-if=vm.person.birth><h3 class=md-title>Born</h3><date-location event=vm.person.birth></date-location></div><div ng-if=vm.person.death><h3 class=md-title>Died</h3><date-location event=vm.person.death></date-location></div><div ng-if="vm.person.names.length > 0"><h3 class=md-title>Other Names</h3><ul><li ng-repeat="name in vm.person.altNames"><span class=display>{{name.label}}</span> <span class=full ng-if="(name | personName) != name.label">(<person-name ng-model=name></person-name>)</span></li></ul></div><div ng-if="vm.relatedWorks && vm.relatedWorks.length > 0"><h3 class=md-title>Books</h3><md-list><md-list-item ui-sref="^.book({id: work.id})" ng-repeat="work in vm.relatedWorks"><p>{{work.label}}</p></md-list-item></md-list></div></aside></md-content>'),e.put("app/components/date-location/date-location.html","<time class=date ng-if=$ctrl.event.date datetime={{$ctrl.event.date.calendar}}>{{$ctrl.event.date.description}}</time> <span class=location ng-if=$ctrl.event.location>in {{$ctrl.event.location}}</span><div ng-if=$ctrl.event.description ng-bind-html=$ctrl.event.description></div>"),e.put("app/components/person-name/person-name.html","<span class=prefix ng-if=$ctrl.name.title>{{$ctrl.name.title}}</span> <span class=first ng-if=$ctrl.name.givenName>{{$ctrl.name.givenName}}</span> <span class=middle ng-if=$ctrl.name.middleName>{{$ctrl.name.middleName}}</span> <span class=last ng-if=$ctrl.name.familyName>{{$ctrl.name.familyName}}</span> <span class=suffix ng-if=$ctrl.name.suffix>{{$ctrl.name.suffix}}</span>"),e.put("app/components/work-authors/work-authors.html","<span class=author ng-repeat=\"author in $ctrl.authors\"><a ui-sref=\"library.person({id: author.authorId})\">{{author.firstName}} {{author.lastName}}</a>{{$last ? '' : ',' }}</span>"),e.put("app/components/work-title/work-title.html","<span class=title ng-if=$ctrl.title.title>{{$ctrl.title.title}}</span>{{ $ctrl.title.title && $ctrl.title.subtitle ? ': ' : ''}}<span class=subtitle ng-if=$ctrl.title.subtitle>{{$ctrl.title.subtitle}}</span>")}]);