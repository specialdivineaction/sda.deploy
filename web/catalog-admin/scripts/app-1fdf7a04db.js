!function(){"use strict";angular.module("sdaAdminWeb",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ckeditor","ngMaterial","ngDragDrop","slideToggle","trcWorks","trcTasks","trcBio","trcReln","trcArticles","vwise"])}(),function(){"use strict";function t(){function t(t,e,o){function n(){t.work.editions.forEach(function(t){r.editions.push({model:t,focused:!1})})}function i(){var n=e.createEdition();n.titles=o.cloneDeep(t.work.titles),n.authors=o.cloneDeep(t.work.authors),n.otherAuthors=o.cloneDeep(t.work.otherAuthors),t.work.editions.push(n),r.editions.push({model:n,focused:!0})}function a(e){r.editions.splice(e,1),t.work.editions.splice(e,1)}var r=this;r.editions=[],r.createEdition=i,r.deleteEdition=a,n()}t.$inject=["$scope","worksRepo","_"];var e={restrict:"E",templateUrl:"app/work/components/work-editor/work-editor.html",scope:{work:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdminWeb").directive("workEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/volume-editor/volume-editor.html",scope:{volume:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("volumeEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/title-editor/title-editor.html",scope:{title:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("titleEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/publication-info-editor/publication-info-editor.html",scope:{pubInfo:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("publicationInfoEditor",t)}(),function(){"use strict";function t(){function t(t,e,o){function n(){t.edition.volumes.forEach(function(t){r.volumes.push({model:t,focused:!1})})}function i(){var n=e.createVolume();n.titles=o.cloneDeep(t.edition.titles),n.authors=o.cloneDeep(t.edition.authors),n.otherAuthors=o.cloneDeep(t.edition.otherAuthors),n.publicationInfo=o.cloneDeep(t.edition.publicationInfo),t.edition.volumes.push(n),r.volumes.push({model:n,focused:!0})}function a(e){r.volumes.splice(e,1),t.edition.volumes.splice(e,1)}var r=this;r.volumes=[],r.createVolume=i,r.deleteVolume=a,n()}t.$inject=["$scope","worksRepo","_"];var e={restrict:"E",templateUrl:"app/work/components/edition-editor/edition-editor.html",scope:{edition:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdminWeb").directive("editionEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/work/components/copy-editor/copy-editor.html",scope:{copy:"=ngModel"},controller:e,controllerAs:"vm"};return t}function e(t){function e(){a(n()),a(i()),a(o())}function a(t){l.refHandlers[t.id]=t}function r(e,o){l.refHandlers[e]&&(t.copy.properties=l.refHandlers[e](o)),t.copyForm.url.$setValidity(e,null!=t.copy.properties)}var l=this;l.refHandlers={},l.setProperties=r,e()}function o(){function t(t){var o=a(t);if(!o)return null;var n,i=o.path.substr(o.path.lastIndexOf("/")+1),r=o.fragment.match(/page\/([^\/]+)/);return r&&r.length>=2&&(n=r[1]),e(o.toString(),i,n)}function e(t,e,o){return e?{src:t,id:e,seq:o}:null}return t.id="internetarchive",t.display="Internet Archive",t}function n(){function t(t){var e=a(t);if(!e)return null;var o,n;switch(e.hostname){case"babel.hathitrust.org":o=e.query.id,n=e.query.seq;break;case"hdl.handle.net":if(o=e.path.substr(e.path.lastIndexOf("/")+1),!e.query.urlappend)break;var i=r(e.query.urlappend);if(!i)break;n=i.seq}return o?{htid:o,seq:n}:null}return t.id="hathitrust",t.display="HathiTrust",t}function i(){function t(t){var e=a(t);if(!e)return null;switch(e.hostname){case"books.google.com":var o=e.query.id,n=e.query.printsec,i=e.query.pg}return o?{id:o,section:n,page:i}:null}return t.id="googlebooks",t.display="Google Books",t}function a(t){if(!t)return null;var e=document.createElement("a");return e.href=t,{toString:function(){return t},protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,path:e.pathname,query:r(e.search),fragment:e.hash}}function r(t,e){if(!t||!angular.isString(t))return{};if("?"===t[0]&&(t=t.substr(1)),!e){var o=(t.indexOf(";")>=0?1:0)+(t.indexOf("&")>=0?2:0);e=1===o?";":"&"}var n={},i=t.split(e);return i.forEach(function(t){var e=t.indexOf("="),o=t,i=null;if(o){e>=0&&(o=t.substr(0,e),i=t.substr(e+1));try{o=decodeURIComponent(o),i=decodeURIComponent(i)}catch(a){return}n.hasOwnProperty(o)?angular.isArray(n[o])?n[o].push(i):n[o]=[n[o],i]:n[o]=i}}),n}e.$inject=["$scope"],angular.module("sdaAdminWeb").directive("copyEditor",t)}(),function(){"use strict";function t(){function t(t,e){function o(){if(t.ref.authorId){var o=e.get(t.ref.authorId);o.$promise.then(function(){a.linkAuthorSearchText=o.name.label})}}function n(e){t.ref.authorId=e.id}function i(t){var o=e.search(t);return o.$promise.then(function(){return o.items})}var a=this;a.linkAuthorSearchText="",a.authorRoles=["author","editor","translator","other"],a.setLinkedAuthor=n,a.getResults=i,o()}t.$inject=["$scope","peopleRepo"];var e={restrict:"E",templateUrl:"app/work/components/author-ref-editor/author-ref-editor.html",scope:{ref:"=ngModel"},controller:t,controllerAs:"vm"};return e}angular.module("sdaAdminWeb").directive("authorRefEditor",t)}(),function(){"use strict";angular.module("vwise",["google.books","cfp.hotkeys","trcWorks","trcBio"])}(),function(){"use strict";function t(t){function o(t,e,o){return new n(t,i.url,e,o)}o.$inject=["panelContentMediatorRegistry","$http","$q"];var n=e(t),i={url:"/api/vwise",$get:o};return i}function e(t){function e(e,o,n,i){t.WorkspaceRepository.call(this,e),this.$http=n,this.$q=i,this.url=o,this.workspaces=new t.Cache,this.panels=new t.Cache}return e.prototype=Object.create(t.WorkspaceRepository.prototype),e.prototype.createWorkspace=function(e){var o=t.UUID.uuid4(),n=new t.Workspace(o,this);return e&&(n.title=e),this.workspaces[n.id]=n,this.$q.when(n)},e.prototype.saveWorkspace=function(e){if(!(e instanceof t.Workspace))throw new TypeError("expected instance of Workspace");return this.workspaces[e.id]=e,this.$q.when(e)},e.prototype.getWorkspace=function(t){return this.workspaces[t]?this.$q.when(this.workspaces[t]):this.$q.reject(new Error("workspace not found"))},e.prototype.createPanel=function(e,o,n){var i=t.UUID.uuid4(),a=this,r=new t.Panel(i,e,o,n,function(t){a.savePanel(t)});return this.panels[r.id]=r,this.$q.when(r)},e.prototype.savePanel=function(e){if(!(e instanceof t.Panel))throw new TypeError("expected instance of Panel");return this.panels[e.id]=e,this.$q.when(e)},e.prototype.getPanel=function(t,e){return this.panels[e]?this.$q.when(this.panels[e]):this.$q.reject(new Error("panel not found"))},e}t.$inject=["vwise"],angular.module("vwise").provider("workspaceRepository",t)}(),function(){"use strict";function t(t){function e(e){e.title=t.getTitle(e.work.titles),e.work.editions.forEach(function(t){t.type="edition",t.workId=e.work.id})}var o={restrict:"E",templateUrl:"app/vwise/components/work-panel/work-panel.html",scope:{work:"="},link:e};return o}t.$inject=["worksRepo"],angular.module("vwise").directive("workPanel",t)}(),function(){"use strict";function t(t){function e(e){e.title=t.getTitle(e.volume.titles),e.edition=t.getEdition(e.workId,e.editionId)}var o={restrict:"E",templateUrl:"app/vwise/components/work-panel/volume-panel.html",scope:{volume:"=",workId:"@",editionId:"@"},link:e};return o}t.$inject=["worksRepo"],angular.module("vwise").directive("volumePanel",t)}(),function(){"use strict";function t(t){function e(e){e.title=t.getTitle(e.edition.titles),e.edition.volumes.forEach(function(t){t.type="volume",t.workId=e.workId,t.editionId=e.edition.id})}var o={restrict:"E",templateUrl:"app/vwise/components/work-panel/edition-panel.html",scope:{edition:"=",workId:"@"},link:e};return o}t.$inject=["worksRepo"],angular.module("vwise").directive("editionPanel",t)}(),function(){"use strict";function t(t){function o(o){var n=o.person.name;o.name=n.label||t.at(n,e).map(function(t){return t.trim()}).filter(t.identity).join(" ")}var n={restrict:"E",templateUrl:"app/vwise/components/person-panel/person-panel.html",scope:{person:"="},link:o};return n}t.$inject=["_"],angular.module("vwise").directive("personPanel",t);var e=["title","givenName","middleName","familyName","suffix"]}(),function(){"use strict";function t(t,e){function o(){t.PanelContentMediator.call(this,"works","Works Content Mediator")}function n(t){var o=e.get(t);return o.$promise}return o.prototype=Object.create(t.PanelContentMediator.prototype),o.prototype.matches=function(t){return t.type&&"work"===t.type&&t.id},o.prototype.initPanelData=function(t){return n(t.id)},o.prototype.unmarshall=function(t){return n(t.id)},o.prototype.marshall=function(t){var e={type:"work",id:t.id};return e},o.prototype.getTemplate=function(){return'<work-panel work="content" flex layout="column"></work-panel>'},new o}t.$inject=["vwise","worksRepo"],angular.module("vwise").factory("worksContentMediator",t)}(),function(){"use strict";function t(t,e){function o(){t.PanelContentMediator.call(this,"volumes","Volumes Content Mediator")}function n(t,o,n){var i=e.getVolume(t,o,n);return i.$promise.then(function(){return i.workId=t,i.editionId=o,i})}return o.prototype=Object.create(t.PanelContentMediator.prototype),o.prototype.matches=function(t){return t.type&&"volume"===t.type&&t.id&&t.workId&&t.editionId},o.prototype.initPanelData=function(t){return n(t.workId,t.editionId,t.id)},o.prototype.unmarshall=function(t){return n(t.workId,t.editionId,t.id)},o.prototype.marshall=function(t){var e={type:"volume",id:t.id,workId:t.workId,editionId:t.editionId};return e},o.prototype.getTemplate=function(){return'<volume-panel volume="content" edition-id="{{content.editionId}}" work-id="{{content.workId}}" flex layout="column"></volume-panel>'},new o}t.$inject=["vwise","worksRepo"],angular.module("vwise").factory("volumesContentMediator",t)}(),function(){"use strict";function t(t,e){function o(){t.PanelContentMediator.call(this,"people","People Content Mediator")}function n(t){var o=e.get(t);return o.$promise}return o.prototype=Object.create(t.PanelContentMediator.prototype),o.prototype.matches=function(t){return t.type&&"person"===t.type&&t.id},o.prototype.initPanelData=function(t){return n(t.id)},o.prototype.unmarshall=function(t){return n(t.id)},o.prototype.marshall=function(t){var e={type:"person",id:t.id};return e},o.prototype.getTemplate=function(){return'<person-panel person="content" flex layout="column"></person-panel>'},new o}t.$inject=["vwise","peopleRepo"],angular.module("vwise").factory("peopleContentMediator",t)}(),function(){"use strict";function t(t){function e(){t.PanelContentMediator.call(this,"passthru","Pass-Through Debug Mediator")}return e.prototype=Object.create(t.PanelContentMediator.prototype),e.prototype.matches=function(){return!0},new e}t.$inject=["vwise"],angular.module("vwise").factory("passthruContentMediator",t)}(),function(){"use strict";function t(t){return new t.PanelContentMediatorRegistry}t.$inject=["vwise"],angular.module("vwise").factory("panelContentMediatorRegistry",t)}(),function(){"use strict";function t(t){function e(){t.PanelContentMediator.call(this,"notes","Note Content Mediator")}return e.prototype=Object.create(t.PanelContentMediator.prototype),e.prototype.matches=function(t){return t.hasOwnProperty("note")},e.prototype.getTemplate=function(){return'<div ng-model="content.note" contenteditable flex></div>'},new e}t.$inject=["vwise"],angular.module("vwise").factory("noteContentMediator",t)}(),function(){"use strict";function t(t,e){function o(){t.PanelContentMediator.call(this,"editions","Editions Content Mediator")}function n(t,o){var n=e.getEdition(t,o);return n.$promise.then(function(){return n.workId=t,n})}return o.prototype=Object.create(t.PanelContentMediator.prototype),o.prototype.matches=function(t){return t.type&&"edition"===t.type&&t.id&&t.workId},o.prototype.initPanelData=function(t){return n(t.workId,t.id)},o.prototype.unmarshall=function(t){return n(t.workId,t.id)},o.prototype.marshall=function(t){var e={type:"edition",id:t.id,workId:t.workId};return e},o.prototype.getTemplate=function(){return'<edition-panel edition="content" work-id="{{content.workId}}" flex layout="column"></edition-panel>'},new o}t.$inject=["vwise","worksRepo"],angular.module("vwise").factory("editionsContentMediator",t)}(),function(){"use strict";function t(t){function e(){t.PanelContentMediator.call(this,"ia-reader","Internet Archive Digital Copy mediator")}return e.prototype=Object.create(t.PanelContentMediator.prototype),e.prototype.matches=function(t){return t.type&&"internetarchive"===t.type},e.prototype.getTemplate=function(){return'<ia-reader properties="content.properties" flex></ia-reader>'},new e}t.$inject=["vwise"],angular.module("vwise").factory("internetArchiveContentMediator",t)}(),function(){"use strict";function t(t){function e(){t.PanelContentMediator.call(this,"ht-reader","HathiTrust Digital Copy mediator")}return e.prototype=Object.create(t.PanelContentMediator.prototype),e.prototype.matches=function(t){return t.type&&"hathitrust"===t.type},e.prototype.getTemplate=function(){return'<hathitrust-reader properties="content.properties" flex></hathitrust-reader>'},new e}t.$inject=["vwise"],angular.module("vwise").factory("hathitrustContentMediator",t)}(),function(){"use strict";function t(t){function e(){t.PanelContentMediator.call(this,"gb-reader","Google Books Digital Copy mediator")}return e.prototype=Object.create(t.PanelContentMediator.prototype),e.prototype.matches=function(t){return t.type&&"googlebooks"===t.type},e.prototype.getTemplate=function(){return'<google-book-reader properties="content.properties" flex></google-book-reader>'},new e}t.$inject=["vwise"],angular.module("vwise").factory("googleBooksContentMediator",t)}(),function(){"use strict";function t(t){function o(o,n,i){var a=o.$eval(i.vwisePanel);if(!a)throw new Error("no panel provided");var r=o.$new(!0);r.content=a.content,r.vprops=a.vprops,r.$watch("vprops.background",function(t){var o=t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(o){var n=parseInt(o[1],16)/255,i=parseInt(o[2],16)/255,r=parseInt(o[3],16)/255;a.vprops.foreground=e(n,i,r)}});var l=a.contentMediator.getTemplate(),s=n.find(".content");s.html(l),t(s.contents())(r)}var n={restrict:"A",templateUrl:"app/vwise/components/panel/panel.html",link:o};return n}function e(t,e,o){t=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),e=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),o=.03928>=o?o/12.92:Math.pow((o+.055)/1.055,2.4);var n=.2126*t+.7152*e+.0722*o;return n>.215?"rgba(0,0,0,0.87)":"rgba(255,255,255,0.87)"}t.$inject=["$compile"],angular.module("vwise").directive("vwisePanel",t)}(),function(){"use strict";function t(t){function e(e){e.$watch("properties",function(o){e.src=t.trustAsResourceUrl("https://archive.org/stream/"+o.id+"?ui=embed#mode/2up")})}var o={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:e,scope:{properties:"="}};return o}t.$inject=["$sce"],angular.module("vwise").directive("iaReader",t)}(),function(){"use strict";function t(t,o){function n(n){n.$watch("properties",function(i){var a={id:i.htid,ui:"embed"};i.seq&&(a.seq=i.seq);var r=o.map(a,function(t,e){return e+"="+t}).join(";"),l=e+"?"+r;n.src=t.trustAsResourceUrl(l)})}var i={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:n,scope:{properties:"="}};return i}t.$inject=["$sce","_"];var e="https://babel.hathitrust.org/cgi/pt";angular.module("vwise").directive("hathitrustReader",t)}(),function(){"use strict";function t(t){function e(e){e.id||t.error('missing required attribute "id"')}function o(t,e){function o(){t.id&&(n.work=e.get(t.id),n.work.$promise.then(function(){n.loaded=!0}))}var n=this;n.loaded=!1,o()}o.$inject=["$scope","worksRepo"];var n={restrict:"E",templateUrl:"app/task/components/work-editor/work-editor-item.html",link:e,scope:{id:"=id"},controller:o,controllerAs:"vm"};return n}t.$inject=["$log"],angular.module("sdaAdminWeb").directive("workEditorItem",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/person/components/name-editor/name-editor.html",scope:{name:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("nameEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/person/components/event-editor/event-editor.html",scope:{event:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("eventEditor",t)}(),function(){"use strict";function t(t,e){function o(){e.info("Loading article editor",t)}function n(){e.debug(a.article.body)}function i(){alert("cancel")}var a=this;a.save=n,a.cancel=i,a.body="test",a.editor={config:{toolbarGroups:[{name:"styles",groups:["styles"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},{name:"clipboard",groups:["undo","clipboard"]},{name:"editing",groups:["find","selection","spellchecker","editing"]}],removeButtons:"Subscript,Superscript,About,Cut,Copy,Maximize,Styles",format_tags:"p;h1;h2;h3;h4;h5;h6;pre;address"}},a.article={body:"Click here to edit article"},o()}t.$inject=["articlesRepo","$log"],angular.module("sdaAdminWeb").controller("ArticleEditorController",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/summary-editor/summary-editor.html",scope:{summary:"=ngModel",config:{toolbarGroups:[{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"editing",groups:["find","selection","spellchecker","editing"]}],removeButtons:"Subscript,Superscript,About,Cut,Copy,Maximize,Styles"}}};return t}angular.module("sdaAdminWeb").directive("summaryEditor",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(i.summary)}function n(){t.cancel()}var i=this;i.summary=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog","summary"],angular.module("sdaAdminWeb").controller("SummaryEditDialogController",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/date-editor/date-editor.html",scope:{date:"=ngModel"}};return t}angular.module("sdaAdminWeb").directive("dateEditor",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l){function s(){var t=e.workId;x.work=o.get(t),x.work.$promise.then(function(){x.bcTitle=o.getTitle(x.work.titles,["short","canonical","bibliographic"]),x.title=o.getTitle(x.work.titles,["canonical","bibliographic","short"])});var n=c();r.all([x.work.$promise,n]).then(function(){x.loading=!1})}function d(){var t=e.workId;return"works/"+t}function c(){x.relationships=[];var t=d(),e=n.search(t);return e.$promise.then(function(){x.relationships=n.normalizeRelationships(e,t,o)})}function m(t){var e={targetEvent:t,templateUrl:"app/work/work-edit-dialog.html",locals:{work:angular.copy(x.work)},controller:"WorkEditDialogController",controllerAs:"vm"},n=i.show(e);n.then(function(t){angular.extend(x.work,t),o.saveWork(x.work).then(k)})}function u(t){var e={targetEvent:t,templateUrl:"app/components/summary-edit-dialog/summary-edit-dialog.html",locals:{summary:angular.copy(x.work.summary)},controller:"SummaryEditDialogController",controllerAs:"vm"},n=i.show(e);n.then(function(t){x.work.summary=t,o.saveWork(x.work).then(k)})}function p(e){var n=i.prompt().targetEvent(e).title("Create Edition").textContent("Please provide a name for the new edition.").placeholder("edition name").ok("Create").cancel("Cancel"),a=i.show(n),r=a.then(function(t){var e=o.createEdition();return e.editionName=t,e.titles=angular.copy(x.work.titles),e.authors=angular.copy(x.work.authors),e.otherAuthors=angular.copy(x.work.otherAuthors),x.work.editions.push(e),o.saveEdition(x.work.id,e)});r.then(k),r.then(function(e){t.go("editor.edition",{workId:x.work.id,editionId:e.id})})}function v(t,e){var n=i.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this edition?").ok("Yes").cancel("No");i.show(n).then(function(){var e=x.work.editions.indexOf(t);e>=0&&(x.work.editions.splice(e,1),o.saveWork(x.work).then(k))})}function h(t){var e={};g(e,t).then(function(){x.work.copies.push(e)})}function g(t,e){var n={targetEvent:e,templateUrl:"app/work/copy-edit-dialog.html",locals:{copy:angular.copy(t)},controller:"CopyEditDialogController",controllerAs:"vm"},a=i.show(n);return a.then(function(e){angular.extend(t,e),o.saveWork(x.work).then(k)}),a}function f(t,e){var n=i.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");i.show(n).then(function(){var e=x.work.copies.indexOf(t);e>=0&&(x.work.copies.splice(e,1),o.saveWork(x.work).then(k))})}function b(e){var o=e.entities[0];t.go("editor."+o.type,o.refParams)}function y(t){var e=n.createRelationship(),o={targetEvent:t,templateUrl:"app/work/relationship-edit-dialog.html",locals:{relationship:angular.copy(e),currentUri:d()},controller:"RelationshipEditDialogController",controllerAs:"vm"},a=i.show(o),r=a.then(function(t){return angular.extend(e,t),n.save(e)});r.then(k),r.then(function(){l(c,1e3)})}function w(t,e){var o=i.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this relationship?").ok("Yes").cancel("No"),a=i.show(o),r=a.then(function(){return n["delete"](t.id)});r.then(k),r.then(function(){l(c,1e3)})}function k(){var t=a.simple().textContent("Saved").position("bottom right");return a.show(t)}var x=this;x.loading=!0,x.work=null,x.title=null,x.relationships=null,x.editBibInfo=m,x.editSummary=u,x.addEdition=p,x.deleteEdition=v,x.addCopy=h,x.editCopy=g,x.deleteCopy=f,x.openRelationship=b,x.addRelationship=y,x.deleteRelationship=w,s()}t.$inject=["$state","$stateParams","worksRepo","relationshipsRepo","$mdDialog","$mdToast","$q","$timeout"],angular.module("sdaAdminWeb").controller("ShowWorkController",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(s.work)}function n(){t.cancel()}function i(t){var e={};s.work[t].push(e)}function a(t,e){var o=s.work[t].indexOf(e);o>=0&&s.work[t].splice(o,1)}function r(){var t={};s.work.titles.push(t)}function l(t){var e=s.work.titles.indexOf(t);e>=0&&s.work.titles.splice(e,1)}var s=this;s.work=e,s.close=o,s.cancel=n,s.addAuthor=i,s.deleteAuthor=a,s.addTitle=r,s.deleteTitle=l}t.$inject=["$mdDialog","work"],angular.module("sdaAdminWeb").controller("WorkEditDialogController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,s){function d(){var t=e.workId,n=e.editionId,i=e.volumeId;k.work=o.getWork(t),k.edition=o.getEdition(t,n),k.volume=o.getVolume(t,n,i),k.work.$promise.then(function(){k.workTitle=o.getTitle(k.work.titles,["short","canonical","bibliographic"])}),k.volume.$promise.then(function(){k.title=o.getTitle(k.volume.titles,["canonical","bibliographic","short"])});var a=m();l.all([k.work.$promise,k.edition.$promise,k.volume.$promise,a]).then(function(){k.loading=!1})}function c(){var t=e.workId,o=e.editionId,n=e.volumeId;return"works/"+t+"/editions/"+o+"/volumes/"+n}function m(){k.relationships=[];var t=c(),e=n.search(t);e.$promise.then(function(){k.relationships=n.normalizeRelationships(e,t,o)})}function u(t){var e={targetEvent:t,templateUrl:"app/work/volume-edit-dialog.html",locals:{volume:angular.copy(k.volume)},controller:"VolumeEditDialogController",controllerAs:"vm"},n=a.show(e);return n.then(function(t){angular.extend(k.volume,t),o.saveVolume(k.work.id,k.edition.id,k.volume).then(w)}),n}function p(t){var e={targetEvent:t,templateUrl:"app/components/summary-edit-dialog/summary-edit-dialog.html",locals:{summary:angular.copy(k.volume.summary)},controller:"SummaryEditDialogController",controllerAs:"vm"},n=a.show(e);n.then(function(t){k.volume.summary=t,o.saveVolume(k.work.id,k.edition.id,k.volume).then(w)})}function v(t){var e={};h(e,t).then(function(){k.volume.copies.push(e)})}function h(t,e){var n={targetEvent:e,templateUrl:"app/work/copy-edit-dialog.html",locals:{copy:angular.copy(t)},controller:"CopyEditDialogController",controllerAs:"vm"},i=a.show(n);return i.then(function(e){angular.extend(t,e),o.saveVolume(k.work.id,k.edition.id,k.volume).then(w)}),i}function g(t,e){var n=a.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");a.show(n).then(function(){var e=k.volume.copies.indexOf(t);e>=0&&(k.volume.copies.splice(e,1),o.saveVolume(k.work.id,k.edition.id,k.volume).then(w))})}function f(e){var o=e.entities[0];t.go("editor."+o.type,o.refParams)}function b(t){var e=n.createRelationship(),o={targetEvent:t,templateUrl:"app/work/relationship-edit-dialog.html",locals:{relationship:angular.copy(e),currentUri:c()},controller:"RelationshipEditDialogController",controllerAs:"vm"},i=a.show(o),r=i.then(function(t){return angular.extend(e,t),n.save(e)});r.then(w),r.then(function(){s(m,1e3)})}function y(t,e){var o=a.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this relationship?").ok("Yes").cancel("No"),i=a.show(o),r=i.then(function(){return n["delete"](t.id)});r.then(w),r.then(function(){s(m,1e3)})}function w(){var t=r.simple().textContent("Saved").position("bottom right");return r.show(t)}var k=this;k.loading=!0,k.work=null,k.workTitle=null,k.edition=null,k.volume=null,k.title=null,k.editBibInfo=u,k.editSummary=p,k.addCopy=v,k.editCopy=h,k.deleteCopy=g,k.openRelationship=f,k.addRelationship=b,k.deleteRelationship=y,d()}t.$inject=["$state","$stateParams","worksRepo","relationshipsRepo","_","$mdDialog","$mdToast","$q","$timeout"],angular.module("sdaAdminWeb").controller("ShowVolumeController",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(s.volume)}function n(){t.cancel()}function i(t){var e={};s.volume[t].push(e)}function a(t,e){var o=s.volume[t].indexOf(e);o>=0&&s.volume[t].splice(o,1)}function r(){var t={};s.volume.titles.push(t)}function l(t){var e=s.volume.titles.indexOf(t);e>=0&&s.volume.titles.splice(e,1)}var s=this;s.volume=e,s.close=o,s.cancel=n,s.addAuthor=i,s.deleteAuthor=a,s.addTitle=r,s.deleteTitle=l}t.$inject=["$mdDialog","volume"],angular.module("sdaAdminWeb").controller("VolumeEditDialogController",t)}(),function(){"use strict";function t(t,e,o,n,i){function a(){p.types=r(),p.target=o.createAnchor(),p.relationship.targetEntities=[p.target];var t=o.createAnchor();t.entryUris=[n],p.relationship.relatedEntities=[t],p.relationship.descriptionMimeType="text/html"}function r(){var t=o.getTypes(),e=[];return Object.defineProperty(e,"$promise",{value:t.$promise}),t.$promise.then(function(){angular.forEach(t,function(t){e.push({id:t.identifier,label:t.title,reverse:!1}),t.isDirected&&e.push({id:t.identifier,label:t.reverseTitle,reverse:!0})})}),e}function l(t){var o=e.search(t);return o.$promise.then(function(){return o.items})}function s(t){if(p.relationship.typeId=t.id,p.isReverse&&!t.reverse||!p.isReverse&&t.reverse){var e=p.relationship.relatedEntities;p.relationship.relatedEntities=p.relationship.targetEntities,p.relationship.targetEntities=e}p.isReverse=t.reverse}function d(t){if(p.targets=[],t){var o=e.getWork(t.id);o.$promise.then(function(){var t="works/"+o.id,n=e.getTitle(o.titles,["short","canonical","bibliographic"]);p.targets.push({uri:t,label:n.title+(n.subtitle?": "+n.subtitle:"")}),o.editions.forEach(function(o){var n=t+"/editions/"+o.id,i=e.getTitle(o.titles,["short","canonical","bibliographic"]);p.targets.push({uri:n,label:i.title+(i.subtitle?": "+i.subtitle:"")+". "+o.editionName}),o.volumes.forEach(function(t){var i=n+"/volumes/"+t.id,a=e.getTitle(t.titles,["short","canonical","bibliographic"]);p.targets.push({uri:i,label:a.title+(a.subtitle?": "+a.subtitle:"")+". "+o.editionName+". Volume "+t.volumeNumber})})}),p.selectedTarget=p.targets[0],c(p.selectedTarget)})}}function c(t){p.target.entryUris=t&&t.uri?[t.uri]:[]}function m(){t.hide(p.relationship)}function u(){t.cancel()}var p=this;p.relationship=i,p.types=[],p.selectedType=null,p.targets=[],p.selectedTarget=null,p.searchText="",p.isReverse=!1,p.getResults=l,p.selectWork=d,p.setType=s,p.setTarget=c,p.close=m,p.cancel=u,a()}t.$inject=["$mdDialog","worksRepo","relationshipsRepo","currentUri","relationship"],angular.module("sdaAdminWeb").controller("RelationshipEditDialogController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,s){function d(){var t=e.workId,n=e.editionId;$.work=o.getWork(t),$.edition=o.getEdition(t,n),$.work.$promise.then(function(){$.workTitle=o.getTitle($.work.titles,["short","canonical","bibliographic"])}),$.edition.$promise.then(function(){$.title=o.getTitle($.edition.titles,["canonical","bibliographic","short"])});var i=m();l.all([$.work.$promise,$.edition.$promise,i]).then(function(){$.loading=!1})}function c(){var t=e.workId,o=e.editionId;return"works/"+t+"/editions/"+o}function m(){$.relationships=[];var t=c(),e=n.search(t);e.$promise.then(function(){$.relationships=n.normalizeRelationships(e,t,o)})}function u(t){var e={targetEvent:t,templateUrl:"app/work/edition-edit-dialog.html",locals:{edition:angular.copy($.edition)},controller:"EditionEditDialogController",controllerAs:"vm"},n=a.show(e);return n.then(function(t){angular.extend($.edition,t),o.saveEdition($.work.id,$.edition).then(x)}),n}function p(t){var e={targetEvent:t,templateUrl:"app/components/summary-edit-dialog/summary-edit-dialog.html",locals:{summary:angular.copy($.edition.summary)},controller:"SummaryEditDialogController",controllerAs:"vm"},n=a.show(e);n.then(function(t){$.edition.summary=t,o.saveEdition($.work.id,$.edition).then(x)})}function v(e){var n=a.prompt().targetEvent(e).title("Create Volume").textContent("Please provide a number for the new volume.").placeholder("volume number").ok("Create").cancel("Cancel"),i=a.show(n),r=i.then(function(t){var e=o.createVolume();return e.volumeNumber=t,e.titles=angular.copy($.edition.titles),e.authors=angular.copy($.edition.authors),e.otherAuthors=angular.copy($.edition.otherAuthors),e.publicationInfo=angular.copy($.edition.publicationInfo),$.edition.volumes.push(e),o.saveVolume($.work.id,$.edition.id,e)});r.then(x),r.then(function(e){t.go("editor.volume",{workId:$.work.id,editionId:$.edition.id,volumeId:e.id})})}function h(t,e){var n=a.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this volume?").ok("Yes").cancel("No");a.show(n).then(function(){var e=$.edition.volumes.indexOf(t);e>=0&&($.edition.volumes.splice(e,1),o.saveEdition($.work.id,$.edition).then(x))})}function g(t){var e={};f(e,t).then(function(){$.edition.copies.push(e)})}function f(t,e){var n={targetEvent:e,templateUrl:"app/work/copy-edit-dialog.html",locals:{copy:angular.copy(t)},controller:"CopyEditDialogController",controllerAs:"vm"},i=a.show(n);return i.then(function(e){angular.extend(t,e),o.saveEdition($.work.id,$.edition).then(x)}),i}function b(t,e){var n=a.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this copy?").ok("Yes").cancel("No");a.show(n).then(function(){var e=$.edition.copies.indexOf(t);e>=0&&($.edition.copies.splice(e,1),o.saveEdition($.work.id,$.edition).then(x))})}function y(e){var o=e.entities[0];t.go("editor."+o.type,o.refParams)}function w(t){var e=n.createRelationship(),o={targetEvent:t,templateUrl:"app/work/relationship-edit-dialog.html",locals:{relationship:angular.copy(e),currentUri:c()},controller:"RelationshipEditDialogController",controllerAs:"vm"},i=a.show(o),r=i.then(function(t){return angular.extend(e,t),n.save(e)});r.then(x),r.then(function(){s(m,1e3)})}function k(t,e){var o=a.confirm().targetEvent(e).title("Confirm Deletion").textContent("Are you sure you want to delete this relationship?").ok("Yes").cancel("No"),i=a.show(o),r=i.then(function(){return n["delete"](t.id)});r.then(x),r.then(function(){s(m,1e3)})}function x(){var t=r.simple().textContent("Saved").position("bottom right");
return r.show(t)}var $=this;$.loading=!0,$.work=null,$.workTitle=null,$.edition=null,$.title=null,$.editBibInfo=u,$.editSummary=p,$.addVolume=v,$.deleteVolume=h,$.addCopy=g,$.editCopy=f,$.deleteCopy=b,$.openRelationship=y,$.addRelationship=w,$.deleteRelationship=k,d()}t.$inject=["$state","$stateParams","worksRepo","relationshipsRepo","_","$mdDialog","$mdToast","$q","$timeout"],angular.module("sdaAdminWeb").controller("ShowEditionController",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(s.edition)}function n(){t.cancel()}function i(t){var e={};s.edition[t].push(e)}function a(t,e){var o=s.edition[t].indexOf(e);o>=0&&s.edition[t].splice(o,1)}function r(){var t={};s.edition.titles.push(t)}function l(t){var e=s.edition.titles.indexOf(t);e>=0&&s.edition.titles.splice(e,1)}var s=this;s.edition=e,s.close=o,s.cancel=n,s.addAuthor=i,s.deleteAuthor=a,s.addTitle=r,s.deleteTitle=l}t.$inject=["$mdDialog","edition"],angular.module("sdaAdminWeb").controller("EditionEditDialogController",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(i.copy)}function n(){t.cancel()}var i=this;i.copy=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog","copy"],angular.module("sdaAdminWeb").controller("CopyEditDialogController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,s,d,c,m){function u(){[1,2,3,4].forEach(function(t){$.items.push({id:"panel"+t,label:"Item "+t,text:"This is the text content for item #"+t})}),l.bindTo(i).add({combo:"ctrl+\\",description:"Toggle Sidebar",callback:function(){$.sidebarFocused=!$.sidebarFocused}}).add({combo:"/",description:"Search",callback:function(){$.searchQuery="",$.sidebarFocused?a(function(){angular.element("#searchQuery").focus()}):r("left").toggle()}}).add({combo:"n",description:"Create a new note panel",callback:function(){k(100,100)}})}function p(t){function e(t,e){return function(o){return o.forEach(function(o){o[t]=e}),o}}$.loading=!0,$.peopleResults=c.search(t),$.worksResults=m.search(t),d.all([$.peopleResults.$promise.then(s.property("items")).then(e("type","person")),$.worksResults.$promise.then(s.property("items")).then(e("type","work"))]).then(function(){$.loading=!1})}function v(t,e,o){o.vprops.xPosition=e.position.left,o.vprops.yPosition=Math.max(0,e.position.top)}function h(t,e,o){var i=Math.max(0,e.position.top);n.debug("saving panel position at",[e.position.left,i]),o.setPosition(e.position.left,i),b(o)}function g(t,e,o){var n=e.position.left+e.helper.width(),a=e.position.top+e.helper.height();i.$apply(function(){o.vprops.width=Math.max(0,n),o.vprops.height=Math.max(0,a)})}function f(t,e,o){var a=e.position.left+e.helper.width(),r=e.position.top+e.helper.height();n.debug("saving panel size at",[a,r]),i.$apply(function(){o.setSize(Math.max(0,a),Math.max(0,r))})}function b(t,e){t.activate(),e&&e.stopPropagation&&e.stopPropagation()}function y(t){t.remove()}function w(t,o){var i=o.draggable.scope(),a=i.item;if(a){var r=angular.element(".md-sidenav-left").width(),l={xPosition:o.position.left-r,yPosition:o.position.top},s=e.findContentMediators(a,l);n.debug("found "+s.length+" matching content mediator(s).");var d=s.length>0?s[0]:null;if(d){var c=d.initPanelData(a,l),m=c.then(function(t){return $.workspace.createPanel(d,t)});m.then(function(t){n.debug("created new panel"),t.setPosition(l.xPosition,l.yPosition),t.setSize(600,400),t.set("background","#ffffff")})}}}function k(t,o){var n={note:""},i={xPosition:t,yPosition:o},a=e.findContentMediators(n,i),r=a.length>0?a[0]:null;$.workspace.createPanel(r,n).then(function(t){t.setPosition(i.xPosition,i.yPosition)})}function x(t){var e=angular.element(".md-sidenav-left").width();t.ctrlKey&&k(t.clientX-e,t.clientY)}var $=this;$.workspace=new t.Workspace("test",o),$.items=[],$.activeItems=[],$.searchQuery="",$.sidebarFocused=!0,$.panelDragged=v,$.savePanelPosition=h,$.thingDropped=w,$.workspaceClicked=x,$.resizePanel=g,$.savePanelSize=f,$.activatePanel=b,$.closePanel=y,$.search=s.debounce(p,300),u()}t.$inject=["vwise","panelContentMediatorRegistry","workspaceRepository","$log","$scope","$timeout","$mdSidenav","hotkeys","_","$q","peopleRepo","worksRepo"],angular.module("vwise").controller("WorkspaceController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,s,d){t.register(e),t.register(o),t.register(n),t.register(i),t.register(a),t.register(r),t.register(l),t.register(s),t.register(d)}t.$inject=["panelContentMediatorRegistry","peopleContentMediator","worksContentMediator","editionsContentMediator","volumesContentMediator","googleBooksContentMediator","hathitrustContentMediator","internetArchiveContentMediator","noteContentMediator","passthruContentMediator"],angular.module("vwise").run(t)}(),function(){"use strict";angular.module("vwise").constant("vwise",vwise)}(),function(){"use strict";function t(t){t.configure({preventLoad:!0})}t.$inject=["googleBooksApiProvider"],angular.module("vwise").config(t)}(),function(){"use strict";angular.module("trcWorks",["ngResource"])}(),function(){"use strict";function t(){function t(t,o){function n(){return i("")}function i(t){return k.get({q:t,max:50})}function a(t){if(angular.isUndefined(t))throw new TypeError("Invalid ID provided to getWork");var e=k.get({workId:t});return e.$promise.then(f),e}function r(t,e){if(angular.isUndefined(t)||angular.isUndefined(e))throw new TypeError("Invalid IDs provided to getEdition");var o=x.get({workId:t,editionId:e});return o.$promise.then(b),o}function l(t,e,o){if(angular.isUndefined(t)||angular.isUndefined(e)||angular.isUndefined(o))throw new TypeError("Invalid IDs provided to getVolume");var n=$.get({workId:t,editionId:e,volumeId:o});return n.$promise.then(y),n}function s(){var t=new k;return f(t),t.titles.push({}),t.authors.push({}),t}function d(){var t=new x;return b(t)}function c(){var t=new $;return y(t)}function m(){switch(arguments.length){case 1:return u.apply(null,arguments);case 2:return p.apply(null,arguments);case 3:return v.apply(null,arguments)}throw new TypeError("Unexpected arguments to worksRepo#save")}function u(t){if(!(t instanceof k))throw new Error("work was not created by this repo");return t.id?t.$update():t.$save()}function p(t,e){if(!t)throw new Error("no work id provided");if(!(e instanceof x))throw new Error("edition was not created by this repo");return e.id?e.$update({workId:t}):e.$save({workId:t})}function v(t,e,o){if(!t)throw new Error("no work id provided");if(!e)throw new Error("no edition id provided");if(!(o instanceof $))throw new Error("volume was not created by this repo");return o.id?o.$update({workId:t,editionId:e}):o.$save({workId:t,editionId:e})}function h(t){var e=k["delete"]({id:t});return e.$promise}function g(t){return t.titles?t.titles.forEach(function(t){t.type=t.type.toLowerCase()}):t.titles=[],t.authors?t.authors.forEach(function(t){t.role=t.role.toLowerCase()}):t.authors=[],t.otherAuthors?t.otherAuthors.forEach(function(t){t.role=t.role.toLowerCase()}):t.otherAuthors=[],t.copies||(t.copies=[]),t}function f(t){return g(t),t.editions?t.editions.forEach(b):t.editions=[],t}function b(t){return g(t),t.volumes?t.volumes.forEach(y):t.volumes=[],t}function y(t){return g(t),t}function w(t,e){return angular.isUndefined(e)?e=["short","canonical","bibliographic"]:angular.isArray(e)||(e=[e]),e.reduce(function(e,n){return e||o.find(t,{type:n})},null)}var k=t(e.url+"/:workId",{workId:"@id"},{update:{method:"PUT"}}),x=t(e.url+"/:workId/editions/:editionId",{editionId:"@id"},{update:{method:"PUT"}}),$=t(e.url+"/:workId/editions/:editionId/volumes/:volumeId",{volumeId:"@id"},{update:{method:"PUT"}}),E={};return E.getAll=n,E.search=i,E.get=a,E.getWork=a,E.getEdition=r,E.getVolume=l,E.create=s,E.createWork=s,E.createEdition=d,E.createVolume=c,E.save=m,E.saveWork=u,E.saveEdition=p,E.saveVolume=v,E["delete"]=h,E.getTitle=w,E}t.$inject=["$resource","_"];var e={};return e.url="/api/works",e.$get=t,e}angular.module("trcWorks").provider("worksRepo",t)}(),function(){"use strict";angular.module("trcTasks",["ngResource"])}(),function(){"use strict";function t(){function t(t){function o(t){t=t||"copies";var e=a.get({taskId:t}),o={$promise:e.$promise.then(function(){return o}),workflow:e,getItems:function(e,o){return n(t,e,o)}};return o}function n(t,e,o){return o=o||{},r.get({taskId:t,stage:e,start:o.start,max:o.max})}function i(t,e){if(t.stage!==e.sourceStage)throw new Error("Transition ("+e.sourceStage+" -> "+e.targetStage+") is not valid for item currently in stage "+t.stage);var o=r.save({itemId:t.itemId},{stage:e.targetStage,comments:null});return o.$promise.then(function(e){angular.extend(t,e)}),o}var a=t(e.url+"/:taskId/workflow",{taskId:"copies"}),r=t(e.url+"/:taskId/items/:itemId",{taskId:"copies",itemId:"@itemId"}),l={};return l.get=o,l.getItems=n,l.transition=i,l}t.$inject=["$resource"];var e={};return e.url="/api/tasks",e.$get=t,e}angular.module("trcTasks").provider("tasksRepo",t)}(),function(){"use strict";angular.module("trcArticles",["ngResource"])}(),function(){"use strict";function t(){function t(t,o){var n=(o(e.url+"/:id",{id:"@identifier"}),{});return n}t.$inject=["$q","$resource"];var e={};return e.url="/api/articles",e.$get=t,e}angular.module("trcArticles").provider("articlesRepo",t)}(),function(){"use strict";angular.module("trcReln",["ngResource"])}(),function(){"use strict";function t(){function t(t,a){function r(t){if(t=t||{},!x||t.force){var e=w.query();x={};var o=e.$promise.then(function(){return e.forEach(function(t){x[t.identifier]=t}),x});Object.defineProperty(x,"$promise",{value:o})}return x}function l(t){var e=r();return e.$promise.then(function(e){return e[t]})}function s(){var t=new k;return h(t)}function d(){var t={};return g(t)}function c(){var t={};return f(t)}function m(t){return k.get({id:t})}function u(t){if(!t)throw new Error("no options provided");angular.isString(t)&&(t={uri:t});var e={};return t.uri&&(e.entity=t.uri),t.typeId&&(e.type=t.typeId),t.direction&&(e.direction=t.direction),t.start&&(e.off=t.start),t.max&&(e.max=t.max),k.query(e)}function p(t){if(!(t instanceof k))throw new Error("Relationship was not created by this repo");return t.id?t.$update():t.$save()}function v(t){var e=k["delete"]({id:t});return e.$promise}function h(t){return t.provenance||(t.provenance=d()),t.relatedEntities||(t.relatedEntities=[]),t.targetEntities||(t.targetEntities=[]),t}function g(t){return t.creatorUris||(t.creatorUris=[]),t}function f(t){return t.entryUris||(t.entryUris=[]),t}function b(t,e,o){var n=t.map(function(t){var n=t.typeId,i=t.targetEntities.some(function(t){return t.entryUris.some(function(t){return t===e})}),a=i?"relatedEntities":"targetEntities",r=t[a].map(function(t){return t.entryUris}).reduce(function(t,e){return t.concat(e)},[]).map(function(t){return y(t,o)});return{id:t.id,typeId:n,reverse:i,description:t.description,entities:r}}),i={};n.forEach(function(t){var e=t.typeId;i.hasOwnProperty(e)||(i[e]={fwd:[],rev:[]}),i[e][t.reverse?"rev":"fwd"].push(t)});var a=[];return angular.forEach(i,function(t,e){l(e).then(function(e){if(e.isDirected)t.fwd.length>0&&a.push({label:e.title,relationships:t.fwd}),t.rev.length>0&&a.push({label:e.reverseTitle,relationships:t.rev});else{var o=t.fwd.concat(t.rev);o.length>0&&a.push({label:e.title,relationships:o})}})}),a}function y(t,i){var a=/^works\/([^\/]+)(?:\/editions\/([^\/]+)(?:\/volumes\/([^\/]+))?)?$/i,r=a.exec(t);return r?r[1]&&r[2]&&r[3]?e(r[1],r[2],r[3],i):r[1]&&r[2]?o(r[1],r[2],i):r[1]?n(r[1],i):null:null}var w=a(i.url+"/types/:id",{id:"@identifier"}),k=a(i.url+"/:id",{id:"@id"},{update:{method:"PUT"}}),x=null,$={};return $.getTypes=r,$.getType=l,$.createRelationship=s,$.createProvenance=d,$.createAnchor=c,$.get=m,$.search=u,$.save=p,$["delete"]=v,$.normalizeRelationships=b,$}function e(t,e,o,n){var i=n.getEdition(t,e),a=n.getVolume(t,e,o),r={type:"volume",refParams:{workId:t,editionId:e,volumeId:o},entity:a};return a.$promise.then(function(){var t=n.getTitle(a.titles,["short","canonical","bibliographic"]);t&&(r.label=t.title+(t.subtitle?": "+t.subtitle:"")),i.$promise.then(function(){r.label+=" "+i.editionName+" Volume "+a.volumeNumber},function(){r.label+=" [Unknown edition] "+a.volumeNumber})}),r}function o(t,e,o){var n=o.getEdition(t,e),i={type:"edition",refParams:{workId:t,editionId:e},entity:n};return n.$promise.then(function(){var t=o.getTitle(n.titles,["short","canonical","bibliographic"]);t&&(i.label=t.title+(t.subtitle?": "+t.subtitle:"")+" "+n.editionName)}),i}function n(t,e){var o=e.getWork(t),n={type:"work",refParams:{workId:t},entity:o};return o.$promise.then(function(){var t=e.getTitle(o.titles,["short","canonical","bibliographic"]);t&&(n.label=t.title+(t.subtitle?": "+t.subtitle:""))}),n}t.$inject=["$q","$resource"];var i={};return i.url="/api/relationships",i.$get=t,i}angular.module("trcReln").provider("relationshipsRepo",t)}(),function(){"use strict";angular.module("trcBio",["ngResource"])}(),function(){"use strict";function t(){function t(t,o){function n(){var t=new g;return u(t)}function i(){var t={};return p(t)}function a(){var t={};return v(t)}function r(){var t={};return h(t)}function l(){var t={};return t}function s(t){return g.get({id:t})}function d(t){return g.get({q:t})}function c(t){var e;return e=t.id?g.update({id:t.id},t):g.save(null,t),e.$promise.then(function(e){return t.id=e.id,t})}function m(t){var e=g["delete"]({id:t});return e.$promise}function u(t){return t.meta?p(t.meta):t.meta=i(),t.name?v(t.name):t.name=a(),t.altNames?t.altNames.forEach(v):t.altNames=[],t.birth?h(t.birth):t.birth=r(),t.death?h(t.death):t.death=r(),t}function p(t){return t.links||(t.links={}),t}function v(t){return t}function h(t){return t.date||(t.date=l()),t}var g=o(e.url+"/:id",null,{update:{method:"PUT"}}),f={};return f.create=n,f.createName=a,f.createEvent=r,f.get=s,f.search=d,f.save=c,f["delete"]=m,f}t.$inject=["$q","$resource"];var e={};return e.url="/api/people",e.$get=t,e}angular.module("trcBio").provider("peopleRepo",t)}(),function(){"use strict";function t(){function t(t,e){function o(){var o=e.createName();t.person.altNames.push(o)}function n(e){t.person.altNames.splice(e,1)}function i(o){var n=e.createEvent();t.person[o]=n}function a(e){t.person[e]=null}var r=this;r.addName=o,r.removeName=n,r.addEvent=i,r.removeEvent=a}t.$inject=["$scope","peopleRepo"];var e={restrict:"E",templateUrl:"app/trc-bio/person-editor.html",scope:{person:"=ngModel"},controller:t,controllerAs:"personEditor"};return e}angular.module("trcBio").directive("trcPersonEditor",t)}(),function(){"use strict";function t(){function t(){var t=this;t.roles=[{value:"canonical",label:"Canonical Name"},{value:"pseudonym",label:"Pseudonym"},{value:"maiden",label:"Maiden Name"},{value:"designation",label:"Honorary Designation"},{value:"nickname",label:"Nickname"},{value:"phonetic",label:"Phonetic Name"}]}var e={restrict:"E",templateUrl:"app/trc-bio/name-editor.html",scope:{name:"=ngModel"},controller:t,controllerAs:"nameEditor"};return e}angular.module("trcBio").directive("trcNameEditor",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/trc-bio/event-editor.html",scope:{event:"=ngModel"}};return t}angular.module("trcBio").directive("trcEventEditor",t)}(),function(){"use strict";function t(t,e,o,n){function i(){d.task=o.get(),d.task.$promise.then(function(t){var e=[];angular.forEach(t.workflow.stages,function(o){var n=s(t,o.id);e.push(n)}),n.all(e).then(function(){d.loading=!1})})}function a(){e("left").toggle()}function r(e,o){o.stopImmediatePropagation(),t.go("editor.work",{workId:e.entityId})}function l(t,e,n){n.stopImmediatePropagation();var i=o.transition(t,e);i.$promise.then(function(){s(d.task,e.sourceStage),s(d.task,e.targetStage)})}function s(t,e){var o=t.getItems(e,{max:9999});return o.$promise.then(function(){d.worklists[e]=o.items.length>0?o:null}),o.$promise}var d=this;d.stageOrder=["pinned","review","inprogress","pending","deferred"],d.loading=!0,d.worklists={},d.task=null,d.openMenu=a,d.focusItem=r,d.transition=l,i()}t.$inject=["$state","$mdSidenav","tasksRepo","$q"],angular.module("sdaAdminWeb").controller("TaskController",t)}(),function(){"use strict";angular.module("slideToggle",[])}(),function(){"use strict";function t(){function t(t,e,o){var n=parseInt(o.slideToggleDuration)||200;t.$watch("active",function(t){t?e.stop().slideDown(n):e.stop().slideUp(n)})}var e={restrict:"A",scope:{active:"=slideToggle"},link:t};return e}angular.module("slideToggle").directive("slideToggle",t)}(),function(){"use strict";function t(t,e,o,n){function i(){d.person=t.get(e.id)}function a(e){var n={targetEvent:e,templateUrl:"app/person/person-edit-dialog.html",locals:{person:angular.copy(d.person)},controller:"PersonEditDialogController",controllerAs:"vm"},i=o.show(n);i.then(function(e){angular.extend(d.person,e),t.save(d.person).then(s)})}function r(e,n){var i={targetEvent:n,templateUrl:"app/person/event-edit-dialog.html",locals:{event:angular.copy(d.person[e])},controller:"EventEditDialogController",controllerAs:"vm"},a=o.show(i);a.then(function(o){angular.extend(d.person[e],o),t.save(d.person).then(s)})}function l(e){var n={targetEvent:e,templateUrl:"app/components/summary-edit-dialog/summary-edit-dialog.html",locals:{summary:angular.copy(d.person.summary)},controller:"SummaryEditDialogController",controllerAs:"vm"},i=o.show(n);i.then(function(e){d.person.summary=e,t.save(d.person).then(s)})}function s(){var t=n.simple().textContent("Saved").position("bottom right");return n.show(t)}var d=this;d.loading=!0,d.person=null,d.editBioInfo=a,d.editEvent=r,d.editSummary=l,i()}t.$inject=["peopleRepo","$stateParams","$mdDialog","$mdToast"],angular.module("sdaAdminWeb").controller("ShowPersonController",t)}(),function(){"use strict";function t(t,e,o){function n(){e.hide(l.person)}function i(){e.cancel()}function a(){var e=t.createName();l.person.altNames.push(e)}function r(t){var e=l.person.altNames.indexOf(t);e>=0&&l.person.altNames.splice(e,1)}var l=this;l.person=o,l.nameRoles=[{value:"pseudonym",label:"Pseudonym"},{value:"maiden",label:"Maiden Name"},{value:"designation",label:"Honorary Designation"},{value:"nickname",label:"Nickname"},{value:"phonetic",label:"Phonetic Name"}],l.close=n,l.cancel=i,l.addName=a,l.deleteName=r}t.$inject=["peopleRepo","$mdDialog","person"],angular.module("sdaAdminWeb").controller("PersonEditDialogController",t)}(),function(){"use strict";function t(t,e){function o(){t.hide(i.event)}function n(){t.cancel()}var i=this;i.event=e,i.close=o,i.cancel=n}t.$inject=["$mdDialog","event"],angular.module("sdaAdminWeb").controller("EventEditDialogController",t)}(),function(){"use strict";function t(t,e,o,n,i,a,r,l,s){function d(){n.q&&(h.searchQuery=n.q,m(h.searchQuery))}function c(){i("left").toggle()}function m(o){h.loading=!0,h.peopleResults=e.search(o),h.worksResults=t.search(o),r.all([h.peopleResults.$promise,h.worksResults.$promise]).then(function(){h.loading=!1})}function u(t){var n={targetEvent:t,templateUrl:"app/person/person-edit-dialog.html",locals:{person:e.create()},controller:"PersonEditDialogController",controllerAs:"vm"},i=l.show(n),a=i.then(function(t){return e.save(t)});a.then(v),a.then(function(t){o.go("editor.person",{id:t.id})})}function p(e){var n={targetEvent:e,templateUrl:"app/work/work-edit-dialog.html",locals:{work:t.createWork()},controller:"WorkEditDialogController",controllerAs:"vm"},i=l.show(n),a=i.then(function(e){return t.saveWork(e)});a.then(v),a.then(function(t){o.go("editor.work",{workId:t.id})})}function v(){var t=s.simple().textContent("Saved").position("bottom right");return s.show(t)}var h=this;h.loading=!1,h.searchQuery="",h.openMenu=c,h.createPerson=u,h.createWork=p,h.search=a.debounce(m,300),d()}t.$inject=["worksRepo","peopleRepo","$state","$stateParams","$mdSidenav","_","$q","$mdDialog","$mdToast"],angular.module("sdaAdminWeb").controller("MainController",t)}(),function(){"use strict";angular.module("google.books",[])}(),function(){"use strict";function t(){function t(t){angular.extend(o.options,t)}function e(t){return t.load(o.options)}e.$inject=["googleBooksScriptLoader"];var o={};return o.options={transport:"https",v:0,language:"en",preventLoad:!1},o.configure=t,o.$get=e,o}angular.module("google.books").provider("googleBooksApi",t)}(),function(){"use strict";function t(t,e,o,n){function i(t){return"auto"===t.transport?"//www.google.com/books/api.js?":t.transport+"://www.google.com/books/api.js?"}function a(t){var o=["transport","preventLoad","randomizedFunctionName"],a=n.map(n.omit(t,o),function(t,e){return e+"="+t});if(d){var r=e.getElementById(d);r.parentNode.removeChild(r)}else d="gbooks_load_"+Math.round(1e3*Math.random());a=a.join("&"),angular.element("<script>",{id:d,type:"text/javascript",src:i(t)+a}).appendTo(angular.element("body"))}function r(){return angular.isDefined(t.google)&&angular.isDefined(t.google.books)}function l(e){var n=o.defer();if(r())return n.resolve(t.google.books),n.promise;var i="onGoogleBooksReady"+Math.round(1e3*Math.random());return e.callback=i,t[i]=function(){t[i]=null,n.resolve(t.google.books)},e.preventLoad||a(e),c=e,c.randomizedFunctionName=i,n.promise}function s(){var e=c;r()?t[e.randomizedFunctionName]&&t[e.randomizedFunctionName]():a(e)}var d=void 0,c=void 0;return{load:l,manualLoad:s}}t.$inject=["$window","$document","$q","_"],angular.module("google.books").factory("googleBooksScriptLoader",t)}(),function(){"use strict";function t(t,e){function o(o,n){e.load(),t.then(function(t){var e=new t.DefaultViewer(n.get(0));o.$watch("properties",function(t){e.load(t.id)}),o.$on("resize",function(){e.resize()})})}var n={restrict:"E",link:o,scope:{properties:"="}};return n}t.$inject=["googleBooksApi","googleBooksApiManualLoader"],angular.module("google.books").directive("googleBookReader",t)}(),function(){"use strict";function t(t){function e(){t.manualLoad()}var o={};return o.load=e,o}t.$inject=["googleBooksScriptLoader"],angular.module("google.books").service("googleBooksApiManualLoader",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("sdaAdminWeb").run(t)}(),function(){"use strict";function t(t,e){t.state("editor",{url:"/?q",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}).state("editor.article",{url:"articles/:id",views:{main:{templateUrl:"app/admin/editors/articles/article.html",controller:"ArticleEditorController",controllerAs:"vm"}}}).state("editor.person",{url:"people/:id",views:{main:{templateUrl:"app/person/person.html",controller:"ShowPersonController",controllerAs:"vm"}}}).state("editor.work",{url:"works/:workId",views:{main:{templateUrl:"app/work/work.html",controller:"ShowWorkController",controllerAs:"vm"}}}).state("editor.edition",{url:"works/:workId/editions/:editionId",views:{main:{templateUrl:"app/work/edition.html",controller:"ShowEditionController",controllerAs:"vm"}}}).state("editor.volume",{url:"works/:workId/editions/:editionId/volumes/:volumeId",views:{main:{templateUrl:"app/work/volume.html",controller:"ShowVolumeController",controllerAs:"vm"}}}).state("vwise",{url:"/vwise",templateUrl:"app/vwise/workspace.html",controller:"WorkspaceController",controllerAs:"vm"}).state("task",{url:"/task",templateUrl:"app/task/task.html",controller:"TaskController",controllerAs:"vm"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaAdminWeb").config(t)}(),function(){"use strict";angular.module("sdaAdminWeb").constant("_",_).constant("moment",moment)}(),function(){"use strict";function t(t,e,o,n,i,a){t.debugEnabled(!0),e.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),e.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),e.theme("default").primaryPalette("darkBrown").accentPalette("copper"),o.url="/api/catalog/v1/tasks",n.url="/api/catalog/works",i.url="/api/catalog/people",a.url="/api/catalog/relationships"}t.$inject=["$logProvider","$mdThemingProvider","tasksRepoProvider","worksRepoProvider","peopleRepoProvider","relationshipsRepoProvider"],angular.module("sdaAdminWeb").config(t)}(),angular.module("sdaAdminWeb").run(["$templateCache",function(t){t.put("app/main/main.html",'<md-content flex layout=column><md-toolbar><div class=md-toolbar-tools><md-button class="md-accent md-icon-button" ng-click=vm.openMenu() title="toggle menu" hide-gt-sm><md-icon>menu</md-icon></md-button><h2><span>SDA Admin</span></h2><span flex></span><ul><li>Tasks</li><li>People</li><li>Articles</li></ul></div></md-toolbar><md-content flex layout=row><md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" ui-view=sidebar layout=column><form layout=row flex=none><md-input-container flex><label for=searchQuery>Search</label><md-icon>search</md-icon><input type=search name=searchQuery id=searchQuery ng-model=vm.searchQuery ng-change=vm.search(vm.searchQuery) required></md-input-container></form><md-content flex><div ng-if=vm.loading layout=row layout-align=center><md-progress-circular md-mode=indeterminate></md-progress-circular></div><div ng-if="!vm.loading &amp;&amp; vm.peopleResults &amp;&amp; vm.peopleResults.items.length > 0"><md-subheader>People</md-subheader><md-list><md-list-item ng-repeat="person in vm.peopleResults.items" ui-sref="editor.person({id: person.id})"><div class=md-list-item-text><span>{{person.label}}</span></div></md-list-item></md-list></div><div ng-if="!vm.loading &amp;&amp; vm.worksResults &amp;&amp; vm.worksResults.items.length > 0"><md-subheader>Works</md-subheader><md-list><md-list-item ng-repeat="work in vm.worksResults.items" ui-sref="editor.work({workId: work.id})"><div class=md-list-item-text><span>{{work.label}}</span></div></md-list-item></md-list></div></md-content></md-sidenav><md-fab-speed-dial md-direction=up class="md-scale md-fab-bottom-right"><md-fab-trigger><md-button aria-label=New... class=md-fab><md-icon>add</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button aria-label="New Article" class="md-fab md-mini" ng-click=vm.createArticle($event)><md-tooltip md-direction=left>New Article</md-tooltip><md-icon>description</md-icon></md-button><md-button aria-label="New Person" class="md-fab md-mini" ng-click=vm.createPerson($event)><md-tooltip md-direction=left>New Person</md-tooltip><md-icon>person</md-icon></md-button><md-button aria-label="New Work" class="md-fab md-mini" ng-click=vm.createWork($event)><md-tooltip md-direction=left>New Book</md-tooltip><md-icon>book</md-icon></md-button></md-fab-actions></md-fab-speed-dial><md-content flex layout=column ui-view=main></md-content></md-content></md-content>'),t.put("app/person/event-edit-dialog.html","<md-dialog flex=80><md-toolbar><div class=md-toolbar-tools><h3>Event Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><event-editor ng-model=vm.event flex></event-editor></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>"),t.put("app/person/person-edit-dialog.html",'<md-dialog flex=80><md-toolbar><div class=md-toolbar-tools><h3>Biographic Information Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><section class=name layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Canonical Name</h2></div></md-toolbar><div class=name><name-editor ng-model=vm.person.name flex></name-editor></div></section><section class=alt-names layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Alternate Names</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addName()><md-icon>add</md-icon></md-button></div></md-toolbar><div class=name layout=row ng-repeat="name in vm.person.altNames"><md-input-container><label>role</label><md-select ng-model=name.role><md-option ng-repeat="role in vm.nameRoles" value={{role.value}}>{{role.label}}</md-option></md-select></md-input-container><name-editor ng-model=name flex></name-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click=vm.deleteName(name)><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>'),t.put("app/person/person.html",'<div layout=row layout-padding><div flex=60><section class="content names"><div class=toolbar layout=row layout-align="start center"><h1 class=content-heading>{{vm.person.name.label}}</h1><span flex></span><md-button class=md-icon-button ng-click=vm.editBioInfo($event)><md-icon>edit</md-icon></md-button></div><div ng-if="vm.person.altNames && vm.person.altNames.length > 0"><p>Other names:</p><ul><li ng-repeat="name in vm.person.altNames">{{name.label}}</li></ul></div></section><section class="content summary"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Summary</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editSummary($event)><md-icon>edit</md-icon></md-button></div><p ng-if=vm.person.summary ng-bind-html=vm.person.summary></p></section></div><div flex=40><section class="content birth"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Birth</h2><span flex></span><md-button class=md-icon-button ng-click="vm.editEvent(\'birth\', $event)"><md-icon>edit</md-icon></md-button></div><p><span class=description ng-if=vm.person.birth.date.description>{{vm.person.birth.date.description}}</span> <span class=location ng-if=vm.person.birth.location>in {{vm.person.birth.location}}</span></p><p ng-bind-html=vm.person.birth.description ng-if=vm.person.birth.description></p></section><section class="content death"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Death</h2><span flex></span><md-button class=md-icon-button ng-click="vm.editEvent(\'death\', $event)"><md-icon>edit</md-icon></md-button></div><p><span class=description ng-if=vm.person.death.date.description>{{vm.person.death.date.description}}</span> <span class=location ng-if=vm.person.death.location>in {{vm.person.death.location}}</span></p><p ng-bind-html=vm.person.death.description ng-if=vm.person.death.description></p></section></div></div>'),t.put("app/trc-bio/event-editor.html",'<div class=form-group><label class=control-label for=event-title>Title</label><input type=text id=event-title name=event-title class="form-control event-title" ng-model=event.title></div><div class=form-group><label class=control-label for=event-description>Description</label><textarea id=event-description name=event-description class="form-control event-description" ng-model=event.description></textarea></div><div class=form-group><label class=control-label for=event-location>Location</label><input type=text id=event-location name=event-location class="form-control event-location" ng-model=event.location></div><div class=form-group><label class=control-label for=event-date>Date</label><input type=text id=event-date name=event-date class="form-control event-date" ng-model=event.date.description><!-- TODO add datepicker --></div>'),t.put("app/trc-bio/name-editor.html",'<div class=form-group class=name-role><label class=control-label for=name-role>Role</label><select id=name-role name=name-role class="form-control name-role" ng-model=name.role><option ng-repeat="role in nameEditor.roles" value={{role.value}}>{{role.label}}</option></select></div><div class=form-group class=name-structure><label class=control-label>Structured Name</label><input type=text class=name-title placeholder=title ng-model=name.title> <input type=text class=name-given placeholder=given ng-model=name.givenName> <input type=text class=name-middle placeholder=middle ng-model=name.middleName> <input type=text class=name-family placeholder=family ng-model=name.familyName> <input type=text class=name-suffix placeholder=suffix ng-model=name.suffix></div><div class=form-group class=name-label><label for=label>Display Label</label><input type=text placeholder=label ng-model=name.label></div>'),
t.put("app/trc-bio/person-editor.html",'<div class=form-group><label for=person-name>Primary Name</label><trc-name-editor id=person-name ng-model=person.name></trc-name-editor></div><div class=form-group><label for=person-altnames>Alternate Names</label><div ng-repeat="name in person.altNames"><trc-name-editor id=person-altnames ng-model=name></trc-name-editor><button ng-click=personEditor.removeName($index)>&minus;</button></div><button ng-click=personEditor.addName()>+</button></div><div class=form-group><label for=person-birth>Birth</label><div ng-if=person.birth><trc-event-editor id=person-birth ng-model=person.birth></trc-event-editor><button ng-click="personEditor.removeEvent(\'birth\')">&minus;</button></div><div ng-if=!person.birth><button ng-click="personEditor.addEvent(\'birth\')">+</button></div></div><div class=form-group><label for=person-death>Death</label><div ng-if=person.death><trc-event-editor id=person-death ng-model=person.death></trc-event-editor><button ng-click="personEditor.removeEvent(\'death\')">&minus;</button></div><div ng-if=!person.death><button ng-click="personEditor.addEvent(\'death\')">+</button></div></div><div class=form-group><label class=control-label for=person-summary>Summary</label><textarea id=person-summary name=person-summary class="form-control person-summary" ng-model=person.summary></textarea></div>'),t.put("app/task/task.html",'<md-content flex layout=column><md-toolbar><div class=md-toolbar-tools><md-button class="md-accent md-icon-button" ng-click=vm.openMenu() title="toggle menu" hide-gt-sm><md-icon>menu</md-icon></md-button><img class=logo src=assets/images/sda-logo-light.png><h2><span>Task Management Dashboard</span></h2><span flex></span> <img class=ox-brand src=assets/images/ox-brand-rect.png alt="University of Oxford" hide-xs></div></md-toolbar><md-content flex layout=row><md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')">Left Sidebar</md-sidenav><md-content flex layout=column><md-content flex layout=column><md-input-container><label>Search</label><md-icon>search</md-icon><input type=search ng-model=filter ng-change=vm.search(filter)></md-input-container><md-content flex><div layout=row layout-align="center center" ng-if=vm.loading><md-progress-circular md-mode=indeterminate></md-progress-circular></div><div ng-repeat="stageId in vm.stageOrder" ng-if=vm.worklists[stageId]><md-subheader>{{vm.task.workflow.stages[stageId].label}}</md-subheader><md-list><md-list-item ng-repeat="item in vm.worklists[stageId].items | filter : filter | limitTo : 20" ng-mouseover="item.hover = true" ng-mouseout="item.hover = false" ng-click="vm.focusItem(item, $event)"><span ng-bind-html=item.label></span> <span flex></span><md-button class=md-exclude ng-repeat="transition in vm.task.workflow.stages[stageId].transitions" ng-click="vm.transition(item, transition, $event)" ng-show=item.hover><span>{{transition.label}}</span></md-button></md-list-item></md-list></div></md-content></md-content></md-content></md-content></md-content>'),t.put("app/vwise/workspace.html",'<div layout=row flex><md-sidenav md-component-id=left class=md-sidenav-left layout=column md-is-locked-open=vm.sidebarFocused><form layout=row flex=none><md-input-container flex><label for=searchQuery>Search</label><md-icon>search</md-icon><input type=search name=searchQuery id=searchQuery ng-model=vm.searchQuery ng-change=vm.search(vm.searchQuery) required md-sidenav-focus></md-input-container></form><md-content flex><div ng-if=vm.loading layout=row layout-align=center><md-progress-circular md-mode=indeterminate></md-progress-circular></div><div ng-if="!vm.loading &amp;&amp; vm.peopleResults &amp;&amp; vm.peopleResults.items.length > 0"><md-subheader>People</md-subheader><md-list><md-list-item ng-repeat="item in vm.peopleResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text><span>{{item.label}}</span></div></md-list-item></md-list></div><div ng-if="!vm.loading &amp;&amp; vm.worksResults &amp;&amp; vm.worksResults.items.length > 0"><md-subheader>Works</md-subheader><md-list><md-list-item ng-repeat="item in vm.worksResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text><span>{{item.label}}</span></div></md-list-item></md-list></div></md-content></md-sidenav><div flex jqyoui-droppable="{stack: true, onDrop:\'vm.thingDropped()\'}" data-drop=true class=workspace ng-click=vm.workspaceClicked($event)><div ng-repeat="panel in vm.workspace.panelStack track by panel.id" class=panel ng-style={left:panel.vprops.xPosition,top:panel.vprops.yPosition,width:panel.vprops.width,height:panel.vprops.height,background:panel.vprops.background,color:panel.vprops.foreground} jqyoui-draggable="{onDrag:\'vm.panelDragged(panel)\',onStop:\'vm.savePanelPosition(panel)\'}" ng-click="vm.activatePanel(panel, $event)" data-jqyoui-options="{handle:\'.drag-handle\'}" data-drag=true vwise-panel=panel layout=column></div></div></div>'),t.put("app/work/copy-edit-dialog.html","<md-dialog flex=50><md-toolbar><div class=md-toolbar-tools><h3>Digital Copy Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><copy-editor ng-model=vm.copy></copy-editor></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>"),t.put("app/work/edition-edit-dialog.html",'<md-dialog flex=80><md-toolbar><div class=md-toolbar-tools><h3>Bibliographic Information Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><div layout=row><md-input-container flex><label>edition name</label><input type=text ng-model=vm.edition.editionName required></md-input-container></div><section class=publication layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Publication Information</h2></div></md-toolbar><publication-info-editor ng-model=vm.edition.publicationInfo flex></publication-info-editor></section><section class=titles layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Titles</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addTitle($event)><md-icon>add</md-icon></md-button></div></md-toolbar><div class=title layout=row ng-repeat="title in vm.edition.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=author layout=row ng-repeat="author in vm.edition.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'otherAuthors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in vm.edition.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'otherAuthors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>'),t.put("app/work/edition.html",'<nav layout=row layout-padding><ol class=breadcrumbs flex><li><a ui-sref="editor.work({workId: vm.work.id})">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \': \' : \'\'}}{{vm.workTitle.subtitle}}</a></li><li>{{vm.edition.editionName}}</li></ol></nav><div layout=row layout-padding><div layout=column flex=60><section class="content citation"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Bibliographic Information</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editBibInfo($event)><md-icon>edit</md-icon></md-button></div><p><span class=authors ng-if="vm.edition.authors && vm.edition.authors.length > 0"><span class=author ng-repeat="author in vm.edition.authors"><span ng-if=author.authorId><a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span><span ng-if=!author.authorId>{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span></span></span><span class=title ng-if=vm.title>{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}. </span><span class=publication ng-if=vm.edition.publicationInfo><span ng-if=vm.edition.publicationInfo.place><span class=place>{{vm.edition.publicationInfo.place}}</span>: </span><span ng-if=vm.edition.publicationInfo.publisher><span class=publisher>{{vm.edition.publicationInfo.publisher}}</span>, </span><span ng-if=vm.edition.publicationInfo.date><time class=date datetime={{vm.edition.publicationInfo.date.calendar}}>{{vm.edition.publicationInfo.date.description}}</time>.</span></span></p></section><section class="content summary"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Summary</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editSummary($event)><md-icon>edit</md-icon></md-button></div><p ng-if=vm.edition.summary ng-bind-html=vm.edition.summary></p></section><section class="content volumes"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Volumes</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addVolume($event)><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat="volume in vm.edition.volumes" ui-sref="editor.volume({workId: vm.work.id, editionId: vm.edition.id, volumeId: volume.id})"><span>Volume {{volume.volumeNumber}}</span><md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteVolume(volume, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div><div layout=column flex=40><section class="content references"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Relationships</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addRelationship($event)><md-icon>add</md-icon></md-button></div><div ng-repeat="type in vm.relationships"><h3 class=content-heading>{{type.label}}</h3><md-list><md-list-item ng-repeat="relationship in type.relationships" ng-click=vm.openRelationship(relationship)><span ng-repeat="entity in relationship.entities">{{entity.label}}.</span><md-button class="md-secondary md-warn md-icon-button" ng-click="vm.deleteRelationship(relationship, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></div></section><section class="content copies"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addCopy($event)><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat="copy in vm.edition.copies" ng-click="vm.editCopy(copy, $event)"><span>{{copy.title}}</span><md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>'),t.put("app/work/relationship-edit-dialog.html",'<md-dialog flex=50><md-toolbar><div class=md-toolbar-tools><h3>Relationship Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form name=relationship ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content layout=column><md-input-container><label>type</label><md-select name=type ng-model=vm.selectedType ng-change=vm.setType(vm.selectedType) required><md-option ng-repeat="type in vm.types" ng-value=type>{{type.label}}</md-option></md-select><div class=errors ng-messages=relationship.type.$error ng-if=relationship.$dirty><div ng-message=required>Required</div></div></md-input-container><md-autocomplete md-items="work in vm.getResults(vm.searchText)" md-item-text=work.label md-search-text=vm.searchText md-selected-item-change=vm.selectWork(work) placeholder="search works" required><md-item-template><span md-highlight=vm.searchText md-highlight-flags=^i>{{work.label}}</span></md-item-template></md-autocomplete><md-input-container ng-if="vm.targets && vm.targets.length > 1"><label>target</label><md-select name=target ng-model=vm.selectedTarget ng-change=vm.setTarget(vm.selectedTarget) required><md-option ng-repeat="target in vm.targets" ng-value=target>{{target.label}}</md-option></md-select><div class=errors ng-messages=relationship.target.$error ng-if=relationship.$dirty><div ng-message=required>Required</div></div></md-input-container><div class=summary><h2>Summary</h2><div ckeditor ng-model=vm.relationship.description></div></div></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>'),t.put("app/work/volume-edit-dialog.html",'<md-dialog flex=80><md-toolbar><div class=md-toolbar-tools><h3>Bibliographic Information Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><div layout=row><md-input-container flex><label>volume number</label><input type=text ng-model=vm.volume.volumeNumber required></md-input-container></div><section class=publication layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Publication Information</h2></div></md-toolbar><publication-info-editor ng-model=vm.volume.publicationInfo></publication-info-editor></section><section class=titles layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Titles</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addTitle($event)><md-icon>add</md-icon></md-button></div></md-toolbar><div class=title layout=row ng-repeat="title in vm.volume.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=author layout=row ng-repeat="author in vm.volume.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'otherAuthors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in vm.volume.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'otherAuthors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>'),t.put("app/work/volume.html",'<nav layout=row layout-padding><ol class=breadcrumbs flex><li><a ui-sref="editor.work({workId: vm.work.id})">{{vm.workTitle.title}}{{vm.workTitle.title && vm.workTitle.subtitle ? \': \' : \'\'}}{{vm.workTitle.subtitle}}</a></li><li><a ui-sref="editor.edition({workId: vm.work.id, editionId: vm.edition.id})">{{vm.edition.editionName}}</a></li><li>Volume {{vm.volume.volumeNumber}}</li></ol></nav><div layout=row layout-padding><div layout=column flex=60><section class="content citation"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Bibliographic Information</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editBibInfo($event)><md-icon>edit</md-icon></md-button></div><p><span class=authors ng-if="vm.volume.authors && vm.volume.authors.length > 0"><span class=author ng-repeat="author in vm.volume.authors"><span ng-if=author.authorId><a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span><span ng-if=!author.authorId>{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span></span></span><span class=title ng-if=vm.title>{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}. </span><span class=publication ng-if=vm.volume.publicationInfo><span ng-if=vm.volume.publicationInfo.place><span class=place>{{vm.volume.publicationInfo.place}}</span>: </span><span ng-if=vm.volume.publicationInfo.publisher><span class=publisher>{{vm.volume.publicationInfo.publisher}}</span>, </span><span ng-if=vm.volume.publicationInfo.date><time class=date datetime={{vm.volume.publicationInfo.date.calendar}}>{{vm.volume.publicationInfo.date.description}}</time>.</span></span></p></section><section class="content summary"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Summary</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editSummary($event)><md-icon>edit</md-icon></md-button></div><p ng-if=vm.volume.summary ng-bind-html=vm.volume.summary></p></section></div><div layout=column flex=40><section class="content references"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Relationships</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addRelationship($event)><md-icon>add</md-icon></md-button></div><div ng-repeat="type in vm.relationships"><h3 class=content-heading>{{type.label}}</h3><md-list><md-list-item ng-repeat="relationship in type.relationships" ng-click=vm.openRelationship(relationship)><span ng-repeat="entity in relationship.entities">{{entity.label}}.</span><md-button class="md-secondary md-warn md-icon-button" ng-click="vm.deleteRelationship(relationship, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></div></section><section class="content copies"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addCopy($event)><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat="copy in vm.volume.copies" ng-click="vm.editCopy(copy, $event)"><span>{{copy.title}}</span><md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>'),t.put("app/work/work-edit-dialog.html",'<md-dialog flex=80><md-toolbar><div class=md-toolbar-tools><h3>Bibliographic Information Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><div class=md-dialog-content><section class=titles layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Titles</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addTitle($event)><md-icon>add</md-icon></md-button></div></md-toolbar><div class=title layout=row ng-repeat="title in vm.work.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteTitle(title, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'authors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class=author layout=row ng-repeat="author in vm.work.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'authors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click="vm.addAuthor(\'otherAuthors\', $event)"><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in vm.work.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="vm.deleteAuthor(\'otherAuthors\', author, $event)"><md-icon>delete</md-icon></md-button></md-input-container></div></section></div></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>'),t.put("app/work/work.html",'<nav layout=row layout-padding><ol class=breadcrumbs flex><li>{{vm.bcTitle.title}}{{vm.bcTitle && vm.bcTitle.subtitle ? \': \' : \'\'}}{{vm.bcTitle.subtitle}}</li></ol></nav><div layout=row layout-padding><div layout=column flex=60><section class="content citation"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Bibliographic Information</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editBibInfo($event)><md-icon>edit</md-icon></md-button></div><p><span class=authors ng-if="vm.work.authors && vm.work.authors.length > 0"><span class=author ng-repeat="author in vm.work.authors"><span ng-if=author.authorId><a ui-sref="editor.person({id: author.authorId})">{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}</a>. </span><span ng-if=!author.authorId>{{author.lastName}}{{author.lastName && author.firstName ? \', \' : \'\'}}{{author.firstName}}. </span></span></span><span class=title ng-if=vm.title>{{vm.title.title}}{{vm.title.title && vm.title.subtitle ? \': \' : \'\'}}{{vm.title.subtitle}}.</span></p></section><section class="content summary"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Summary</h2><span flex></span><md-button class=md-icon-button ng-click=vm.editSummary($event)><md-icon>edit</md-icon></md-button></div><p ng-if=vm.work.summary ng-bind-html=vm.work.summary></p></section><section class="content editions"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Editions</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addEdition($event)><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat="edition in vm.work.editions" ui-sref="editor.edition({workId: vm.work.id, editionId: edition.id})"><span>{{edition.editionName}}</span><md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteEdition(edition, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div><div layout=column flex=40><section class="content references"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Relationships</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addRelationship($event)><md-icon>add</md-icon></md-button></div><div ng-repeat="type in vm.relationships"><h3 class=content-heading>{{type.label}}</h3><md-list><md-list-item ng-repeat="relationship in type.relationships" ng-click=vm.openRelationship(relationship)><span ng-repeat="entity in relationship.entities">{{entity.label}}.</span><md-button class="md-secondary md-warn md-icon-button" ng-click="vm.deleteRelationship(relationship, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></div></section><section class="content copies"><div class=toolbar layout=row layout-align="start center"><h2 class=content-heading>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=vm.addCopy($event)><md-icon>add</md-icon></md-button></div><md-list><md-list-item ng-repeat="copy in vm.work.copies" ng-click="vm.editCopy(copy, $event)"><span>{{copy.title}}</span><md-button class="md-secondary md-icon-button md-warn" ng-click="vm.deleteCopy(copy, $event)"><md-icon>delete</md-icon></md-button></md-list-item></md-list></section></div></div>'),t.put("app/components/summary-edit-dialog/summary-edit-dialog.html","<md-dialog flex=50><md-toolbar><div class=md-toolbar-tools><h3>Summary Editor</h3><span flex></span><md-button class=md-icon-button ng-click=vm.cancel()><md-icon>close</md-icon></md-button></div></md-toolbar><form ng-submit=vm.close()><md-dialog-content><!-- material-compliant padding not used since WYSIWYG text editor *is* the UI --><summary-editor ng-model=vm.summary></summary-editor></md-dialog-content><md-dialog-actions><md-button ng-click=vm.cancel()>Cancel</md-button><md-button class=md-primary type=submit>Done</md-button></md-dialog-actions></form></md-dialog>"),t.put("app/components/date-editor/date-editor.html","<div layout=row><md-input-container flex><label>date</label><input type=text ng-model=date.description></md-input-container><md-input-container flex><label>ISO-8601 date</label><input type=datetime ng-model=date.calendar></md-input-container></div>"),t.put("app/components/summary-editor/summary-editor.html","<div ckeditor ng-model=summary></div>"),t.put("app/admin/editors/articles/article.html",'<form flex layout=column layout-padding><!-- title editor bar --><md-content layout=row><md-input-container flex=60 layout-sm=column layout-align="begin end"><label>Title</label><input type=text ng-model=vm.article.title></md-input-container><section flex=40 layout=row layout-sm=column layout-align="end center" layout-wrap><md-button class=md-raised ng-click=vm.cancel()>Cancel</md-button><md-button class="md-raised md-primary" ng-click=vm.save()>Save</md-button></section></md-content><!-- TODO add space for authors --><!-- TODO add save button and auto-save --><!-- TODO add sidebar for notes, biblio, links, etc --><div ckeditor=vm.editor.config ng-model=vm.article.body>Click here to edit article</div><!-- TODO how to make this fill all available space --></form>'),t.put("app/person/components/event-editor/event-editor.html","<div layout=column><div layout=row><md-input-container flex><label>location</label><input type=text ng-model=event.location></md-input-container><date-editor ng-model=event.date flex></date-editor></div><div layout=row layout-padding><div flex><h2>Description</h2><div flex ckeditor ng-model=event.description></div></div></div></div>"),t.put("app/person/components/name-editor/name-editor.html","<div layout=column><div layout=row><md-input-container flex=10><label>title</label><input type=text ng-model=name.title></md-input-container><md-input-container flex=30><label>given</label><input type=text ng-model=name.givenName></md-input-container><md-input-container flex=20><label>middle</label><input type=text ng-model=name.middleName></md-input-container><md-input-container flex=30><label>family</label><input type=text ng-model=name.familyName></md-input-container><md-input-container flex=10><label>suffix</label><input type=text ng-model=name.suffix></md-input-container></div><md-input-container><label>display label</label><input type=text ng-model=name.label required></md-input-container></div>"),t.put("app/task/components/work-editor/work-editor-item.html",'<div layout=row layout-align="center center" ng-if=!vm.loaded><md-progress-circular md-mode=indeterminate></md-progress-circular></div><div ng-if=vm.loaded><work-editor ng-model=vm.work></work-editor></div>'),t.put("app/vwise/components/panel/panel.html","<div class=drag-handle ng-style=\"{background: panel.vprops.background}\" layout=row><span flex></span> <input type=color ng-model=panel.vprops.background> <button class=close ng-click=vm.closePanel(panel)>&times;</button></div><div class=content flex layout=column></div><div class=resize-handle jqyoui-draggable=\"{onDrag:'vm.resizePanel(panel)',onStop:'vm.savePanelSize(panel)'}\" data-drag=true></div>"),t.put("app/vwise/components/person-panel/person-panel.html","<div class=panel-person flex layout=column><h1><span class=name>{{name}}</span></h1><md-tabs flex><md-tab ng-if=person.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=person.summary></div></md-tab-body></md-tab></md-tabs></div>"),t.put("app/vwise/components/work-panel/edition-panel.html",'<div class=panel-edition flex layout=column><h1><span class=authors><span class=author ng-repeat="author in edition.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span></h1><md-tabs flex><md-tab ng-if=edition.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=edition.summary></div></md-tab-body></md-tab><md-tab><md-tab-label><md-icon>link</md-icon></md-tab-label><md-tab-body>Coming soon...</md-tab-body></md-tab><md-tab ng-if="edition.volumes.length > 0"><md-tab-label><md-icon>content_copy</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in edition.volumes" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>Volume {{item.volumeNumber}} ({{item.publicationInfo.date.description}})</div></md-list-item></md-list></md-tab-body></md-tab><md-tab ng-if="edition.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in edition.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),t.put("app/vwise/components/work-panel/volume-panel.html",'<div class=panel-volume flex layout=column><h1><span class=authors><span class=author ng-repeat="author in volume.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span> <span class=volume-name>Volume {{volume.volumeNumber}}.</span></h1><md-tabs flex><md-tab ng-if=volume.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=volume.summary></div></md-tab-body></md-tab><md-tab><md-tab-label><md-icon>link</md-icon></md-tab-label><md-tab-body>Coming soon...</md-tab-body></md-tab><md-tab ng-if="volume.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in volume.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),
t.put("app/vwise/components/work-panel/work-panel.html",'<div class=panel-work flex layout=column><h1><span class=authors><span class=author ng-repeat="author in work.authors">{{author.lastName}}. </span></span><span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span></h1><md-tabs flex><md-tab ng-if=work.summary><md-tab-label><md-icon>subject</md-icon></md-tab-label><md-tab-body><div class=summary ng-bind-html=work.summary></div></md-tab-body></md-tab><md-tab><md-tab-label><md-icon>link</md-icon></md-tab-label><md-tab-body>Coming soon...</md-tab-body></md-tab><md-tab ng-if="work.editions.length > 0"><md-tab-label><md-icon>content_copy</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in work.editions" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.editionName}} ({{item.publicationInfo.date.description}})</div></md-list-item></md-list></md-tab-body></md-tab><md-tab ng-if="work.copies.length > 0"><md-tab-label><md-icon>book</md-icon></md-tab-label><md-tab-body><md-list><md-list-item ng-repeat="item in work.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true><div class=md-list-item-text>{{item.title}}</div></md-list-item></md-list></md-tab-body></md-tab></md-tabs></div>'),t.put("app/work/components/author-ref-editor/author-ref-editor.html",'<div layout=column><div layout=row><md-autocomplete required md-items="item in vm.authorRoles" md-item-text=role md-min-length=0 md-search-text=ref.role md-selected-item-change="ref.role = item" md-floating-label=role><md-item-template><span md-highlight-text=ref.role>{{item}}</span></md-item-template></md-autocomplete><md-input-container flex><label>first name</label><input type=text ng-model=ref.firstName></md-input-container><md-input-container flex><label>last name</label><input type=text ng-model=ref.lastName></md-input-container></div><div layout=row><md-autocomplete flex md-items="person in vm.getResults(vm.linkAuthorSearchText)" md-item-text=person.label md-search-text=vm.linkAuthorSearchText md-search-text-change=vm.searchPeople(vm.linkAuthorSearchText) md-selected-item-change=vm.setLinkedAuthor(person) md-floating-label="linked author"><span md-highlight-text=vm.linkAuthorSearchText>{{person.label}}</span></md-autocomplete></div></div>'),t.put("app/work/components/copy-editor/copy-editor.html",'<ng-form name=copyForm layout=column flex><md-input-container><label for=title>Title</label><input type=text name=title id=title ng-model=copy.title></md-input-container><div layout=row><md-input-container><label for=type>Type</label><md-select name=type id=type ng-model=copy.type required ng-change="vm.setProperties(copy.type, copyUrl)"><md-option ng-repeat="handler in vm.refHandlers" value={{handler.id}}>{{handler.display}}</md-option></md-select></md-input-container><md-input-container flex><label for=url>URL</label><input type=url name=url id=url ng-model=copyUrl ng-change="vm.setProperties(copy.type, copyUrl)"></md-input-container></div><ul class="properties properties-inline"><li ng-repeat="(key, value) in copy.properties"><span class=label>{{key}}</span> <span class=value>{{value}}</span></li></ul><md-input-container><label for=rights>Description of Rights</label><input type=text name=rights id=rights ng-model=copy.rights></md-input-container><h3>Summary</h3><summary-editor ng-model=copy.summary flex></summary-editor></ng-form>'),t.put("app/work/components/edition-editor/edition-editor.html",'<div layout=row><md-input-container flex><label>edition name</label><input type=text ng-model=edition.editionName required></md-input-container></div><section class=publication layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Publication Information</h2></div></md-toolbar><publication-info-editor ng-model=edition.publicationInfo flex></publication-info-editor></section><section class=titles layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Titles</h2><span flex></span><md-button class=md-icon-button ng-click=edition.titles.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=title layout=row ng-repeat="title in edition.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="edition.titles.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Authors</h2><span flex></span><md-button class=md-icon-button ng-click=edition.authors.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=author layout=row ng-repeat="author in edition.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="edition.authors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click=edition.otherAuthors.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in edition.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="edition.otherAuthors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=summary><h2>Summary</h2><summary-editor ng-model=edition.summary flex></summary-editor></section><section class=volumes><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Volumes</h2><span flex></span><md-button class=md-icon-button ng-click=vm.createVolume()><md-icon>add</md-icon></md-button></div></md-toolbar><md-whiteframe class=volume layout=column layout-margin ng-repeat="volume in vm.volumes" ng-class="{\'md-whiteframe-2dp\': !volume.focused, \'md-whiteframe-8dp\': volume.focused}"><h3 layout=row><div flex layout=row layout-align="start center" ng-click="volume.focused = !volume.focused"><md-icon>{{ edition.focused ? \'expand_less\' : \'expand_more\'}}</md-icon><span>Volume {{volume.model.volumeNumber}}</span> <span flex></span></div><md-button class="md-icon-button md-warn" ng-click=vm.deleteVolume($index)><md-icon>delete</md-icon></md-button></h3><div slide-toggle=volume.focused><volume-editor ng-model=volume.model flex></volume-editor></div></md-whiteframe></section><section class=copies><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=edition.copies.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=copy layout=column ng-repeat="copy in edition.copies"><div layout=row><copy-editor ng-model=copy flex></copy-editor><md-button class="md-icon-button md-warn" ng-click="edition.copies.splice($index, 1)"><md-icon>delete</md-icon></md-button></div></div></section>'),t.put("app/work/components/publication-info-editor/publication-info-editor.html","<div layout=row><md-input-container flex><label>publisher</label><input type=text ng-model=pubInfo.publisher></md-input-container><md-input-container flex><label>location</label><input type=text ng-model=pubInfo.place></md-input-container><date-editor ng-model=pubInfo.date flex></date-editor></div>"),t.put("app/work/components/title-editor/title-editor.html","<div layout=row><md-input-container><label>type</label><md-select ng-model=title.type required><md-option value=bibliographic>bibliographic</md-option><md-option value=canonical>canonical</md-option><md-option value=short>short</md-option></md-select></md-input-container><md-input-container flex><label>title</label><input type=text ng-model=title.title required><div ng-switch=title.type><small ng-switch-when=bibliographic>the full title as published on the work</small> <small ng-switch-when=canonical>title by which the work is commonly known in the academic realm</small> <small ng-switch-when=short>shortened title coloquially used by the public</small></div></md-input-container><md-input-container flex><label>subtitle</label><input type=text ng-model=title.subtitle></md-input-container></div>"),t.put("app/work/components/volume-editor/volume-editor.html",'<div layout=row><md-input-container flex><label>volume number</label><input type=text ng-model=volume.volumeNumber required></md-input-container></div><section class=publication layout=column><h2>Publication Information</h2><publication-info-editor ng-model=volume.publicationInfo></publication-info-editor></section><section class=titles layout=column><h2 layout=row><span flex>Titles</span><md-button class=md-icon-button ng-click=volume.titles.push({})><md-icon>add</md-icon></md-button></h2><div class=title layout=row ng-repeat="title in volume.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="volume.titles.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><h2 layout=row><span flex>Authors</span><md-button class=md-icon-button ng-click=volume.authors.push({})><md-icon>add</md-icon></md-button></h2><div class=author layout=row ng-repeat="author in volume.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="volume.authors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click=volume.otherAuthors.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in volume.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="volume.otherAuthors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=summary><h2>Summary</h2><summary-editor ng-model=volume.summary flex></summary-editor></section><section class=copies><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=volume.copies.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=copy layout=column ng-repeat="copy in volume.copies"><div layout=row><copy-editor ng-model=copy flex></copy-editor><md-button class="md-icon-button md-warn" ng-click="volume.copies.splice($index, 1)"><md-icon>delete</md-icon></md-button></div></div></section>'),t.put("app/work/components/work-editor/work-editor.html",'<section class=titles layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Titles</h2><span flex></span><md-button class=md-icon-button ng-click=work.titles.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=title layout=row ng-repeat="title in work.titles"><title-editor ng-model=title flex></title-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="work.titles.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=authors layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Authors</h2><span flex></span><md-button class=md-icon-button ng-click=work.authors.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=author layout=row ng-repeat="author in work.authors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="work.authors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class="authors other-authors" layout=column><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Other Authors</h2><span flex></span><md-button class=md-icon-button ng-click=work.otherAuthors.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class="author other-author" layout=row ng-repeat="author in work.otherAuthors"><author-ref-editor ng-model=author flex></author-ref-editor><md-input-container><md-button class="md-icon-button md-warn" ng-click="work.otherAuthors.splice($index, 1)"><md-icon>delete</md-icon></md-button></md-input-container></div></section><section class=summary><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Summary</h2></div></md-toolbar><summary-editor ng-model=work.summary flex></summary-editor></section><section class=editions><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Editions</h2><span flex></span><md-button class=md-icon-button ng-click=vm.createEdition()><md-icon>add</md-icon></md-button></div></md-toolbar><md-whiteframe class=edition layout=column layout-margin ng-repeat="edition in vm.editions" ng-class="{ \'md-whiteframe-2dp\': !edition.focused, \'md-whiteframe-8dp\': edition.focused }"><h3 layout=row><div flex layout=row layout-align="start center" ng-click="edition.focused = !edition.focused"><md-icon>{{ edition.focused ? \'expand_less\' : \'expand_more\'}}</md-icon><span>{{edition.model.editionName}}</span> <span flex></span></div><md-button class="md-icon-button md-warn" ng-click=vm.deleteEdition($index)><md-icon>delete</md-icon></md-button></h3><div slide-toggle=edition.focused><edition-editor ng-model=edition.model flex></edition-editor></div></md-whiteframe></section><section class=copies><md-toolbar class=md-hue-3><div class=md-toolbar-tools><h2>Digital Copies</h2><span flex></span><md-button class=md-icon-button ng-click=work.copies.push({})><md-icon>add</md-icon></md-button></div></md-toolbar><div class=copy layout=column ng-repeat="copy in work.copies"><div layout=row><copy-editor ng-model=copy flex></copy-editor><md-button class="md-icon-button md-warn" ng-click="work.copies.splice($index, 1)"><md-icon>delete</md-icon></md-button></div></div></section>')}]);
//# sourceMappingURL=../maps/scripts/app-1fdf7a04db.js.map
