!function(){"use strict";angular.module("sdaLibrary",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcCore","trcBiblio","trcBio","trcRefs","trcReln","trcSeeAlso","sda"])}(),function(){"use strict";function e(e){function t(t){return angular.isArray(t)&&(t=t[0]),t?e.compact([t.title,t.subtitle]).join(": "):""}return t}e.$inject=["_"],angular.module("sdaLibrary").filter("workTitle",e)}(),function(){"use strict";function e(e,t){var o=this;e.$watch("$ctrl.title",function(e){angular.isArray(e)&&(o.title=t.getTitle(e))})}e.$inject=["$scope","worksRepo"],angular.module("sdaLibrary").component("workTitle",{templateUrl:"app/components/work-title/work-title.html",bindings:{title:"<"},controller:e})}(),function(){"use strict";angular.module("sdaLibrary").component("workAuthors",{templateUrl:"app/components/work-authors/work-authors.html",bindings:{authors:"<"}})}(),function(){"use strict";function e(e,t){var o=this;o.loading=!1,o.relns=null,e.$watch("$ctrl.token",function(e){if(e){o.loading=!0;var n=t.search(e),i=n.$promise.then(function(){var o=t.normalizeRelationships(n,e);return o.$promise});i.then(function(e){o.loading=!1,o.relns=e},function(){o.loading=!1,o.relns=null})}})}e.$inject=["$scope","relnRepo"],angular.module("sdaLibrary").component("relationships",{templateUrl:"app/components/relationships/relationships.html",bindings:{token:"<"},controller:e})}(),function(){"use strict";function e(){function e(e){var o="/book-reader/#/"+t.workId+"/"+e;return(t.editionId||t.volumeId)&&(o+="?"),t.editionId&&(o+="editionId="+t.editionId),t.editionId&&t.volumeId&&(o+="&"),t.volumeId&&(o+="volumeId="+t.volumeId),o}var t=this;t.getUrl=e}angular.module("sdaLibrary").component("readOnlineLink",{templateUrl:"app/components/read-online-link/read-online-link.html",bindings:{copies:"<",workId:"<",editionId:"<",volumeId:"<"},controller:e})}(),function(){"use strict";function e(e){function t(t){var o=t?[t.title,t.givenName,t.middleName,t.familyName,t.suffix]:[];return e.filter(o).join(" ")}return t}e.$inject=["_"],angular.module("sdaLibrary").filter("personName",e)}(),function(){"use strict";angular.module("sdaLibrary").component("personName",{templateUrl:"app/components/person-name/person-name.html",bindings:{name:"<"}})}(),function(){"use strict";angular.module("sdaLibrary").component("dateLocation",{templateUrl:"app/components/date-location/date-location.html",bindings:{event:"<"}})}(),function(){"use strict";function e(e){var o=this;e.$watch("$ctrl.content",function(e){o.longEnough=!e||e.length>t})}e.$inject=["$scope"],angular.module("sdaLibrary").component("collapsibleSummary",{templateUrl:"app/components/collapsible-summary/collapsible-summary.html",bindings:{content:"<"},controller:e});var t=500}(),function(){"use strict";angular.module("sdaLibrary").component("citation",{templateUrl:"app/components/citation/citation.html",bindings:{authors:"<",title:"<",pubInfo:"<",edition:"<",volume:"<"}})}(),function(){"use strict";function e(e,t,o){var n=this;n.person=e,n.refs=t,n.relatedWorks=o}e.$inject=["person","refs","relatedWorks"],angular.module("sdaLibrary").controller("PersonController",e)}(),function(){"use strict";function e(e,t,o,n){function i(){e.get("/assets/data/navigation.json").then(function(e){r.navigation=e.data})}function a(e){r.loading=!0,r.results=n.search(e),r.results.$promise.then(function(){r.loading=!1},function(){r.loading=!1,r.results=null,o.showSimple("Failed to load search results")})}var r=this;r.navigation=[],r.search=a,r.loading=!1,r.results=null,r.startingPoints=[{author:"Spinoza",work:"Treatise Theological and Political",authorId:"9",workId:"64"},{author:"Leslie",work:"A Short and Easy Method with the Deists",authorId:"12",workId:"47"},{author:"Collins",work:"A Discourse of the Grounds and Reasons of the Christian Religion",authorId:"30",workId:"26"},{author:"Sherlock",work:"The Trial of the Witnesses of the Resurrection",authorId:"6",workId:"400"},{author:"Tindal",work:"Christianity as Old as the Creation",authorId:"3",workId:"68"},{author:"Butler",work:"The Analogy of Religion",authorId:"13",workId:"13"},{author:"Henry Dodwell Jr.",work:"Christianity Not Founded on Argument",authorId:"33",workId:"30"},{author:"Hume",work:"Philosophical Essays",authorId:"5",workId:"2"},{author:"Leland",work:"A View of the Principal Deistical Writers",authorId:"41",workId:"45"},{author:"Campbell",work:"A Dissertation on Miracles",authorId:"4",workId:"4"},{author:"Paley",work:"Horae Paulinae",authorId:"16",workId:"162"},{author:"Paley",work:"A View of the Evidences of Christianity",authorId:"16",workId:"1267"},{author:"Gibbon",work:"The Decline and Fall of the Roman Empire",authorId:"1142",workId:"1382"},{author:"Paine",work:"The Age of Reason, Part 2",authorId:"77",workId:"1691"},{author:"Watson",work:"An Apology for the Bible",authorId:"70",workId:"1474"},{author:"Strauss",work:"The Life of Jesus, Critically Examined",authorId:"10",workId:"909"},{author:"Whately",work:"Historic Doubts Relative to Napoleon Buonaparte",authorId:"68",workId:"1499"},{author:"Blunt",work:"Undesigned Coincidences",authorId:"61",workId:"181"},{author:"Temple, et al.",work:"Essays and Reviews",authorId:"",workId:"2002"},{author:"Colenso",work:"The Pentateuch and the Book of Joshua Critically Examined",authorId:"1477",workId:"2007"},{author:"Arnold",work:"Literature and Dogma",authorId:"1162",workId:"1711"},{author:"Cassels",work:"Supernatural Religion",authorId:"1130",workId:"1789"},{author:"Leathes",work:"Old Testament Prophecy",authorId:"522",workId:"765"}],i()}e.$inject=["$http","$mdSidenav","$mdToast","trcSearch"],angular.module("sdaLibrary").controller("LibraryController",e)}(),function(){"use strict";function e(e,t,o){var n=this;n.work=e,n.refs=t,n.title=o.getTitle(e.titles)}e.$inject=["work","refs","worksRepo"],angular.module("sdaLibrary").controller("BookController",e)}(),function(){"use strict";function e(e,t,o,n){e.debug("runBlock end"),t.$on("$stateChangeSuccess",function(){n("send","pageview",{page:o.url()})})}e.$inject=["$log","$rootScope","$location","analytics"],angular.module("sdaLibrary").run(e)}(),function(){"use strict";function e(e,t){e.state("library",{url:"/",templateUrl:"app/library/library.html",controller:"LibraryController",controllerAs:"vm"}).state("library.person",{url:"people/:id",templateUrl:"app/person/person.html",controller:"PersonController",controllerAs:"vm",resolve:{person:["$stateParams","peopleRepo",function(e,t){"ngInject";var o=t.get(e.id);return o.$promise}],refs:["$stateParams","peopleRepo","refsRepoFactory",function(e,t,o){"ngInject";var n=t.getReferencesEndpoint(e.id),i=o.getRepo(n),a=i.get();return a.$promise}],relatedWorks:["$stateParams","worksRepo",function(e,t){"ngInject";var o=t.searchByAuthor(e.id);return o.$promise.then(function(e){return e.items})}]}}).state("library.book",{url:"books/:id",templateUrl:"app/book/book.html",controller:"BookController",controllerAs:"vm",resolve:{work:["$stateParams","worksRepo",function(e,t){"ngInject";var o=t.getWork(e.id);return o.$promise}],refs:["$stateParams","worksRepo","refsRepoFactory",function(e,t,o){"ngInject";var n=t.getReferencesEndpoint(e.id),i=o.getRepo(n),a=i.get();return a.$promise}]}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaLibrary").config(e)}(),function(){"use strict";angular.module("sdaLibrary").constant("ga",ga)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,s){e.debugEnabled(!0),o.url="/api/catalog/works",n.url="/api/catalog/people",i.url="/api/catalog/search",a.url="/api/catalog/relationships",r.url="/api/catalog/seealso",l.url="/assets/data/navigation.json",s.id="UA-87254463-1",t.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),t.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),t.theme("default").primaryPalette("darkBrown").accentPalette("copper")}e.$inject=["$logProvider","$mdThemingProvider","worksRepoProvider","peopleRepoProvider","trcSearchProvider","relnRepoProvider","seeAlsoRepoProvider","sdaSitenavProvider","analyticsProvider"],angular.module("sdaLibrary").config(e)}(),function(){"use strict";function e(e,n){function i(t,o){function n(e){return e.get("/assets/csl/locales/locales-"+t+".xml").then(function(e){return e.data})}n.$inject=["$http"],e.addLocale(o,n)}function a(t,o){function n(e){return e.get("/assets/csl/styles/"+t+".csl").then(function(e){return e.data})}n.$inject=["$http"],e.addStyle(o,n)}n.typemapUrl="/assets/typemap/zotero-csl.json",angular.forEach(t,i),angular.forEach(o,a)}e.$inject=["citeprocProvider","refsRendererProvider"],angular.module("sdaLibrary").config(e);var t={"en-US":"en-US"},o={mla:"modern-language-association",chicago:"chicago-author-date"}}(),angular.module("sdaLibrary").run(["$templateCache",function(e){e.put("app/book/book.html",'<md-content class=md-content layout=row layout-padding layout-margin> <div flex=66> <h1 class="title md-display-1" layout=row> <work-title title=vm.title></work-title> <span flex></span> <read-online-link copies=vm.work.copies work-id=vm.work.id></read-online-link> </h1> <p class=by-line ng-if="vm.work.authors && vm.work.authors.length > 0"><span>by </span><work-authors authors=vm.work.authors></work-authors></p> <collapsible-summary ng-if=vm.work.summary content=vm.work.summary></collapsible-summary> <section class=editions ng-if="vm.work.editions && vm.work.editions.length > 0"> <h2 class=md-title>Editions</h2> <div class=edition ng-repeat="edition in vm.work.editions | orderBy:\'publicationInfo.date.calendar\'"> <h3 class=handle layout=row layout-align="start center" ng-click="edition.active = !edition.active"> <md-button class=md-icon-button aria-label="toggle details"> <md-icon>expand_{{edition.active ? \'less\' : \'more\'}}</md-icon> </md-button> <span>{{edition.editionName || \'[Untitled Edition]\'}}</span> <span flex></span> <read-online-link copies=edition.copies work-id=vm.work.id edition-id=edition.id></read-online-link> </h3> <div class=slide ng-show=edition.active> <citation authors=edition.authors title=edition.titles edition=edition.editionName pub-info=edition.publicationInfo></citation> <section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section> <section class=volumes ng-if="edition.volumes && edition.volumes.length > 0"> <h4 class=md-title>Volumes</h4> <div class=volume ng-repeat="volume in edition.volumes"> <h5 class=handle ng-click="volume.active = !volume.active" layout=row layout-align="start center"> <md-button class=md-icon-button> <md-icon>expand_{{volume.active ? \'less\': \'more\'}}</md-icon> </md-button> <span>Volume {{volume.volumeNumber}}</span> <span flex></span> <read-online-link copies=volume.copies work-id=vm.work.id edition-id=edition.id volume-id=volume.id></read-online-link> </h5> <div class=slide ng-show=volume.active> <citation authors=volume.authors title=volume.titles edition=edition.editionName volume=volume.volumeNumber pub-info=volume.publicationInfo></citation> <section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section> </div> </div> </section> </div> </div> </section> </div> <div layout=column layout-padding flex=33> <relationships token=vm.work.ref.token></relationships> <see-also show-heading=true token=vm.work.ref.token></see-also> <div ng-if="!(vm.refs.bibliography | empty)"> <h2>Bibliography</h2> <bibliography refs=vm.refs style-id=chicago></bibliography> </div> </div> </md-content> '),e.put("app/library/library.html",'<sda-header md-sidenav-id=left active-url=/research></sda-header> <div class="page-banner shade" layout=row layout-align=center> <div class=container flex> <h1>Research</h1> </div> </div> <div layout=row layout-align=center flex> <main class=container layout=row flex> <md-sidenav md-component-id=left class=md-sidenav-left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <div layout=row flex=none> <md-input-container flex> <label>search</label> <md-icon>search</md-icon> <input type=search ng-model=query ng-model-options="{debounce: 500}" ng-change=vm.search(query)> </md-input-container> </div> <div layout=row ng-if=vm.loading layout-align="center center" flex> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <md-content ng-if="!vm.loading && vm.results" flex> <div ng-if="vm.results.results.people.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="hidePeople = !hidePeople"> <md-icon>{{hidePeople ? \'keyboard_arrow_right\' : \'expand_more\'}}</md-icon> People </md-subheader> <md-list class=slide ng-hide=hidePeople> <md-list-item class=md-2-line ng-repeat="person in vm.results.results.people" ui-sref=".person({id: person.id})"> <div class=md-list-item-text> <h3 ng-bind-html=person.label></h3> <p ng-bind-html=person.summaryExcerpt></p> </div> </md-list-item> </md-list> </div> <div ng-if="vm.results.results.works.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="hideWorks = !hideWorks"> <md-icon>{{hideWorks ? \'keyboard_arrow_right\' : \'expand_more\'}}</md-icon> Works </md-subheader> <md-list class=slide ng-hide=hideWorks> <md-list-item ng-repeat="work in vm.results.results.works" ui-sref=".book({id: work.id})" aria-label="work.label | stripTags"> <div class=md-list-item-text ng-bind-html=work.label></div> </md-list-item> </md-list> </div> </md-content> </md-sidenav> <md-content layout=column flex ui-view> <div flex=noshrink layout=row layout-padding layout-margin> <section flex=66> <div class=tools layout=row layout-align=center> <a href=/influence-map> <md-card> <img src=/assets/images/tile-influence-map.png class=md-card-image> <md-card-content> <h3>Influence Map</h3> </md-card-content> </md-card> </a> <a href=/vwise> <md-card> <img src=/assets/images/tile-vwise.png class=md-card-image> <md-card-content> <h3>Visual Workspace</h3> </md-card-content> </md-card> </a> </div> </section> <aside class=starting-points flex=33> <h2>Starting Points</h2> <md-list> <md-list-item ng-repeat="book in vm.startingPoints"> <div class="md-list-item-text bibentry-label"> <a ui-sref=".person({id: book.authorId})" ng-bind-html=book.author></a>, <a class=title ng-bind-html=book.work ui-sref=".book({id: book.workId})"></a> </div> </md-list-item> </md-list> </aside> </div> </md-content> </main> </div> '),e.put("app/person/person.html",'<md-content layout=row layout-padding layout-margin flex=noshrink> <div flex=66> <h1 class=md-display-1>{{vm.person.name.label}}</h1> <collapsible-summary ng-if=vm.person.summary content=vm.person.summary></collapsible-summary> <section class=bibliography ng-if="!(vm.refs.bibliography | empty)"> <h2>Bibliography</h2> <bibliography refs=vm.refs style-id=chicago></bibliography> </section></div>  <aside layout=column layout-padding flex=33> <div ng-if="(vm.person.name | personName) != vm.person.name.label" layout=row> <strong flex=20>Name</strong> <person-name name=vm.person.name></person-name> </div> <div ng-if="vm.person.altNames.length > 0" layout=row> <strong flex=20>a.k.a.</strong> <ul class=alt-names layout=column> <li ng-repeat="name in vm.person.altNames"> <span class=display ng-if=name.label>{{name.label}}</span> <person-name name=name ng-if=!name.label></person-name> </li> </ul> </div> <div ng-if=vm.person.birth layout=row> <strong flex=20>Born</strong> <date-location event=vm.person.birth layout=column></date-location> </div> <div ng-if=vm.person.death layout=row> <strong flex=20>Died</strong> <date-location event=vm.person.death layout=column></date-location> </div> <div ng-if="vm.relatedWorks && vm.relatedWorks.length > 0"> <h2 class=list-heading>Books</h2> <md-list> <md-list-item ui-sref="^.book({id: work.id})" ng-repeat="work in vm.relatedWorks | orderBy: \'pubYear\'"> <p class=work-result-label><span class=title>{{work.title}}</span> <span ng-if=work.pubYear>({{work.pubYear}})</span></p> </md-list-item> </md-list> </div> <see-also show-heading=true token=vm.person.ref.token></see-also> </aside> </md-content> '),e.put("app/components/citation/citation.html",'<work-authors class=authors authors=$ctrl.authors></work-authors> <work-title class=title title=$ctrl.title></work-title> <span class=edition ng-if=$ctrl.edition>{{$ctrl.edition}}.</span> <span class=volume ng-if=$ctrl.volume>{{$ctrl.volume}}.</span> <span class=pubinfo ng-if="$ctrl.pubInfo.place || $ctrl.pubInfo.publisher || $ctrl.pubInfo.date.description"> (<span class=place ng-if=$ctrl.pubInfo.place>{{$ctrl.pubInfo.place}},</span> <span class=publisher ng-if=$ctrl.pubInfo.publisher>{{$ctrl.pubInfo.publisher}}.</span> <time class=date ng-if=$ctrl.pubInfo.date.description datetime={{$ctrl.pubInfo.date.calendar}}>{{$ctrl.pubInfo.date.description}}</time>) </span> '),e.put("app/components/collapsible-summary/collapsible-summary.html",'<section class=summary ng-bind-html=$ctrl.content ng-class="{collapsed: ($ctrl.longEnough && !$ctrl.summaryExpanded)}" ng-click="$ctrl.summaryExpanded = true"></section> <div layout=row layout-align="center center" ng-if=$ctrl.longEnough> <md-button ng-click="$ctrl.summaryExpanded = !$ctrl.summaryExpanded" class=md-raised> Show {{$ctrl.summaryExpanded ? \'Less\' : \'More\'}} </md-button> </div> '),e.put("app/components/date-location/date-location.html","<time class=date ng-if=$ctrl.event.date datetime={{$ctrl.event.date.calendar}}>{{$ctrl.event.date.description}}</time> <span class=location ng-if=$ctrl.event.location>{{$ctrl.event.location}}</span> <div ng-if=$ctrl.event.description ng-bind-html=$ctrl.event.description></div> "),e.put("app/components/person-name/person-name.html","<span class=prefix ng-if=$ctrl.name.title>{{$ctrl.name.title}}</span> <span class=first ng-if=$ctrl.name.givenName>{{$ctrl.name.givenName}}</span> <span class=middle ng-if=$ctrl.name.middleName>{{$ctrl.name.middleName}}</span> <span class=last ng-if=$ctrl.name.familyName>{{$ctrl.name.familyName}}</span> <span class=suffix ng-if=$ctrl.name.suffix>{{$ctrl.name.suffix}}</span> "),e.put("app/components/read-online-link/read-online-link.html",'<md-button class=md-icon-button aria-label="read online" ng-if="$ctrl.copies.length == 1" ng-href={{$ctrl.getUrl($ctrl.copies[0].id)}}> <md-icon>book</md-icon> <md-tooltip>Read Online</md-tooltip> </md-button> <md-menu ng-if="$ctrl.copies.length > 1"> <md-button class=md-icon-button aria-label="read online" ng-click=$mdOpenMenu($event)> <md-icon>book</md-icon> <md-tooltip>Read Online</md-tooltip> </md-button> <md-menu-content> <md-menu-item ng-repeat="book in $ctrl.copies"> <md-button ng-href={{$ctrl.getUrl(book.id)}}> <md-icon>book</md-icon> {{book.title}} </md-button> </md-menu-item> </md-menu-content> </md-menu> '),e.put("app/components/relationships/relationships.html",'<h2 ng-if="$ctrl.loading || !$ctrl.relns || $ctrl.relns.length > 0">Related Books</h2> <div layout=row layout-align="center center" ng-if=$ctrl.loading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div layout=row layout-padding layout-align="center center" ng-if="!$ctrl.loading && !$ctrl.relns"> <div> <md-icon>warning</md-icon> </div> <div> Unable to load relationships. </div> </div> <div ng-if="!$ctrl.loading && $ctrl.relns.length > 0"> <div ng-repeat="group in $ctrl.relns"> <md-subheader class="md-no-sticky collapse-handle" ng-click="group.visible = !group.visible"> <md-icon>{{group.visible ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> {{group.label}} </md-subheader> <md-list class=slide ng-show=group.visible> <div ng-repeat="reln in group.relationships"> <md-list-item ng-repeat="anchor in reln.anchors" ui-sref="library.book({id: anchor.ref.id})" aria-label="{{anchor.label | stripTags}}"> <div class=md-list-item-text ng-bind-html=anchor.label></div> </md-list-item> </div> </md-list> </div> </div> '),e.put("app/components/work-authors/work-authors.html","<span class=author ng-repeat=\"author in $ctrl.authors\"> <a ui-sref=\"library.person({id: author.authorId})\">{{author.firstName}} {{author.lastName}}</a>{{$last ? '' : ',' }} </span> "),e.put("app/components/work-title/work-title.html","<span class=title ng-if=$ctrl.title.title>{{$ctrl.title.title}}</span>{{ $ctrl.title.title && $ctrl.title.subtitle ? ': ' : ''}}<span class=subtitle ng-if=$ctrl.title.subtitle>{{$ctrl.title.subtitle}}</span> ")}]);